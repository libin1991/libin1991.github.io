<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="é¢è¯•,ES6,ç§æœ‰å±æ€§,class,">










<meta name="description" content="ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–JavaScript ä¸­çš„ç§æœ‰å˜é‡æœ€è¿‘ JavaScript æœ‰äº†å¾ˆå¤šæ”¹è¿›ï¼Œæ–°çš„è¯­æ³•å’ŒåŠŸèƒ½ä¸€ç›´åœ¨è¢«å¢åŠ è¿›æ¥ã€‚ä½†æœ‰äº›ä¸œè¥¿å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä¸€åˆ‡ä»ç„¶æ˜¯å¯¹è±¡ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«æ”¹å˜ï¼Œå¹¶ä¸”æ²¡æœ‰å…¬å…±ã€ç§æœ‰å±æ€§çš„æ¦‚å¿µã€‚ä½†æ˜¯æˆ‘ä»¬è‡ªå·±å¯ä»¥ç”¨ä¸€äº›æŠ€å·§æ¥æ”¹å˜è¿™ç§æƒ…å†µï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»å„ç§å¯ä»¥å®ç°ç§æœ‰å˜é‡çš„æ–¹å¼ã€‚ åœ¨ 2015 å¹´ï¼ŒJavaScript æœ‰äº†">
<meta name="keywords" content="é¢è¯•,ES6,ç§æœ‰å±æ€§,class">
<meta property="og:type" content="article">
<meta property="og:title" content="ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§+å‰ç«¯100é“é¢è¯•é¢˜">
<meta property="og:url" content="http://yoursite.com/2019/07/10/ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§-å‰ç«¯100é“é¢è¯•é¢˜/index.html">
<meta property="og:site_name" content="å²æœˆæ— å½±">
<meta property="og:description" content="ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–JavaScript ä¸­çš„ç§æœ‰å˜é‡æœ€è¿‘ JavaScript æœ‰äº†å¾ˆå¤šæ”¹è¿›ï¼Œæ–°çš„è¯­æ³•å’ŒåŠŸèƒ½ä¸€ç›´åœ¨è¢«å¢åŠ è¿›æ¥ã€‚ä½†æœ‰äº›ä¸œè¥¿å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä¸€åˆ‡ä»ç„¶æ˜¯å¯¹è±¡ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«æ”¹å˜ï¼Œå¹¶ä¸”æ²¡æœ‰å…¬å…±ã€ç§æœ‰å±æ€§çš„æ¦‚å¿µã€‚ä½†æ˜¯æˆ‘ä»¬è‡ªå·±å¯ä»¥ç”¨ä¸€äº›æŠ€å·§æ¥æ”¹å˜è¿™ç§æƒ…å†µï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»å„ç§å¯ä»¥å®ç°ç§æœ‰å˜é‡çš„æ–¹å¼ã€‚ åœ¨ 2015 å¹´ï¼ŒJavaScript æœ‰äº†">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-07-17T15:02:00.079Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§+å‰ç«¯100é“é¢è¯•é¢˜">
<meta name="twitter:description" content="ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–JavaScript ä¸­çš„ç§æœ‰å˜é‡æœ€è¿‘ JavaScript æœ‰äº†å¾ˆå¤šæ”¹è¿›ï¼Œæ–°çš„è¯­æ³•å’ŒåŠŸèƒ½ä¸€ç›´åœ¨è¢«å¢åŠ è¿›æ¥ã€‚ä½†æœ‰äº›ä¸œè¥¿å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä¸€åˆ‡ä»ç„¶æ˜¯å¯¹è±¡ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«æ”¹å˜ï¼Œå¹¶ä¸”æ²¡æœ‰å…¬å…±ã€ç§æœ‰å±æ€§çš„æ¦‚å¿µã€‚ä½†æ˜¯æˆ‘ä»¬è‡ªå·±å¯ä»¥ç”¨ä¸€äº›æŠ€å·§æ¥æ”¹å˜è¿™ç§æƒ…å†µï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»å„ç§å¯ä»¥å®ç°ç§æœ‰å˜é‡çš„æ–¹å¼ã€‚ åœ¨ 2015 å¹´ï¼ŒJavaScript æœ‰äº†">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/07/10/ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§-å‰ç«¯100é“é¢è¯•é¢˜/">





  <title>ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§+å‰ç«¯100é“é¢è¯•é¢˜ | å²æœˆæ— å½±</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å²æœˆæ— å½±</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº å²æœˆä¸è´Ÿæœ‰å¿ƒäºº</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/10/ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§-å‰ç«¯100é“é¢è¯•é¢˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å²æœˆæ— å½±">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ES6æ¨¡æ‹Ÿç§æœ‰å±æ€§+å‰ç«¯100é“é¢è¯•é¢˜</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-07-10T23:32:31+08:00">
                2019-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»"><a href="#ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»" class="headerlink" title="ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»"></a>ğŸ‘<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/blob/master/datum/summary.md" target="_blank" rel="noopener">100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»</a></h2><h2 id="ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–"><a href="#ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–" class="headerlink" title="ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–"></a><a href="https://www.jianshu.com/p/5d44186b5263" target="_blank" rel="noopener">ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–</a></h2><h2 id="JavaScript-ä¸­çš„ç§æœ‰å˜é‡"><a href="#JavaScript-ä¸­çš„ç§æœ‰å˜é‡" class="headerlink" title="JavaScript ä¸­çš„ç§æœ‰å˜é‡"></a>JavaScript ä¸­çš„ç§æœ‰å˜é‡</h2><p>æœ€è¿‘ JavaScript æœ‰äº†å¾ˆå¤šæ”¹è¿›ï¼Œæ–°çš„è¯­æ³•å’ŒåŠŸèƒ½ä¸€ç›´åœ¨è¢«å¢åŠ è¿›æ¥ã€‚ä½†æœ‰äº›ä¸œè¥¿å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä¸€åˆ‡ä»ç„¶æ˜¯å¯¹è±¡ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«æ”¹å˜ï¼Œå¹¶ä¸”æ²¡æœ‰å…¬å…±ã€ç§æœ‰å±æ€§çš„æ¦‚å¿µã€‚ä½†æ˜¯æˆ‘ä»¬è‡ªå·±å¯ä»¥ç”¨ä¸€äº›æŠ€å·§æ¥æ”¹å˜è¿™ç§æƒ…å†µï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»å„ç§å¯ä»¥å®ç°ç§æœ‰å˜é‡çš„æ–¹å¼ã€‚</p>
<p>åœ¨ 2015 å¹´ï¼ŒJavaScript æœ‰äº† [ç±»] ï¼Œå¯¹äºé‚£äº›ä» æ›´ä¼ ç»Ÿçš„ C è¯­ç³»è¯­è¨€ï¼ˆå¦‚ Java å’Œ C#ï¼‰è¿‡æ¥çš„ç¨‹åºå‘˜ä»¬ï¼Œä»–ä»¬ä¼šæ›´ç†Ÿæ‚‰è¿™ç§æ“ä½œå¯¹è±¡çš„æ–¹å¼ã€‚ä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œè¿™äº›ç±»ä¸åƒä½ ä¹ æƒ¯çš„é‚£æ · â€“ å®ƒçš„å±æ€§æ²¡æœ‰ä¿®é¥°ç¬¦æ¥æ§åˆ¶è®¿é—®ï¼Œå¹¶ä¸”æ‰€æœ‰å±æ€§éƒ½éœ€è¦åœ¨å‡½æ•°ä¸­å®šä¹‰ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰èƒ½ä¿æŠ¤é‚£äº›ä¸åº”è¯¥åœ¨è¿è¡Œæ—¶è¢«æ”¹å˜çš„æ•°æ®å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€äº›é€‰é¡¹ã€‚</p>
<blockquote>
<p>åœ¨æ•´ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†åå¤ç”¨åˆ°ä¸€ä¸ªç”¨äºæ„å»ºå½¢çŠ¶çš„ç¤ºä¾‹ç±»ã€‚å®ƒçš„å®½åº¦å’Œé«˜åº¦åªèƒ½åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ï¼Œæä¾›ä¸€ä¸ªå±æ€§æ¥è·å–é¢ç§¯ã€‚æœ‰å…³è¿™äº›ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ <code>get</code> å…³é”®å­—çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä¹‹å‰çš„æ–‡ç«  <a href="https://link.juejin.im?target=https%3A%2F%2Fmarcusnoble.co.uk%2F2018-01-26-getters-and-setters-in-javascript" target="_blank" rel="noopener">Getters å’Œ Setters</a>ã€‚</p>
</blockquote>
<h2 id="å‘½åçº¦å®š"><a href="#å‘½åçº¦å®š" class="headerlink" title="å‘½åçº¦å®š"></a>å‘½åçº¦å®š</h2><p>ç¬¬ä¸€ä¸ªä¹Ÿæ˜¯æœ€æˆç†Ÿçš„æ–¹æ³•æ˜¯ä½¿ç”¨ç‰¹å®šçš„å‘½åçº¦å®šæ¥è¡¨ç¤ºå±æ€§åº”è¯¥è¢«è§†ä¸ºç§æœ‰ã€‚é€šå¸¸ä»¥ä¸‹åˆ’çº¿ä½œä¸ºå±æ€§åç§°çš„å‰ç¼€ï¼ˆä¾‹å¦‚ <code>_count</code> ï¼‰ã€‚è¿™å¹¶æ²¡æœ‰çœŸæ­£é˜»æ­¢å˜é‡è¢«è®¿é—®æˆ–ä¿®æ”¹ï¼Œè€Œæ˜¯ä¾èµ–äºå¼€å‘è€…ä¹‹é—´çš„ç›¸äº’ç†è§£ï¼Œè®¤ä¸ºè¿™ä¸ªå˜é‡åº”è¯¥è¢«è§†ä¸ºé™åˆ¶è®¿é—®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    <span class="keyword">this</span>._width = width;</span><br><span class="line">    <span class="keyword">this</span>._height = height;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._width * <span class="keyword">this</span>._height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);    <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square._width);  <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></p>
<h2 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h2><p>æƒ³è¦ç¨æœ‰ä¸€äº›é™åˆ¶æ€§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ WeakMap æ¥å­˜å‚¨æ‰€æœ‰ç§æœ‰å€¼ã€‚è¿™ä»ç„¶ä¸ä¼šé˜»æ­¢å¯¹æ•°æ®çš„è®¿é—®ï¼Œä½†å®ƒå°†ç§æœ‰å€¼ä¸ç”¨æˆ·å¯æ“ä½œçš„å¯¹è±¡åˆ†å¼€ã€‚å¯¹äºè¿™ç§æŠ€æœ¯ï¼Œæˆ‘ä»¬å°† WeakMap çš„å…³é”®å­—è®¾ç½®ä¸ºç§æœ‰å±æ€§æ‰€å±å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶ä¸”æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º <code>internal</code> ï¼‰æ¥åˆ›å»ºæˆ–è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„å±æ€§å°†è¢«å­˜å‚¨åœ¨å…¶ä¸­ã€‚è¿™ç§æŠ€æœ¯çš„å¥½å¤„æ˜¯åœ¨éå†å±æ€§æ—¶æˆ–è€…åœ¨æ‰§è¡Œ <code>JSON.stringify</code> æ—¶ä¸ä¼šå±•ç¤ºå‡ºå®ä¾‹çš„ç§æœ‰å±æ€§ï¼Œä½†å®ƒä¾èµ–äºä¸€ä¸ªæ”¾åœ¨ç±»å¤–é¢çš„å¯ä»¥è®¿é—®å’Œæ“ä½œçš„ WeakMap å˜é‡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªåœ¨æ¯ä¸ªå®ä¾‹ä¸­å­˜å‚¨ç§æœ‰å˜é‡çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> internal = <span class="function"><span class="params">obj</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!map.has(obj)) &#123;</span><br><span class="line">    map.set(obj, &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map.get(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    internal(<span class="keyword">this</span>).width = width;</span><br><span class="line">    internal(<span class="keyword">this</span>).height = height;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    <span class="keyword">return</span> internal(<span class="keyword">this</span>).width * internal(<span class="keyword">this</span>).height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);      <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(square));  <span class="comment">// &#123; height: 100, width: 100 &#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><p>Symbol çš„å®ç°æ–¹å¼ä¸ WeakMap ååˆ†ç›¸è¿‘ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FSymbol" target="_blank" rel="noopener">Symbol</a> ä½œä¸º key çš„æ–¹å¼åˆ›å»ºå®ä¾‹ä¸Šçš„å±æ€§ã€‚è¿™å¯ä»¥é˜²æ­¢è¯¥å±æ€§åœ¨éå†æˆ–ä½¿ç”¨ <code>JSON.stringify</code> æ—¶å¯è§ã€‚ä¸è¿‡è¿™ç§æŠ€æœ¯éœ€è¦ä¸ºæ¯ä¸ªç§æœ‰å±æ€§åˆ›å»ºä¸€ä¸ª Symbolã€‚å¦‚æœæ‚¨åœ¨ç±»å¤–å¯ä»¥è®¿é—®è¯¥ Symbolï¼Œé‚£ä½ è¿˜æ˜¯å¯ä»¥æ‹¿åˆ°è¿™ä¸ªç§æœ‰å±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> widthSymbol = <span class="built_in">Symbol</span>(<span class="string">'width'</span>);</span><br><span class="line"><span class="keyword">const</span> heightSymbol = <span class="built_in">Symbol</span>(<span class="string">'height'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    <span class="keyword">this</span>[widthSymbol] = width;</span><br><span class="line">    <span class="keyword">this</span>[heightSymbol] = height;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[widthSymbol] * <span class="keyword">this</span>[heightSymbol];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);         <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square.widthSymbol);  <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(square[widthSymbol]); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></p>
<h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>åˆ°ç›®å‰ä¸ºæ­¢æ‰€æ˜¾ç¤ºçš„æ‰€æœ‰æŠ€æœ¯ä»ç„¶å…è®¸ä»ç±»å¤–è®¿é—®ç§æœ‰å±æ€§ï¼Œé—­åŒ…ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§è§£å†³æ–¹æ³•ã€‚å¦‚æœæ‚¨æ„¿æ„ï¼Œå¯ä»¥å°†é—­åŒ…ä¸ WeakMap æˆ– Symbol ä¸€èµ·ä½¿ç”¨ï¼Œä½†è¿™ç§æ–¹æ³•ä¹Ÿå¯ä»¥ä¸æ ‡å‡† JavaScript å¯¹è±¡ä¸€èµ·ä½¿ç”¨ã€‚é—­åŒ…èƒŒåçš„æƒ³æ³•æ˜¯å°†æ•°æ®å°è£…åœ¨è°ƒç”¨æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œä½†æ˜¯ä»å†…éƒ¨è¿”å›å‡½æ•°çš„ç»“æœï¼Œä»è€Œä½¿è¿™ä¸€ä½œç”¨åŸŸæ— æ³•ä»å¤–éƒ¨è®¿é—®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç§æœ‰å˜é‡é›†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">this</span>$ = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">      <span class="keyword">this</span>$.width = width;</span><br><span class="line">      <span class="keyword">this</span>$.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> area() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>$.width * <span class="keyword">this</span>$.height;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Shape(...arguments);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);  <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square.width); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§æŠ€æœ¯å­˜åœ¨ä¸€ä¸ªå°é—®é¢˜ï¼Œæˆ‘ä»¬ç°åœ¨å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„ <code>Shape</code> å¯¹è±¡ã€‚ä»£ç å°†è°ƒç”¨å¤–éƒ¨çš„ <code>Shape</code> å¹¶ä¸ä¹‹äº¤äº’ï¼Œä½†è¿”å›çš„å®ä¾‹å°†æ˜¯å†…éƒ¨çš„ <code>Shape</code>ã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å¯èƒ½ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†ä¼šå¯¼è‡´ <code>square instanceof Shape</code> è¡¨è¾¾å¼è¿”å› <code>false</code>ï¼Œè¿™å¯èƒ½ä¼šæˆä¸ºä»£ç ä¸­çš„é—®é¢˜æ‰€åœ¨ã€‚</p>
<p>è§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹æ³•æ˜¯å°†å¤–éƒ¨çš„ Shape è®¾ç½®ä¸ºè¿”å›å®ä¾‹çš„åŸå‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="built_in">Object</span>.setPrototypeOf(<span class="keyword">new</span> Shape(...arguments), <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure></p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™è¿˜ä¸å¤Ÿï¼Œåªæ›´æ–°è¿™ä¸€è¡Œç°åœ¨ä¼šå°† <code>square.area</code> è§†ä¸ºæœªå®šä¹‰ã€‚è¿™æ˜¯ç”±äº <code>get</code> å…³é”®å­—åœ¨å¹•åå·¥ä½œçš„ç¼˜æ•…ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ„é€ å‡½æ•°ä¸­æ‰‹åŠ¨æŒ‡å®š getter æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç§æœ‰å˜é‡é›†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">this</span>$ = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">      <span class="keyword">this</span>$.width = width;</span><br><span class="line">      <span class="keyword">this</span>$.height = height;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, <span class="string">'area'</span>, &#123;</span><br><span class="line">        <span class="keyword">get</span>: function() &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>$.width * <span class="keyword">this</span>$.height;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.setPrototypeOf(<span class="keyword">new</span> Shape(...arguments), <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);             <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square.width);            <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>this</code> è®¾ç½®ä¸ºå®ä¾‹åŸå‹çš„åŸå‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åŒæ—¶ä½¿ç”¨ <code>instanceof</code> å’Œ <code>get</code>ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŸå‹é“¾ <code>Object -&gt; å¤–éƒ¨çš„ Shape -&gt; å†…éƒ¨çš„ Shape åŸå‹ -&gt; å†…éƒ¨çš„ Shape</code>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç§æœ‰å˜é‡é›†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">this</span>$ = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">      <span class="keyword">this</span>$.width = width;</span><br><span class="line">      <span class="keyword">this</span>$.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> area() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>$.width * <span class="keyword">this</span>$.height;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> instance = <span class="keyword">new</span> Shape(...arguments);</span><br><span class="line">  <span class="built_in">Object</span>.setPrototypeOf(<span class="built_in">Object</span>.getPrototypeOf(instance), <span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);             <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square.width);            <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy</a> æ˜¯ JavaScript ä¸­ä¸€é¡¹ç¾å¦™çš„æ–°åŠŸèƒ½ï¼Œå®ƒå°†å…è®¸ä½ æœ‰æ•ˆåœ°å°†å¯¹è±¡åŒ…è£…åœ¨åä¸º Proxy çš„å¯¹è±¡ä¸­ï¼Œå¹¶æ‹¦æˆªä¸è¯¥å¯¹è±¡çš„æ‰€æœ‰äº¤äº’ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Proxy å¹¶éµç…§ä¸Šé¢çš„ <code>å‘½åçº¦å®š</code> æ¥åˆ›å»ºç§æœ‰å˜é‡ï¼Œä½†å¯ä»¥è®©è¿™äº›ç§æœ‰å˜é‡åœ¨ç±»å¤–éƒ¨è®¿é—®å—é™ã€‚</p>
<p>Proxy å¯ä»¥æ‹¦æˆªè®¸å¤šä¸åŒç±»å‹çš„äº¤äº’ï¼Œä½†æˆ‘ä»¬è¦å…³æ³¨çš„æ˜¯ <code>get</code>å’Œ <code>set</code> ï¼ŒProxy å…è®¸æˆ‘ä»¬åˆ†åˆ«æ‹¦æˆªå¯¹ä¸€ä¸ªå±æ€§çš„è¯»å–å’Œå†™å…¥æ“ä½œã€‚åˆ›å»º Proxy æ—¶ï¼Œä½ å°†æä¾›ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‚¨æ‰“ç®—åŒ…è£¹çš„å®ä¾‹ï¼Œç¬¬äºŒä¸ªæ˜¯æ‚¨å®šä¹‰çš„å¸Œæœ›æ‹¦æˆªä¸åŒæ–¹æ³•çš„ â€œå¤„ç†å™¨â€ å¯¹è±¡ã€‚</p>
<p>æˆ‘ä»¬çš„å¤„ç†å™¨å°†ä¼šçœ‹èµ·æ¥åƒæ˜¯è¿™æ ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  <span class="keyword">get</span>: function(target, key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target[key];</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span>: function(target, key, value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    target[key] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨æ¯ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šæ£€æŸ¥è¢«è®¿é—®çš„å±æ€§çš„åç§°æ˜¯å¦ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¦‚æœæ˜¯çš„è¯æˆ‘ä»¬å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ä»è€Œé˜»æ­¢å¯¹å®ƒçš„è®¿é—®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    <span class="keyword">this</span>._width = width;</span><br><span class="line">    <span class="keyword">this</span>._height = height;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._width * <span class="keyword">this</span>._height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  <span class="keyword">get</span>: function(target, key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target[key];</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span>: function(target, key, value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    target[key] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> <span class="built_in">Proxy</span>(<span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>), handler);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);             <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br><span class="line">square._width = <span class="number">200</span>;                  <span class="comment">// é”™è¯¯ï¼šè¯•å›¾è®¿é—®ç§æœ‰å±æ€§</span></span><br></pre></td></tr></table></figure></p>
<p>æ­£å¦‚ä½ åœ¨è¿™ä¸ªä¾‹å­ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬ä¿ç•™ä½¿ç”¨ <code>instanceof</code> çš„èƒ½åŠ›ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°ä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚</p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•æ‰§è¡Œ <code>JSON.stringify</code> æ—¶ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºå®ƒè¯•å›¾å¯¹ç§æœ‰å±æ€§è¿›è¡Œæ ¼å¼åŒ–ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é‡å†™ <code>toJSON</code> å‡½æ•°æ¥ä»…è¿”å›â€œå…¬å…±çš„â€å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ–°æˆ‘ä»¬çš„ get å¤„ç†å™¨æ¥å¤„ç† <code>toJSON</code> çš„ç‰¹å®šæƒ…å†µï¼š</p>
<blockquote>
<p>æ³¨ï¼šè¿™å°†è¦†ç›–ä»»ä½•è‡ªå®šä¹‰çš„ <code>toJSON</code> å‡½æ•°ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">get</span>: function(target, key) &#123;</span><br><span class="line">  <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="string">'toJSON'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key[<span class="number">0</span>] !== <span class="string">'_'</span>) &#123;           <span class="comment">// åªå¤åˆ¶å…¬å…±å±æ€§</span></span><br><span class="line">        obj[key] = target[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> target[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç°åœ¨å·²ç»å°é—­äº†æˆ‘ä»¬çš„ç§æœ‰å±æ€§ï¼Œè€Œé¢„è®¡çš„åŠŸèƒ½ä»ç„¶å­˜åœ¨ï¼Œå”¯ä¸€çš„è­¦å‘Šæ˜¯æˆ‘ä»¬çš„ç§æœ‰å±æ€§ä»ç„¶å¯è¢«éå†ã€‚<code>for(const key in square)</code> ä¼šåˆ—å‡º <code>_width</code> å’Œ <code>_height</code>ã€‚è°¢å¤©è°¢åœ°ï¼Œè¿™é‡Œä¹Ÿæä¾›ä¸€ä¸ªå¤„ç†å™¨ï¼æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‹¦æˆªå¯¹ <code>getOwnPropertyDescriptor</code> çš„è°ƒç”¨å¹¶æ“ä½œæˆ‘ä»¬çš„ç§æœ‰å±æ€§çš„è¾“å‡ºï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getOwnPropertyDescriptor(target, key) &#123;</span><br><span class="line">  <span class="keyword">const</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(target, key);</span><br><span class="line">  <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">    desc.enumerable = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> desc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬æŠŠæ‰€æœ‰ç‰¹æ€§éƒ½æ”¾åœ¨ä¸€èµ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    <span class="keyword">this</span>._width = width;</span><br><span class="line">    <span class="keyword">this</span>._height = height;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._width * <span class="keyword">this</span>._height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  <span class="keyword">get</span>: function(target, key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="string">'toJSON'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key[<span class="number">0</span>] !== <span class="string">'_'</span>) &#123;</span><br><span class="line">          obj[key] = target[key];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target[key];</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span>: function(target, key, value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    target[key] = value;</span><br><span class="line">  &#125;,</span><br><span class="line">  getOwnPropertyDescriptor(target, key) &#123;</span><br><span class="line">    <span class="keyword">const</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(target, key);</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      desc.enumerable = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> <span class="built_in">Proxy</span>(<span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>), handler);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);             <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(square));  <span class="comment">// "&#123;&#125;"</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> square) &#123;           <span class="comment">// No output</span></span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line">square._width = <span class="number">200</span>;                  <span class="comment">// é”™è¯¯ï¼šè¯•å›¾è®¿é—®ç§æœ‰å±æ€§</span></span><br></pre></td></tr></table></figure></p>
<p>Proxy æ˜¯ç°é˜¶æ®µæˆ‘åœ¨ JavaScript ä¸­æœ€å–œæ¬¢çš„ç”¨äºåˆ›å»ºç§æœ‰å±æ€§çš„æ–¹æ³•ã€‚è¿™ç§ç±»æ˜¯ä»¥è€æ´¾ JS å¼€å‘äººå‘˜ç†Ÿæ‚‰çš„æ–¹å¼æ„å»ºçš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å°†å®ƒä»¬åŒ…è£…åœ¨ç›¸åŒçš„ Proxy å¤„ç†å™¨æ¥å…¼å®¹æ—§çš„ç°æœ‰ä»£ç ã€‚</p>
<h2 id="é™„ï¼šTypeScript-ä¸­çš„å¤„ç†æ–¹å¼"><a href="#é™„ï¼šTypeScript-ä¸­çš„å¤„ç†æ–¹å¼" class="headerlink" title="é™„ï¼šTypeScript ä¸­çš„å¤„ç†æ–¹å¼"></a>é™„ï¼šTypeScript ä¸­çš„å¤„ç†æ–¹å¼</h2><p><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.typescriptlang.org%2F" target="_blank" rel="noopener">TypeScript</a> æ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œå®ƒä¼šç¼–è¯‘ä¸ºåŸç”Ÿ JavaScript ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒã€‚å…è®¸æŒ‡å®šç§æœ‰çš„ã€å…¬å…±çš„æˆ–å—ä¿æŠ¤çš„å±æ€§æ˜¯ TypeScript çš„ç‰¹æ€§ä¹‹ä¸€ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  private width;</span><br><span class="line">  private height;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    <span class="keyword">this</span>.width = width;</span><br><span class="line">    <span class="keyword">this</span>.height = height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.width * <span class="keyword">this</span>.height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(square.area); <span class="comment">// 100</span></span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ TypeScript éœ€è¦æ³¨æ„çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œå®ƒåªæœ‰åœ¨ <strong>ç¼–è¯‘</strong> æ—¶æ‰è·çŸ¥è¿™äº›ç±»å‹ï¼Œè€Œç§æœ‰ã€å…¬å…±ä¿®é¥°ç¬¦åœ¨ç¼–è¯‘æ—¶æ‰æœ‰æ•ˆæœã€‚å¦‚æœä½ å°è¯•è®¿é—® <code>square.width</code>ï¼Œä½ ä¼šå‘ç°ï¼Œå±…ç„¶æ˜¯å¯ä»¥çš„ã€‚åªä¸è¿‡ TypeScript ä¼šåœ¨ç¼–è¯‘æ—¶ç»™ä½ æŠ¥å‡ºä¸€ä¸ªé”™è¯¯ï¼Œä½†ä¸ä¼šåœæ­¢å®ƒçš„ç¼–è¯‘ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼–è¯‘æ—¶é”™è¯¯ï¼šå±æ€§ â€˜widthâ€™ æ˜¯ç§æœ‰çš„ï¼Œåªèƒ½åœ¨ â€˜Shapeâ€™ ç±»ä¸­è®¿é—®ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(square.width); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></p>
<p>TypeScript ä¸ä¼šè‡ªä½œèªæ˜ï¼Œä¸ä¼šåšä»»ä½•çš„äº‹æƒ…æ¥å°è¯•é˜»æ­¢ä»£ç åœ¨è¿è¡Œæ—¶è®¿é—®ç§æœ‰å±æ€§ã€‚æˆ‘åªæŠŠå®ƒåˆ—åœ¨è¿™é‡Œï¼Œä¹Ÿæ˜¯è®©å¤§å®¶æ„è¯†åˆ°å®ƒå¹¶ä¸èƒ½ç›´æ¥è§£å†³é—®é¢˜ã€‚</p>
<h2 id="æœªæ¥"><a href="#æœªæ¥" class="headerlink" title="æœªæ¥"></a>æœªæ¥</h2><p>æˆ‘å·²ç»å‘å¤§å®¶ä»‹ç»äº†ç°åœ¨å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ï¼Œä½†æœªæ¥å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œæœªæ¥çœ‹èµ·æ¥å¾ˆæœ‰è¶£ã€‚ç›®å‰æœ‰ä¸€ä¸ªææ¡ˆï¼Œå‘ JavaScript çš„ç±»ä¸­å¼•å…¥ <a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Ftc39%2Fproposal-class-fields%23private-fields" target="_blank" rel="noopener">private fields</a>ï¼Œå®ƒä½¿ç”¨ <code>ï¼ƒ</code> ç¬¦å·è¡¨ç¤ºå®ƒæ˜¯ç§æœ‰çš„ã€‚å®ƒçš„ä½¿ç”¨æ–¹å¼ä¸å‘½åçº¦å®šæŠ€æœ¯éå¸¸ç±»ä¼¼ï¼Œä½†å¯¹å˜é‡è®¿é—®æä¾›äº†å®é™…çš„é™åˆ¶ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  #height;</span><br><span class="line">  #width;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    this.#width = width;</span><br><span class="line">    this.#height = height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> area() &#123;</span><br><span class="line">    return this.#width * this.#height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);             <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br><span class="line">console.log(square.#width);           // é”™è¯¯ï¼šç§æœ‰å±æ€§åªèƒ½åœ¨ç±»ä¸­è®¿é—®</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="1-å®ç°ä¸€ä¸ªcallå‡½æ•°"><a href="#1-å®ç°ä¸€ä¸ªcallå‡½æ•°" class="headerlink" title="1. å®ç°ä¸€ä¸ªcallå‡½æ•°"></a>1. å®ç°ä¸€ä¸ªcallå‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†è¦æ”¹å˜thisæŒ‡å‘çš„æ–¹æ³•æŒ‚åˆ°ç›®æ ‡thisä¸Šæ‰§è¡Œå¹¶è¿”å›Function.prototype.mycall = function (context) &#123;</span></span><br><span class="line">  <span class="keyword">if</span> (typeofthis !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    thrownewTypeError(<span class="string">'not funciton'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = thislet arg = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">let</span> result = context.fn(...arg)</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-å®ç°ä¸€ä¸ªapplyå‡½æ•°"><a href="#2-å®ç°ä¸€ä¸ªapplyå‡½æ•°" class="headerlink" title="2. å®ç°ä¸€ä¸ªapplyå‡½æ•°"></a>2. å®ç°ä¸€ä¸ªapplyå‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myapply = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (typeofthis !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    thrownewTypeError(<span class="string">'not funciton'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = thislet result</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">    result = context.fn(...arguments[<span class="number">1</span>])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = context.fn()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-å®ç°ä¸€ä¸ªbindå‡½æ•°"><a href="#3-å®ç°ä¸€ä¸ªbindå‡½æ•°" class="headerlink" title="3. å®ç°ä¸€ä¸ªbindå‡½æ•°"></a>3. å®ç°ä¸€ä¸ªbindå‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (typeofthis !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    thrownewTypeError(<span class="string">'Error'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> _this = thislet arg = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  returnfunctionF() &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å‡½æ•°ä½¿ç”¨newçš„æƒ…å†µif (thisinstanceof F) &#123;</span></span><br><span class="line">      returnnew _this(...arg, ...arguments)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> _this.apply(context, arg.concat(...arguments))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-instanceofçš„åŸç†"><a href="#4-instanceofçš„åŸç†" class="headerlink" title="4. instanceofçš„åŸç†"></a>4. instanceofçš„åŸç†</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å³è¾¹å˜é‡çš„åŸå‹å­˜åœ¨äºå·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceOf</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> leftValue = left.__proto__</span><br><span class="line">  <span class="keyword">let</span> rightValue = right.prototype</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (leftValue === <span class="literal">null</span>) &#123;</span><br><span class="line">      returnfalse</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (leftValue === right) &#123;</span><br><span class="line">      returntrue</span><br><span class="line">    &#125;</span><br><span class="line">    leftValue = leftValue.__proto__</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-Object-createçš„åŸºæœ¬å®ç°åŸç†"><a href="#5-Object-createçš„åŸºæœ¬å®ç°åŸç†" class="headerlink" title="5. Object.createçš„åŸºæœ¬å®ç°åŸç†"></a>5. Object.createçš„åŸºæœ¬å®ç°åŸç†</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">functioncreate(obj) &#123;</span><br><span class="line">  functionF() &#123;&#125;</span><br><span class="line">  F.prototype = obj</span><br><span class="line">  returnnew F()</span><br></pre></td></tr></table></figure>
<h2 id="6-newæœ¬è´¨"><a href="#6-newæœ¬è´¨" class="headerlink" title="6. newæœ¬è´¨"></a>6. newæœ¬è´¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span> (<span class="params">fun</span>) </span>&#123;</span><br><span class="line">  returnfunction () &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ä¸”å°†å…¶éšå¼åŸå‹æŒ‡å‘æ„é€ å‡½æ•°åŸå‹let obj = &#123;</span></span><br><span class="line">      __proto__ : fun.prototype</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œæ„é€ å‡½æ•°</span></span><br><span class="line">    fun.call(obj, ...arguments)</span><br><span class="line">    <span class="comment">// è¿”å›è¯¥å¯¹è±¡return obj</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functionperson(name, age) &#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = myNew(person)(<span class="string">'chen'</span>, <span class="number">18</span>) <span class="comment">// &#123;name: "chen", age: 18&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Promise"><a href="#7-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Promise" class="headerlink" title="7. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Promise"></a>7. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Promise</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// â‘ è‡ªåŠ¨æ‰§è¡Œå‡½æ•°ï¼Œâ‘¡ä¸‰ä¸ªçŠ¶æ€ï¼Œâ‘¢then </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (fn) &#123;</span><br><span class="line">    <span class="comment">// ä¸‰ä¸ªçŠ¶æ€this.state = 'pending'this.value = undefinedthis.reason = undefinedlet resolve = value =&gt; &#123;</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.state === <span class="string">'pending'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.state = <span class="string">'fulfilled'</span><span class="keyword">this</span>.value = value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> reject = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.state === <span class="string">'pending'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.state = <span class="string">'rejected'</span><span class="keyword">this</span>.reason = value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ‰§è¡Œå‡½æ•°try &#123;</span></span><br><span class="line">      fn(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      reject(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// then</span></span><br><span class="line">  then(onFulfilled, onRejected) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="keyword">this</span>.state) &#123;</span><br><span class="line">      <span class="keyword">case</span><span class="string">'fulfilled'</span>:</span><br><span class="line">        onFulfilled()</span><br><span class="line">        breakcase<span class="string">'rejected'</span>:</span><br><span class="line">        onRejected()</span><br><span class="line">        breakdefault:</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-å®ç°æµ…æ‹·è´"><a href="#8-å®ç°æµ…æ‹·è´" class="headerlink" title="8. å®ç°æµ…æ‹·è´"></a>8. å®ç°æµ…æ‹·è´</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ...å®ç°let copy1 = &#123;...&#123;x:1&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Object.assignå®ç°let copy2 = Object.assign(&#123;&#125;, &#123;x:1&#125;)</span></span><br></pre></td></tr></table></figure>
<h2 id="9-å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´"><a href="#9-å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´" class="headerlink" title="9. å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´"></a>9. å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. JOSN.stringify()/JSON.parse()</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123;<span class="attr">x</span>: <span class="number">3</span>&#125;&#125;</span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. é€’å½’æ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> copy = obj instanceofArray ? [] : &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(i)) &#123;</span><br><span class="line">      copy[i] = <span class="keyword">typeof</span> obj[i] === <span class="string">'object'</span> ? deepClone(obj[i]) : obj[i]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> copy</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-ä½¿ç”¨setTimeoutæ¨¡æ‹ŸsetInterval"><a href="#10-ä½¿ç”¨setTimeoutæ¨¡æ‹ŸsetInterval" class="headerlink" title="10. ä½¿ç”¨setTimeoutæ¨¡æ‹ŸsetInterval"></a>10. ä½¿ç”¨setTimeoutæ¨¡æ‹ŸsetInterval</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯é¿å…setIntervalå› æ‰§è¡Œæ—¶é—´å¯¼è‡´çš„é—´éš”æ‰§è¡Œæ—¶é—´ä¸ä¸€è‡´</span></span><br><span class="line">setTimeout (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">  setTimeout (<span class="built_in">arguments</span>.callee, <span class="number">500</span>)</span><br><span class="line">&#125;, <span class="number">500</span>)</span><br></pre></td></tr></table></figure>
<h2 id="11-jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•"><a href="#11-jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•" class="headerlink" title="11. jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•"></a>11. jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯„ç”Ÿç»§æ‰¿åŸå‹å±æ€§</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> Super = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  Super.prototype = Parent.prototype</span><br><span class="line">  Child.prototype = <span class="keyword">new</span> Super()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<h2 id="12-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event-Bus"><a href="#12-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event-Bus" class="headerlink" title="12. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event Bus"></a>12. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event Bus</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»„ä»¶é€šä¿¡ï¼Œä¸€ä¸ªè§¦å‘ä¸ç›‘å¬çš„è¿‡ç¨‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="comment">// å­˜å‚¨äº‹ä»¶this.events = this.events || newMap()</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç›‘å¬äº‹ä»¶</span></span><br><span class="line">  addListener (type, fn) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.events.get(type)) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events.set(type, fn)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">  emit (type) &#123;</span><br><span class="line">    <span class="keyword">let</span> handle = <span class="keyword">this</span>.events.get(type)</span><br><span class="line">    handle.apply(<span class="keyword">this</span>, [...arguments].slice(<span class="number">1</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> emitter = <span class="keyword">new</span> EventEmitter()</span><br><span class="line"><span class="comment">// ç›‘å¬äº‹ä»¶</span></span><br><span class="line">emitter.addListener(<span class="string">'ages'</span>, age =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(age)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">emitter.emit(<span class="string">'ages'</span>, <span class="number">18</span>)  <span class="comment">// 18</span></span><br></pre></td></tr></table></figure>
<h2 id="13-å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š"><a href="#13-å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="13. å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š"></a>13. å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>)</span><br><span class="line"><span class="keyword">let</span> span = <span class="built_in">document</span>.getElementById(<span class="string">'span'</span>)</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'text'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">true</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  <span class="keyword">get</span>() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è·å–æ•°æ®äº†'</span>)</span><br><span class="line">    <span class="keyword">return</span> obj.text</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span>(newVal) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ•°æ®æ›´æ–°äº†'</span>)</span><br><span class="line">    input.value = newVal</span><br><span class="line">    span.innerHTML = newVal</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">input.addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  obj.text = e.target.value</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´å®ç°å¯å‰å¾€ä¹‹å‰å†™çš„ï¼š<a href="https://juejin.im/post/5d26e368e51d4577407b1dd7" target="_blank" rel="noopener">è¿™åº”è¯¥æ˜¯æœ€è¯¦ç»†çš„å“åº”å¼ç³»ç»Ÿè®²è§£äº†</a></p>
<h2 id="14-å®ç°ä¸€ä¸ªç®€å•è·¯ç”±"><a href="#14-å®ç°ä¸€ä¸ªç®€å•è·¯ç”±" class="headerlink" title="14. å®ç°ä¸€ä¸ªç®€å•è·¯ç”±"></a>14. å®ç°ä¸€ä¸ªç®€å•è·¯ç”±</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Route</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="comment">// è·¯ç”±å­˜å‚¨å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">this</span>.routes = &#123;&#125;</span><br><span class="line">    <span class="comment">// å½“å‰hash</span></span><br><span class="line">    <span class="keyword">this</span>.currentHash = <span class="string">''</span><span class="comment">// ç»‘å®šthisï¼Œé¿å…ç›‘å¬æ—¶thisæŒ‡å‘æ”¹å˜</span></span><br><span class="line">    <span class="keyword">this</span>.freshRoute = <span class="keyword">this</span>.freshRoute.bind(<span class="keyword">this</span>)</span><br><span class="line">    <span class="comment">// ç›‘å¬</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="keyword">this</span>.freshRoute, <span class="literal">false</span>)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'hashchange'</span>, <span class="keyword">this</span>.freshRoute, <span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å­˜å‚¨</span></span><br><span class="line">  storeRoute (path, cb) &#123;</span><br><span class="line">    <span class="keyword">this</span>.routes[path] = cb || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ›´æ–°</span></span><br><span class="line">  freshRoute () &#123;</span><br><span class="line">    <span class="keyword">this</span>.currentHash = location.hash.slice(<span class="number">1</span>) || <span class="string">'/'</span><span class="keyword">this</span>.routes[<span class="keyword">this</span>.currentHash]()</span><br><span class="line">  &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="15-å®ç°æ‡’åŠ è½½"><a href="#15-å®ç°æ‡’åŠ è½½" class="headerlink" title="15. å®ç°æ‡’åŠ è½½"></a>15. å®ç°æ‡’åŠ è½½</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/1.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/2.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/3.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/4.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/5.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/6.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/7.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/8.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/9.png"alt=""&gt;&lt;/li&gt;&lt;li&gt;&lt;imgsrc="./imgs/default.png"data="./imgs/10.png"alt=""&gt;&lt;/li&gt;&lt;/ul&gt; </span><br><span class="line"></span><br><span class="line">let imgs =  document.querySelectorAll('img')</span><br><span class="line">// å¯è§†åŒºé«˜åº¦let clientHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight</span><br><span class="line">functionlazyLoad () &#123;</span><br><span class="line">  // æ»šåŠ¨å·å»çš„é«˜åº¦let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop</span><br><span class="line">  for (let i = 0; i &lt; imgs.length; i ++) &#123;</span><br><span class="line">    // å¾—åˆ°å›¾ç‰‡é¡¶éƒ¨è·ç¦»å¯è§†åŒºé¡¶éƒ¨çš„è·ç¦»let x = clientHeight + scrollTop - imgs[i].offsetTop</span><br><span class="line">    // å›¾ç‰‡åœ¨å¯è§†åŒºå†…if (x &gt; 0 &amp;&amp; x &lt; clientHeight+imgs[i].height) &#123;</span><br><span class="line">      imgs[i].src = imgs[i].getAttribute('data')</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;      </span><br><span class="line">&#125;</span><br><span class="line">setInterval(lazyLoad, 1000)</span><br></pre></td></tr></table></figure>
<h2 id="16-remå®ç°åŸç†"><a href="#16-remå®ç°åŸç†" class="headerlink" title="16. remå®ç°åŸç†"></a>16. remå®ç°åŸç†</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">functionsetRem () &#123;</span><br><span class="line">  <span class="keyword">let</span> doc = <span class="built_in">document</span>.documentElement</span><br><span class="line">  <span class="keyword">let</span> width = doc.getBoundingClientRect().width</span><br><span class="line">  <span class="comment">// å‡è®¾è®¾è®¡ç¨¿ä¸ºå®½750ï¼Œåˆ™remä¸º10pxlet rem = width / 75</span></span><br><span class="line">  doc.style.fontSize = rem + <span class="string">'px'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="17-æ‰‹å†™å®ç°AJAX"><a href="#17-æ‰‹å†™å®ç°AJAX" class="headerlink" title="17. æ‰‹å†™å®ç°AJAX"></a>17. æ‰‹å†™å®ç°AJAX</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ç®€å•å®ç°// å®ä¾‹åŒ–let xhr = new XMLHttpRequest()</span></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">xhr.open(method, url, <span class="keyword">async</span>)</span><br><span class="line"><span class="comment">// å‘é€è¯·æ±‚</span></span><br><span class="line">xhr.send(data)</span><br><span class="line"><span class="comment">// è®¾ç½®çŠ¶æ€å˜åŒ–å›è°ƒå¤„ç†è¯·æ±‚ç»“æœ</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyStatus === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. åŸºäºpromiseå®ç° functionajax (options) &#123;</span></span><br><span class="line">  <span class="comment">// è¯·æ±‚åœ°å€const url = options.url</span></span><br><span class="line">  <span class="comment">// è¯·æ±‚æ–¹æ³•const method = options.method.toLocaleLowerCase() || 'get'// é»˜è®¤ä¸ºå¼‚æ­¥trueconstasync = options.async</span></span><br><span class="line">  <span class="comment">// è¯·æ±‚å‚æ•°const data = options.data</span></span><br><span class="line">  <span class="comment">// å®ä¾‹åŒ–const xhr = new XMLHttpRequest()</span></span><br><span class="line">  <span class="comment">// è¯·æ±‚è¶…æ—¶if (options.timeout &amp;&amp; options.timeout &gt; 0) &#123;</span></span><br><span class="line">    xhr.timeout = options.timeout</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªPromiseå®ä¾‹returnnewPromise ((resolve, reject) =&gt; &#123;</span></span><br><span class="line">    xhr.ontimeout = <span class="function"><span class="params">()</span> =&gt;</span> reject &amp;&amp; reject(<span class="string">'è¯·æ±‚è¶…æ—¶'</span>)</span><br><span class="line">    <span class="comment">// ç›‘å¬çŠ¶æ€å˜åŒ–å›è°ƒ</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="comment">// 200-300 ä¹‹é—´è¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œ304èµ„æºæœªå˜ï¼Œå–ç¼“å­˜if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300 || xhr.status == 304) &#123;</span></span><br><span class="line">          resolve &amp;&amp; resolve(xhr.responseText)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          reject &amp;&amp; reject()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é”™è¯¯å›è°ƒ</span></span><br><span class="line">    xhr.onerror = <span class="function"><span class="params">err</span> =&gt;</span> reject &amp;&amp; reject(err)</span><br><span class="line">    <span class="keyword">let</span> paramArr = []</span><br><span class="line">    <span class="keyword">let</span> encodeData</span><br><span class="line">    <span class="comment">// å¤„ç†è¯·æ±‚å‚æ•°if (data instanceofObject) &#123;</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="comment">// å‚æ•°æ‹¼æ¥éœ€è¦é€šè¿‡ encodeURIComponent è¿›è¡Œç¼–ç </span></span><br><span class="line">        paramArr.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]))</span><br><span class="line">      &#125;</span><br><span class="line">      encodeData = paramArr.join(<span class="string">'&amp;'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getè¯·æ±‚æ‹¼æ¥å‚æ•°if (method === 'get') &#123;</span></span><br><span class="line">      <span class="comment">// æ£€æµ‹urlä¸­æ˜¯å¦å·²å­˜åœ¨ ? åŠå…¶ä½ç½®const index = url.indexOf('?')</span></span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">-1</span>) url += <span class="string">'?'</span>elseif (index !== url.length <span class="number">-1</span>) url += <span class="string">'&amp;'</span><span class="comment">// æ‹¼æ¥url</span></span><br><span class="line">      url += encodeData</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    xhr.open(method, url, <span class="keyword">async</span>)</span><br><span class="line">    <span class="comment">// å‘é€è¯·æ±‚if (method === 'get') xhr.send(null)</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// post æ–¹å¼éœ€è¦è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line">      xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/x-www-form-urlencoded;charset=UTF-8'</span>)</span><br><span class="line">      xhr.send(encodeData)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="18-å®ç°æ‹–æ‹½"><a href="#18-å®ç°æ‹–æ‹½" class="headerlink" title="18. å®ç°æ‹–æ‹½"></a>18. å®ç°æ‹–æ‹½</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// dragå¤„äºç»å¯¹å®šä½çŠ¶æ€let drag = document.getElementById('box')</span></span><br><span class="line">  drag.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = e || <span class="built_in">window</span>.event</span><br><span class="line">    <span class="comment">// é¼ æ ‡ä¸æ‹–æ‹½å…ƒç´ è¾¹ç•Œçš„è·ç¦» = é¼ æ ‡ä¸å¯è§†åŒºè¾¹ç•Œçš„è·ç¦» - æ‹–æ‹½å…ƒç´ ä¸è¾¹ç•Œçš„è·ç¦»let diffX = e.clientX - drag.offsetLeft</span></span><br><span class="line">    <span class="keyword">let</span> diffY = e.clientY - drag.offsetTop</span><br><span class="line">    drag.onmousemove = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// æ‹–æ‹½å…ƒç´ ç§»åŠ¨çš„è·ç¦» = é¼ æ ‡ä¸å¯è§†åŒºè¾¹ç•Œçš„è·ç¦» - é¼ æ ‡ä¸æ‹–æ‹½å…ƒç´ è¾¹ç•Œçš„è·ç¦»let left = e.clientX - diffX</span></span><br><span class="line">      <span class="keyword">let</span> top = e.clientY - diffY</span><br><span class="line">      <span class="comment">// é¿å…æ‹–æ‹½å‡ºå¯è§†åŒºif (left &lt; 0) &#123;</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">      &#125; elseif (left &gt; <span class="built_in">window</span>.innerWidth - drag.offsetWidth) &#123;</span><br><span class="line">        left = <span class="built_in">window</span>.innerWidth - drag.offsetWidth</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (top &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        top = <span class="number">0</span></span><br><span class="line">      &#125; elseif (top &gt; <span class="built_in">window</span>.innerHeight - drag.offsetHeight) &#123;</span><br><span class="line">        top = <span class="built_in">window</span>.innerHeight - drag.offsetHeight</span><br><span class="line">      &#125;</span><br><span class="line">      drag.style.left = left + <span class="string">'px'</span></span><br><span class="line">      drag.style.top = top + <span class="string">'px'</span></span><br><span class="line">    &#125;</span><br><span class="line">    drag.onmouseup = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.onmousemove = nullthis.onmouseup = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="19-å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°"><a href="#19-å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°" class="headerlink" title="19. å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°"></a>19. å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">functionthrottle (fn, delay) &#123;</span><br><span class="line">  <span class="comment">// åˆ©ç”¨é—­åŒ…ä¿å­˜æ—¶é—´let prev = Date.now()</span></span><br><span class="line">  returnfunction () &#123;</span><br><span class="line">    <span class="keyword">let</span> context = thislet arg = argumentslet now = <span class="built_in">Date</span>.now()</span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt;= delay) &#123;</span><br><span class="line">      fn.apply(context, arg)</span><br><span class="line">      prev = <span class="built_in">Date</span>.now()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functionfn () &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'èŠ‚æµ'</span>)</span><br><span class="line">&#125;</span><br><span class="line">addEventListener(<span class="string">'scroll'</span>, throttle(fn, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure>
<h2 id="20-å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°"><a href="#20-å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°" class="headerlink" title="20. å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°"></a>20. å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">functiondebounce (fn, delay) &#123;</span><br><span class="line">  <span class="comment">// åˆ©ç”¨é—­åŒ…ä¿å­˜å®šæ—¶å™¨let timer = nullreturnfunction () &#123;</span></span><br><span class="line">    <span class="keyword">let</span> context = thislet arg = <span class="built_in">arguments</span><span class="comment">// åœ¨è§„å®šæ—¶é—´å†…å†æ¬¡è§¦å‘ä¼šå…ˆæ¸…é™¤å®šæ—¶å™¨åå†é‡è®¾å®šæ—¶å™¨</span></span><br><span class="line">    clearTimeout(timer)</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      fn.apply(context, arg)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functionfn () &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'é˜²æŠ–'</span>)</span><br><span class="line">&#125;</span><br><span class="line">addEventListener(<span class="string">'scroll'</span>, debounce(fn, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/é¢è¯•/" rel="tag"># é¢è¯•</a>
          
            <a href="/tags/ES6/" rel="tag"># ES6</a>
          
            <a href="/tags/ç§æœ‰å±æ€§/" rel="tag"># ç§æœ‰å±æ€§</a>
          
            <a href="/tags/class/" rel="tag"># class</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/01/ç†è§£-React-Fiber-æ¶æ„/" rel="next" title="ç†è§£ React Fiber æ¶æ„">
                <i class="fa fa-chevron-left"></i> ç†è§£ React Fiber æ¶æ„
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/07/14/videoè§†é¢‘srcæ˜¯blob-https-æ¢ç©¶/" rel="prev" title="videoè§†é¢‘srcæ˜¯blob:https://æ¢ç©¶">
                videoè§†é¢‘srcæ˜¯blob:https://æ¢ç©¶ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="ææ–Œ">
            
              <p class="site-author-name" itemprop="name">ææ–Œ</p>
              <p class="site-description motion-element" itemprop="description">æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">172</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»"><span class="nav-number">1.</span> <span class="nav-text">ğŸ‘100ä¸ªå‰ç«¯é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–"><span class="nav-number">2.</span> <span class="nav-text">ç®—æ³•-å†’æ³¡æ’åºåŠä¼˜åŒ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript-ä¸­çš„ç§æœ‰å˜é‡"><span class="nav-number">3.</span> <span class="nav-text">JavaScript ä¸­çš„ç§æœ‰å˜é‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‘½åçº¦å®š"><span class="nav-number">4.</span> <span class="nav-text">å‘½åçº¦å®š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WeakMap"><span class="nav-number">5.</span> <span class="nav-text">WeakMap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbol"><span class="nav-number">6.</span> <span class="nav-text">Symbol</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é—­åŒ…"><span class="nav-number">7.</span> <span class="nav-text">é—­åŒ…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Proxy"><span class="nav-number">8.</span> <span class="nav-text">Proxy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é™„ï¼šTypeScript-ä¸­çš„å¤„ç†æ–¹å¼"><span class="nav-number">9.</span> <span class="nav-text">é™„ï¼šTypeScript ä¸­çš„å¤„ç†æ–¹å¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æœªæ¥"><span class="nav-number">10.</span> <span class="nav-text">æœªæ¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-å®ç°ä¸€ä¸ªcallå‡½æ•°"><span class="nav-number">11.</span> <span class="nav-text">1. å®ç°ä¸€ä¸ªcallå‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-å®ç°ä¸€ä¸ªapplyå‡½æ•°"><span class="nav-number">12.</span> <span class="nav-text">2. å®ç°ä¸€ä¸ªapplyå‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-å®ç°ä¸€ä¸ªbindå‡½æ•°"><span class="nav-number">13.</span> <span class="nav-text">3. å®ç°ä¸€ä¸ªbindå‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-instanceofçš„åŸç†"><span class="nav-number">14.</span> <span class="nav-text">4. instanceofçš„åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Object-createçš„åŸºæœ¬å®ç°åŸç†"><span class="nav-number">15.</span> <span class="nav-text">5. Object.createçš„åŸºæœ¬å®ç°åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-newæœ¬è´¨"><span class="nav-number">16.</span> <span class="nav-text">6. newæœ¬è´¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Promise"><span class="nav-number">17.</span> <span class="nav-text">7. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Promise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-å®ç°æµ…æ‹·è´"><span class="nav-number">18.</span> <span class="nav-text">8. å®ç°æµ…æ‹·è´</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´"><span class="nav-number">19.</span> <span class="nav-text">9. å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-ä½¿ç”¨setTimeoutæ¨¡æ‹ŸsetInterval"><span class="nav-number">20.</span> <span class="nav-text">10. ä½¿ç”¨setTimeoutæ¨¡æ‹ŸsetInterval</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•"><span class="nav-number">21.</span> <span class="nav-text">11. jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event-Bus"><span class="nav-number">22.</span> <span class="nav-text">12. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event Bus</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š"><span class="nav-number">23.</span> <span class="nav-text">13. å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-å®ç°ä¸€ä¸ªç®€å•è·¯ç”±"><span class="nav-number">24.</span> <span class="nav-text">14. å®ç°ä¸€ä¸ªç®€å•è·¯ç”±</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-å®ç°æ‡’åŠ è½½"><span class="nav-number">25.</span> <span class="nav-text">15. å®ç°æ‡’åŠ è½½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-remå®ç°åŸç†"><span class="nav-number">26.</span> <span class="nav-text">16. remå®ç°åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-æ‰‹å†™å®ç°AJAX"><span class="nav-number">27.</span> <span class="nav-text">17. æ‰‹å†™å®ç°AJAX</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-å®ç°æ‹–æ‹½"><span class="nav-number">28.</span> <span class="nav-text">18. å®ç°æ‹–æ‹½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°"><span class="nav-number">29.</span> <span class="nav-text">19. å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°"><span class="nav-number">30.</span> <span class="nav-text">20. å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ–Œ</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	æè¿°ï¼šç‚¹å‡»çº¢å¿ƒ
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	æè¿°ï¼šå¤åˆ¶ä»£ç 
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


