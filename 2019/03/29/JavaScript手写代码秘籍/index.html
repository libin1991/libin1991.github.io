<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="js,">










<meta name="description" content="ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨,vnode diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰é˜²å¾¡ XSS æ”»å‡» HttpOnly é˜²æ­¢åŠ«å– Cookie ç”¨æˆ·çš„è¾“å…¥æ£€æŸ¥ æœåŠ¡ç«¯çš„è¾“å‡ºæ£€æŸ¥é˜²å¾¡ CSRF æ”»å‡» éªŒè¯ç  Referer Check Token éªŒè¯  react å’Œ vue çš„ di">
<meta name="keywords" content="js">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScriptæ‰‹å†™ä»£ç ç§˜ç±">
<meta property="og:url" content="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/index.html">
<meta property="og:site_name" content="Zero Days">
<meta property="og:description" content="ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨,vnode diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰é˜²å¾¡ XSS æ”»å‡» HttpOnly é˜²æ­¢åŠ«å– Cookie ç”¨æˆ·çš„è¾“å…¥æ£€æŸ¥ æœåŠ¡ç«¯çš„è¾“å‡ºæ£€æŸ¥é˜²å¾¡ CSRF æ”»å‡» éªŒè¯ç  Referer Check Token éªŒè¯  react å’Œ vue çš„ di">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/1.png">
<meta property="og:image" content="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/2.png">
<meta property="og:image" content="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/3.png">
<meta property="og:image" content="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/4.png">
<meta property="og:updated_time" content="2019-11-07T14:12:25.355Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScriptæ‰‹å†™ä»£ç ç§˜ç±">
<meta name="twitter:description" content="ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨,vnode diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰é˜²å¾¡ XSS æ”»å‡» HttpOnly é˜²æ­¢åŠ«å– Cookie ç”¨æˆ·çš„è¾“å…¥æ£€æŸ¥ æœåŠ¡ç«¯çš„è¾“å‡ºæ£€æŸ¥é˜²å¾¡ CSRF æ”»å‡» éªŒè¯ç  Referer Check Token éªŒè¯  react å’Œ vue çš„ di">
<meta name="twitter:image" content="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/">





  <title>JavaScriptæ‰‹å†™ä»£ç ç§˜ç± | Zero Days</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zero Days</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">äººç”Ÿå¦‚é€†æ—…    æˆ‘äº¦æ˜¯è¡Œäºº</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zero Days">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScriptæ‰‹å†™ä»£ç ç§˜ç±</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-03-29T23:10:33+08:00">
                2019-03-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„-28-ä¸ª-JavaScript-æŠ€å·§"><a href="#ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„-28-ä¸ª-JavaScript-æŠ€å·§" class="headerlink" title="ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§"></a><a href="https://juejin.im/post/5cef46226fb9a07eaf2b7516" target="_blank" rel="noopener">ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§</a></h2><h2 id="Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨-vnode-diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹"><a href="#Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨-vnode-diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹" class="headerlink" title="Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨,vnode diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹"></a><a href="https://juejin.im/post/5cef749451882530810e0626#heading-0" target="_blank" rel="noopener">Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨,vnode diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹</a></h2><h2 id="ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰"><a href="#ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰" class="headerlink" title="ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰"></a>ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥<a href="https://juejin.im/post/5dc3894051882517a652dbd7" target="_blank" rel="noopener">å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰</a></h2><h2 id="é˜²å¾¡-XSS-æ”»å‡»"><a href="#é˜²å¾¡-XSS-æ”»å‡»" class="headerlink" title="é˜²å¾¡ XSS æ”»å‡»"></a>é˜²å¾¡ XSS æ”»å‡»</h2><ul>
<li>HttpOnly é˜²æ­¢åŠ«å– Cookie</li>
<li>ç”¨æˆ·çš„è¾“å…¥æ£€æŸ¥</li>
<li>æœåŠ¡ç«¯çš„è¾“å‡ºæ£€æŸ¥<h2 id="é˜²å¾¡-CSRF-æ”»å‡»"><a href="#é˜²å¾¡-CSRF-æ”»å‡»" class="headerlink" title="é˜²å¾¡ CSRF æ”»å‡»"></a>é˜²å¾¡ CSRF æ”»å‡»</h2></li>
<li>éªŒè¯ç </li>
<li>Referer Check</li>
<li>Token éªŒè¯</li>
</ul>
<h2 id="react-å’Œ-vue-çš„-diff-è¿‡ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#react-å’Œ-vue-çš„-diff-è¿‡ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="react å’Œ vue çš„ diff è¿‡ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«"></a>react å’Œ vue çš„ diff è¿‡ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«</h2><ul>
<li>React æ˜¯è¿™ä¹ˆå¹²çš„ï¼šä½ ç»™æˆ‘ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘æ ¹æ®è¿™ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„ Virtual DOMï¼Œç„¶åè·Ÿæˆ‘ä¸Šä¸€æ¬¡ç”Ÿæˆçš„ Virtual DOM å» diffï¼Œå¾—åˆ°ä¸€ä¸ª Patchï¼Œç„¶åæŠŠè¿™ä¸ª Patch æ‰“åˆ°æµè§ˆå™¨çš„ DOM ä¸Šå»ã€‚å®Œäº‹ã€‚å¹¶ä¸”è¿™é‡Œçš„ Patch æ˜¾ç„¶ä¸æ˜¯å®Œæ•´çš„ Virtual DOMï¼Œè€Œæ˜¯æ–°çš„ Virtual DOM å’Œä¸Šä¸€æ¬¡çš„ Virtual DOM ç»è¿‡ diff åçš„å·®å¼‚åŒ–çš„éƒ¨åˆ†ã€‚</li>
<li>Vue åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ã€‚</li>
<li>React æ¯å½“åº”ç”¨çš„çŠ¶æ€è¢«æ”¹å˜æ—¶ï¼Œå…¨éƒ¨å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚<br>è¿™å¯ä»¥é€šè¿‡ shouldComponentUpdate è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è¿›è¡Œæ§åˆ¶ã€‚</li>
<li>React diffçš„æ˜¯ Domï¼Œè€Œ Vue diff çš„æ˜¯æ•°æ®ã€‚</li>
</ul>
<h2 id="ã€å‰ç«¯é¢è¯•åˆ†äº«ã€‘-å¯’å†¬æ±‚èŒä¸Šç¯‡"><a href="#ã€å‰ç«¯é¢è¯•åˆ†äº«ã€‘-å¯’å†¬æ±‚èŒä¸Šç¯‡" class="headerlink" title="ã€å‰ç«¯é¢è¯•åˆ†äº«ã€‘- å¯’å†¬æ±‚èŒä¸Šç¯‡"></a><a href="https://juejin.im/post/5cdb7bc26fb9a0321557044d#heading-29" target="_blank" rel="noopener">ã€å‰ç«¯é¢è¯•åˆ†äº«ã€‘- å¯’å†¬æ±‚èŒä¸Šç¯‡</a></h2><h2 id="reduxå’Œvuexçš„åŒºåˆ«"><a href="#reduxå’Œvuexçš„åŒºåˆ«" class="headerlink" title="reduxå’Œvuexçš„åŒºåˆ«"></a>reduxå’Œvuexçš„åŒºåˆ«</h2><ul>
<li>redux æ˜¯ flux çš„ä¸€ç§å®ç°ï¼Œredux ä¸å•å•å¯ä»¥ç”¨åœ¨ react ä¸Šé¢ã€‚</li>
<li>vuex æ˜¯ redux çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹å˜ï¼Œå¯¹ä»“åº“çš„ç®¡ç†æ›´åŠ æ˜ç¡®ã€‚</li>
<li>æ•°æ®æµå‘ä¸ä¸€æ ·ï¼Œvuex çš„åŒå¼‚æ­¥æœ‰ä¸åŒçš„æµå‘ï¼Œè€Œ redux çš„åŒå¼‚æ­¥æ˜¯ä¸€æ ·çš„ã€‚</li>
<li>redux ä½¿ç”¨çš„æ˜¯ä¸å¯å˜çš„æ•°æ®ï¼Œè€Œ vuex çš„æ•°æ®æ˜¯å¯å˜çš„ï¼Œredux æ¯æ¬¡ä¿®æ”¹æ›´æ–°æ•°æ®ï¼Œå…¶å®å°±æ˜¯ç”¨æ–°çš„æ•°æ®æ›¿æ¢æ—§çš„æ•°æ®ï¼Œè€Œ vuex æ˜¯ç›´æ¥ä¿®æ”¹åŸæ•°æ®ã€‚</li>
</ul>
<h2 id="å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦"><a href="#å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦" class="headerlink" title="å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦"></a>å®ç°ä¸€ä¸ª<code>new</code>æ“ä½œç¬¦</h2><blockquote>
<p><a href="https://link.juejin.im?target=http%3A%2F%2Fblog.ifyouseewendy.com%2Fblog%2F2017%2F07%2F03%2Freview-you-dont-know-js-this-and-object-prototypes%2F%23what-happened-when-we-callnew-" target="_blank" rel="noopener">æ¥æºï¼šã€Œä½ ä¸çŸ¥é“çš„javascriptã€ è‹±æ–‡ç‰ˆ</a></p>
</blockquote>
<p><code>new</code>æ“ä½œç¬¦åšäº†è¿™äº›äº‹ï¼š</p>
<ul>
<li>å®ƒåˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</li>
<li>å®ƒä¼šè¢«æ‰§è¡Œ<code>[[Prototype]]</code>ï¼ˆä¹Ÿå°±æ˜¯<code>__proto__</code>ï¼‰é“¾æ¥ã€‚</li>
<li>å®ƒä½¿<code>this</code>æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ã€‚</li>
<li>é€šè¿‡<code>new</code>åˆ›å»ºçš„æ¯ä¸ªå¯¹è±¡å°†æœ€ç»ˆè¢«<code>[[Prototype]]</code>é“¾æ¥åˆ°è¿™ä¸ªå‡½æ•°çš„<code>prototype</code>å¯¹è±¡ä¸Šã€‚</li>
<li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹<code>Object</code>(åŒ…å«<code>Functoin, Array, Date, RegExg, Error</code>)ï¼Œé‚£ä¹ˆ<code>new</code>è¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨å°†è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">New</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (func.prototype !== <span class="literal">null</span>) &#123;</span><br><span class="line">        res.__proto__ = func.prototype;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> ret = func.apply(res, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">if</span> ((<span class="keyword">typeof</span> ret === <span class="string">"object"</span> || <span class="keyword">typeof</span> ret === <span class="string">"function"</span>) &amp;&amp; ret !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = New(A, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// equals to</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> A(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h2 id="å®ç°ä¸€ä¸ªJSON-stringify"><a href="#å®ç°ä¸€ä¸ªJSON-stringify" class="headerlink" title="å®ç°ä¸€ä¸ªJSON.stringify"></a>å®ç°ä¸€ä¸ª<code>JSON.stringify</code></h2><blockquote>
<p><code>JSON.stringify(value[, replacer [, space]])</code>ï¼š</p>
</blockquote>
<ul>
<li><code>Boolean | Number| String</code> ç±»å‹ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŸå§‹å€¼ã€‚</li>
<li><code>undefined</code>ã€ä»»æ„å‡½æ•°ä»¥åŠ<code>symbol</code>ï¼Œä¼šè¢«å¿½ç•¥ï¼ˆå‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼‰ï¼Œæˆ–è€…è¢«è½¬æ¢æˆ <code>null</code>ï¼ˆå‡ºç°åœ¨æ•°ç»„ä¸­æ—¶ï¼‰ã€‚</li>
<li>ä¸å¯æšä¸¾çš„å±æ€§ä¼šè¢«å¿½ç•¥</li>
<li>å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼é€šè¿‡æŸç§é—´æ¥çš„æ–¹å¼æŒ‡å›è¯¥å¯¹è±¡æœ¬èº«ï¼Œå³å¾ªç¯å¼•ç”¨ï¼Œå±æ€§ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonStringify</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    lettype = <span class="keyword">typeof</span> obj;</span><br><span class="line">    <span class="keyword">if</span> (type !== <span class="string">"object"</span> || type === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class="line">            obj = <span class="string">'"'</span> + obj + <span class="string">'"'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">String</span>(obj);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> json = []</span><br><span class="line">        arr = (obj &amp;&amp; obj.constructor === <span class="built_in">Array</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">let</span> v = obj[k];</span><br><span class="line">            lettype = <span class="keyword">typeof</span> v;</span><br><span class="line">            <span class="keyword">if</span> (<span class="regexp">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class="line">                v = <span class="string">'"'</span> + v + <span class="string">'"'</span>;</span><br><span class="line">            &#125; elseif (type === <span class="string">"object"</span>) &#123;</span><br><span class="line">                v = jsonStringify(v);</span><br><span class="line">            &#125;</span><br><span class="line">            json.push((arr ? <span class="string">""</span> : <span class="string">'"'</span> + k + <span class="string">'":'</span>) + <span class="built_in">String</span>(v));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (arr ? <span class="string">"["</span> : <span class="string">"&#123;"</span>) + <span class="built_in">String</span>(json) + (arr ? <span class="string">"]"</span> : <span class="string">"&#125;"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">jsonStringify(&#123;<span class="attr">x</span> : <span class="number">5</span>&#125;) <span class="comment">// "&#123;"x":5&#125;"</span></span><br><span class="line">jsonStringify([<span class="number">1</span>, <span class="string">"false"</span>, <span class="literal">false</span>]) <span class="comment">// "[1,"false",false]"</span></span><br><span class="line">jsonStringify(&#123;<span class="attr">b</span>: <span class="literal">undefined</span>&#125;) <span class="comment">// "&#123;"b":"undefined"&#125;"</span></span><br></pre></td></tr></table></figure>
<h2 id="å®ç°ä¸€ä¸ªJSON-parse"><a href="#å®ç°ä¸€ä¸ªJSON-parse" class="headerlink" title="å®ç°ä¸€ä¸ªJSON.parse"></a>å®ç°ä¸€ä¸ª<code>JSON.parse</code></h2><blockquote>
<p><code>JSON.parse(text[, reviver])</code></p>
</blockquote>
<p>ç”¨æ¥è§£æJSONå­—ç¬¦ä¸²ï¼Œæ„é€ ç”±å­—ç¬¦ä¸²æè¿°çš„JavaScriptå€¼æˆ–å¯¹è±¡ã€‚æä¾›å¯é€‰çš„reviverå‡½æ•°ç”¨ä»¥åœ¨è¿”å›ä¹‹å‰å¯¹æ‰€å¾—åˆ°çš„å¯¹è±¡æ‰§è¡Œå˜æ¢(æ“ä½œ)ã€‚</p>
<h3 id="ç¬¬ä¸€ç§ï¼šç›´æ¥è°ƒç”¨-eval"><a href="#ç¬¬ä¸€ç§ï¼šç›´æ¥è°ƒç”¨-eval" class="headerlink" title="ç¬¬ä¸€ç§ï¼šç›´æ¥è°ƒç”¨ eval"></a>ç¬¬ä¸€ç§ï¼šç›´æ¥è°ƒç”¨ eval</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonParse</span>(<span class="params">opt</span>) </span>&#123;</span><br><span class="line">    returneval(<span class="string">'('</span> + opt + <span class="string">')'</span>);</span><br><span class="line">&#125;</span><br><span class="line">jsonParse(jsonStringify(&#123;<span class="attr">x</span> : <span class="number">5</span>&#125;))</span><br><span class="line"><span class="comment">// Object &#123; x: 5&#125;</span></span><br><span class="line">jsonParse(jsonStringify([<span class="number">1</span>, <span class="string">"false"</span>, <span class="literal">false</span>]))</span><br><span class="line"><span class="comment">// [1, "false", falsr]</span></span><br><span class="line">jsonParse(jsonStringify(&#123;<span class="attr">b</span>: <span class="literal">undefined</span>&#125;))</span><br><span class="line"><span class="comment">// Object &#123; b: "undefined"&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¿å…åœ¨ä¸å¿…è¦çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>eval</code>ï¼Œeval() æ˜¯ä¸€ä¸ªå±é™©çš„å‡½æ•°ï¼Œ ä»–æ‰§è¡Œçš„ä»£ç æ‹¥æœ‰ç€æ‰§è¡Œè€…çš„æƒåˆ©ã€‚å¦‚æœä½ ç”¨ eval()è¿è¡Œçš„å­—ç¬¦ä¸²ä»£ç è¢«æ¶æ„æ–¹ï¼ˆä¸æ€€å¥½æ„çš„äººï¼‰æ“æ§ä¿®æ”¹ï¼Œæ‚¨æœ€ç»ˆå¯èƒ½ä¼šåœ¨æ‚¨çš„ç½‘é¡µ/æ‰©å±•ç¨‹åºçš„æƒé™ä¸‹ï¼Œåœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šè¿è¡Œæ¶æ„ä»£ç ã€‚</p>
</blockquote>
<p><strong>å®ƒä¼šæ‰§è¡ŒJSä»£ç ï¼Œæœ‰XSSæ¼æ´ã€‚</strong></p>
<p><strong>å¦‚æœä½ åªæƒ³è®°è¿™ä¸ªæ–¹æ³•ï¼Œå°±å¾—å¯¹å‚æ•°jsonåšæ ¡éªŒã€‚</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rx_one = <span class="regexp">/^[\],:&#123;&#125;\s]*$/</span>;</span><br><span class="line"><span class="keyword">var</span> rx_two = <span class="regexp">/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g</span>;</span><br><span class="line"><span class="keyword">var</span> rx_three = <span class="regexp">/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g</span>;</span><br><span class="line"><span class="keyword">var</span> rx_four = <span class="regexp">/(?:^|:|,)(?:\s*\[)+/g</span>;</span><br><span class="line"><span class="keyword">if</span> (</span><br><span class="line">    rx_one.test(</span><br><span class="line">        json</span><br><span class="line">            .replace(rx_two, <span class="string">"@"</span>)</span><br><span class="line">            .replace(rx_three, <span class="string">"]"</span>)</span><br><span class="line">            .replace(rx_four, <span class="string">""</span>)</span><br><span class="line">    )</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="string">"("</span> +json + <span class="string">")"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒç§ï¼šFunction"><a href="#ç¬¬äºŒç§ï¼šFunction" class="headerlink" title="ç¬¬äºŒç§ï¼šFunction"></a>ç¬¬äºŒç§ï¼šFunction</h3><blockquote>
<p>æ¥æº <a href="https://link.juejin.im?target=https%3A%2F%2Fimys.net%2F20151222%2Feval-with-new-function.html" target="_blank" rel="noopener">ç¥å¥‡çš„eval()ä¸new Function()</a></p>
</blockquote>
<p>æ ¸å¿ƒï¼š<code>Function</code>ä¸<code>eval</code>æœ‰ç›¸åŒçš„å­—ç¬¦ä¸²å‚æ•°ç‰¹æ€§ã€‚</p>
<blockquote>
<p><code>var func = new Function(arg1, arg2, ..., functionBody);</code></p>
</blockquote>
<p>åœ¨è½¬æ¢JSONçš„å®é™…åº”ç”¨ä¸­ï¼Œåªéœ€è¦è¿™ä¹ˆåšã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> jsonStr = <span class="string">'&#123; "age": 20, "name": "jack" &#125;'</span></span><br><span class="line"><span class="keyword">var</span> json = (<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'return '</span> + jsonStr))();</span><br></pre></td></tr></table></figure></p>
<p><code>eval</code> ä¸ <code>Function</code> éƒ½æœ‰ç€åŠ¨æ€ç¼–è¯‘jsä»£ç çš„ä½œç”¨ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç¼–ç¨‹ä¸­å¹¶ä¸æ¨èä½¿ç”¨ã€‚</p>
<p><strong>è¿™é‡Œæ˜¯é¢å‘é¢è¯•ç¼–ç¨‹ï¼Œå†™è¿™ä¸¤ç§å°±å¤Ÿäº†ã€‚è‡³äºç¬¬ä¸‰ï¼Œç¬¬å››ç§ï¼Œæ¶‰åŠåˆ°ç¹ççš„é€’å½’å’ŒçŠ¶æ€æœºç›¸å…³åŸç†ï¼Œå…·ä½“å¯ä»¥çœ‹ï¼š</strong></p>
<blockquote>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fyoungwind%2Fblog%2Fissues%2F115" target="_blank" rel="noopener">ã€ŠJSON.parse ä¸‰ç§å®ç°æ–¹å¼ã€‹</a></p>
</blockquote>
<h2 id="å®ç°ä¸€ä¸ªcallæˆ–-apply"><a href="#å®ç°ä¸€ä¸ªcallæˆ–-apply" class="headerlink" title="å®ç°ä¸€ä¸ªcallæˆ– apply"></a>å®ç°ä¸€ä¸ª<code>call</code>æˆ– <code>apply</code></h2><p><code>call</code>è¯­æ³•ï¼š</p>
<blockquote>
<p><code>fun.call(thisArg, arg1, arg2, ...)</code>ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œåˆ†åˆ«åœ°æä¾›çš„å‚æ•°(å‚æ•°çš„åˆ—è¡¨)ã€‚</p>
</blockquote>
<p><code>apply</code>è¯­æ³•ï¼š</p>
<blockquote>
<p><code>func.apply(thisArg, [argsArray])</code>ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»¥åŠä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„å¯¹è±¡ï¼‰æä¾›çš„å‚æ•°ã€‚</p>
</blockquote>
<h3 id="Function-callæŒ‰å¥—è·¯å®ç°"><a href="#Function-callæŒ‰å¥—è·¯å®ç°" class="headerlink" title="Function.callæŒ‰å¥—è·¯å®ç°"></a><code>Function.call</code>æŒ‰å¥—è·¯å®ç°</h3><p><code>call</code>æ ¸å¿ƒï¼š</p>
<ul>
<li>å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§</li>
<li>æ‰§è¡Œ&amp;åˆ é™¤è¿™ä¸ªå‡½æ•°</li>
<li>æŒ‡å®š<code>this</code>åˆ°å‡½æ•°å¹¶ä¼ å…¥ç»™å®šå‚æ•°æ‰§è¡Œå‡½æ•°</li>
<li>å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œé»˜è®¤æŒ‡å‘ä¸º window</li>
</ul>
<p>ä¸ºå•¥è¯´æ˜¯å¥—è·¯å®ç°å‘¢ï¼Ÿå› ä¸ºçœŸå®é¢è¯•ä¸­ï¼Œé¢è¯•å®˜å¾ˆå–œæ¬¢è®©ä½ é€æ­¥åœ°å¾€æ·±è€ƒè™‘ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥åå¥—è·¯ä»–ï¼Œå…ˆå†™ä¸ªç®€å•ç‰ˆçš„ï¼š</p>
<h3 id="ç®€å•ç‰ˆ"><a href="#ç®€å•ç‰ˆ" class="headerlink" title="ç®€å•ç‰ˆ"></a>ç®€å•ç‰ˆ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo.bar() <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h3 id="å®Œå–„ç‰ˆ"><a href="#å®Œå–„ç‰ˆ" class="headerlink" title="å®Œå–„ç‰ˆ"></a>å®Œå–„ç‰ˆ</h3><p>å½“é¢è¯•å®˜æœ‰è¿›ä¸€æ­¥çš„å‘é—®ï¼Œæˆ–è€…æ­¤æ—¶ä½ å¯ä»¥å‡è£…æ€è€ƒä¸€ä¸‹ã€‚ç„¶åå†™å‡ºä»¥ä¸‹ç‰ˆæœ¬ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call2 = <span class="function"><span class="keyword">function</span>(<span class="params">content = window</span>) </span>&#123;</span><br><span class="line">    content.fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> result = content.fn(...args);</span><br><span class="line">    delect content.fn;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">    <span class="built_in">console</span>.log(age)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">bar.call2(foo, <span class="string">'black'</span>, <span class="string">'18'</span>) <span class="comment">// black 18 1</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Function-applyçš„æ¨¡æ‹Ÿå®ç°"><a href="#Function-applyçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="Function.applyçš„æ¨¡æ‹Ÿå®ç°"></a><code>Function.apply</code>çš„æ¨¡æ‹Ÿå®ç°</h3><p><code>apply()</code>çš„å®ç°å’Œ<code>call()</code>ç±»ä¼¼ï¼Œåªæ˜¯å‚æ•°å½¢å¼ä¸åŒã€‚ç›´æ¥è´´ä»£ç å§ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply2 = <span class="function"><span class="keyword">function</span>(<span class="params">context = window</span>) </span>&#123;</span><br><span class="line">    context.fn = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">        result = context.fn(...arguments[<span class="number">1</span>])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = context.fn()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> context.fn()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å®ç°ä¸€ä¸ªFunction-bind"><a href="#å®ç°ä¸€ä¸ªFunction-bind" class="headerlink" title="å®ç°ä¸€ä¸ªFunction.bind()"></a>å®ç°ä¸€ä¸ª<code>Function.bind()</code></h2><p><code>bind()</code>æ–¹æ³•:</p>
<blockquote>
<p>ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind() çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚(æ¥è‡ªäº MDN )</p>
</blockquote>
<p>æ­¤å¤–ï¼Œ<code>bind</code>å®ç°éœ€è¦è€ƒè™‘å®ä¾‹åŒ–åå¯¹åŸå‹é“¾çš„å½±å“ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind2 = <span class="function"><span class="keyword">function</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span> != <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">"not a function"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‹¥æ²¡é—®å‚æ•°ç±»å‹åˆ™ä»è¿™å¼€å§‹å†™</span></span><br><span class="line">    <span class="keyword">let</span> fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> resFn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fn.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> resFn ? <span class="keyword">this</span> : content,args.concat(...arguments) )</span><br><span class="line">    &#125;</span><br><span class="line">    functiontmp() &#123;&#125;</span><br><span class="line">    tmp.prototype = <span class="keyword">this</span>.prototype;</span><br><span class="line">    resFn.prototype = <span class="keyword">new</span> tmp();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> resFn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å®ç°ä¸€ä¸ªç»§æ‰¿"><a href="#å®ç°ä¸€ä¸ªç»§æ‰¿" class="headerlink" title="å®ç°ä¸€ä¸ªç»§æ‰¿"></a>å®ç°ä¸€ä¸ªç»§æ‰¿</h2><p><strong>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</strong></p>
<p>ä¸€èˆ¬åªå»ºè®®å†™è¿™ç§ï¼Œå› ä¸ºå…¶å®ƒæ–¹å¼çš„ç»§æ‰¿ä¼šåœ¨ä¸€æ¬¡å®ä¾‹ä¸­è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°æˆ–æœ‰å…¶å®ƒç¼ºç‚¹ã€‚</p>
<p>æ ¸å¿ƒå®ç°æ˜¯ï¼š<strong>ç”¨ä¸€ä¸ª <code>F</code> ç©ºçš„æ„é€ å‡½æ•°å»å–ä»£æ‰§è¡Œäº† <code>Parent</code> è¿™ä¸ªæ„é€ å‡½æ•°ã€‚</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'parent name:'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name, parentName</span>) </span>&#123;</span><br><span class="line">    Parent.call(<span class="keyword">this</span>, parentName);  </span><br><span class="line">    <span class="keyword">this</span>.name = name;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">    functionF()&#123;&#125;</span><br><span class="line">    F.prototype = proto;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = create(Parent.prototype);</span><br><span class="line">Child.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'child name:'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype.constructor = Child;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parent = <span class="keyword">new</span> Parent(<span class="string">'father'</span>);</span><br><span class="line">parent.sayName();    <span class="comment">// parent name: father</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child(<span class="string">'son'</span>, <span class="string">'father'</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–"></a>å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</h2><blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p>
</blockquote>
<p><strong>å‡½æ•°æŸ¯é‡ŒåŒ–çš„ä¸»è¦ä½œç”¨å’Œç‰¹ç‚¹å°±æ˜¯å‚æ•°å¤ç”¨ã€æå‰è¿”å›å’Œå»¶è¿Ÿæ‰§è¡Œã€‚</strong></p>
<h3 id="é€šç”¨ç‰ˆ"><a href="#é€šç”¨ç‰ˆ" class="headerlink" title="é€šç”¨ç‰ˆ"></a>é€šç”¨ç‰ˆ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">functioncurry() &#123;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">	<span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> newArgs = args.concat(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>));</span><br><span class="line">        <span class="keyword">return</span> multi.apply(<span class="keyword">this</span>, newArgs);</span><br><span class="line">    &#125;</span><br><span class="line">    fn.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a * b;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiFn</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b * c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> multi = curry(multiFn);</span><br><span class="line"></span><br><span class="line">multi(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>);</span><br><span class="line">multi(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">multi(<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">multi(<span class="number">2</span>,<span class="number">3</span>)(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<h3 id="ES6éªšå†™æ³•"><a href="#ES6éªšå†™æ³•" class="headerlink" title="ES6éªšå†™æ³•"></a><code>ES6</code>éªšå†™æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> curry = <span class="function">(<span class="params">fn, arr = []</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> (</span><br><span class="line">  arg =&gt; arg.length === fn.length</span><br><span class="line">    ? fn(...arg)</span><br><span class="line">    : curry(fn, arg)</span><br><span class="line">)([...arr, ...args])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> curryTest=curry(<span class="function">(<span class="params">a,b,c,d</span>)=&gt;</span>a+b+c+d)</span><br><span class="line">curryTest(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)(<span class="number">4</span>) <span class="comment">//è¿”å›10</span></span><br><span class="line">curryTest(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">4</span>)(<span class="number">3</span>) <span class="comment">//è¿”å›10</span></span><br><span class="line">curryTest(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>) <span class="comment">//è¿”å›10</span></span><br></pre></td></tr></table></figure>
<h2 id="æ‰‹å†™ä¸€ä¸ªPromise-ä¸­é«˜çº§å¿…è€ƒ"><a href="#æ‰‹å†™ä¸€ä¸ªPromise-ä¸­é«˜çº§å¿…è€ƒ" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)"></a>æ‰‹å†™ä¸€ä¸ª<code>Promise</code>(ä¸­é«˜çº§å¿…è€ƒ)</h2><p>æˆ‘ä»¬æ¥è¿‡ä¸€é<code>Promise/A+</code>è§„èŒƒï¼š</p>
<ul>
<li>ä¸‰ç§çŠ¶æ€<code>pending| fulfilled(resolved) | rejected</code></li>
<li>å½“å¤„äº<code>pending</code>çŠ¶æ€çš„æ—¶å€™ï¼Œå¯ä»¥è½¬ç§»åˆ°<code>fulfilled(resolved)</code>æˆ–è€…<code>rejected</code>çŠ¶æ€</li>
<li>å½“å¤„äº<code>fulfilled(resolved)</code>çŠ¶æ€æˆ–è€…<code>rejected</code>çŠ¶æ€çš„æ—¶å€™ï¼Œå°±ä¸å¯å˜ã€‚</li>
</ul>
<blockquote>
<p>å¿…é¡»æœ‰ä¸€ä¸ª<code>then</code>å¼‚æ­¥æ‰§è¡Œæ–¹æ³•ï¼Œ<code>then</code>æ¥å—ä¸¤ä¸ªå‚æ•°ä¸”å¿…é¡»è¿”å›ä¸€ä¸ªpromiseï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onFulfilled ç”¨æ¥æ¥æ”¶promiseæˆåŠŸçš„å€¼</span></span><br><span class="line"><span class="comment">// onRejected ç”¨æ¥æ¥æ”¶promiseå¤±è´¥çš„åŸå› </span></span><br><span class="line">promise1=promise.then(onFulfilled, onRejected);</span><br></pre></td></tr></table></figure>
<h3 id="Promiseçš„æµç¨‹å›¾åˆ†æ"><a href="#Promiseçš„æµç¨‹å›¾åˆ†æ" class="headerlink" title="Promiseçš„æµç¨‹å›¾åˆ†æ"></a><code>Promise</code>çš„æµç¨‹å›¾åˆ†æ</h3><p><img src="/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/1.png" alt><br>æ¥å›é¡¾ä¸‹<code>Promise</code>ç”¨æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (æ“ä½œæˆåŠŸ) &#123;</span><br><span class="line">        resolve(value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// failure</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="é¢è¯•å¤Ÿç”¨ç‰ˆ"><a href="#é¢è¯•å¤Ÿç”¨ç‰ˆ" class="headerlink" title="é¢è¯•å¤Ÿç”¨ç‰ˆ"></a>é¢è¯•å¤Ÿç”¨ç‰ˆ</h3><blockquote>
<p>æ¥æºï¼š<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fforthealllight%2Fblog%2Fissues%2F4" target="_blank" rel="noopener">å®ç°ä¸€ä¸ªå®Œç¾ç¬¦åˆPromise/A+è§„èŒƒçš„Promise</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myPromise</span>(<span class="params">constructor</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> self=<span class="keyword">this</span>;</span><br><span class="line">    self.status=<span class="string">"pending"</span> <span class="comment">//å®šä¹‰çŠ¶æ€æ”¹å˜å‰çš„åˆå§‹çŠ¶æ€</span></span><br><span class="line">    self.value=<span class="literal">undefined</span>;<span class="comment">//å®šä¹‰çŠ¶æ€ä¸ºresolvedçš„æ—¶å€™çš„çŠ¶æ€</span></span><br><span class="line">    self.reason=<span class="literal">undefined</span>;<span class="comment">//å®šä¹‰çŠ¶æ€ä¸ºrejectedçš„æ—¶å€™çš„çŠ¶æ€</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//ä¸¤ä¸ª==="pending"ï¼Œä¿è¯äº†çŠ¶æ€çš„æ”¹å˜æ˜¯ä¸å¯é€†çš„</span></span><br><span class="line">       <span class="keyword">if</span>(self.status===<span class="string">"pending"</span>)&#123;</span><br><span class="line">          self.value=value;</span><br><span class="line">          self.status=<span class="string">"resolved"</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//ä¸¤ä¸ª==="pending"ï¼Œä¿è¯äº†çŠ¶æ€çš„æ”¹å˜æ˜¯ä¸å¯é€†çš„</span></span><br><span class="line">       <span class="keyword">if</span>(self.status===<span class="string">"pending"</span>)&#123;</span><br><span class="line">          self.reason=reason;</span><br><span class="line">          self.status=<span class="string">"rejected"</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ•è·æ„é€ å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">       <span class="keyword">constructor</span>(resolve,reject);</span><br><span class="line">    &#125;catch(e)&#123;</span><br><span class="line">       reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œéœ€è¦åœ¨<code>myPromise</code>çš„åŸå‹ä¸Šå®šä¹‰é“¾å¼è°ƒç”¨çš„<code>then</code>æ–¹æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">myPromise.prototype.then=<span class="function"><span class="keyword">function</span>(<span class="params">onFullfilled,onRejected</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">let</span> self=<span class="keyword">this</span>;</span><br><span class="line">   <span class="keyword">switch</span>(self.status)&#123;</span><br><span class="line">      <span class="keyword">case</span><span class="string">"resolved"</span>:</span><br><span class="line">        onFullfilled(self.value);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span><span class="string">"rejected"</span>:</span><br><span class="line">        onRejected(self.reason);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:       </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p=<span class="keyword">new</span> myPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;resolve(<span class="number">1</span>)&#125;);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="built_in">console</span>.log(x)&#125;)</span><br><span class="line"><span class="comment">//è¾“å‡º1</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å¤§å‚ä¸“ä¾›ç‰ˆ"><a href="#å¤§å‚ä¸“ä¾›ç‰ˆ" class="headerlink" title="å¤§å‚ä¸“ä¾›ç‰ˆ"></a>å¤§å‚ä¸“ä¾›ç‰ˆ</h3><p>ç›´æ¥è´´å‡ºæ¥å§ï¼Œè¿™ä¸ªç‰ˆæœ¬è¿˜ç®—å¥½ç†è§£<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">"pending"</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">"fulfilled"</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">"rejected"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">excutor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="keyword">this</span>; <span class="comment">// ç¼“å­˜å½“å‰promiseå®ä¾‹å¯¹è±¡</span></span><br><span class="line">    that.status = PENDING; <span class="comment">// åˆå§‹çŠ¶æ€</span></span><br><span class="line">    that.value = <span class="literal">undefined</span>; <span class="comment">// fulfilledçŠ¶æ€æ—¶ è¿”å›çš„ä¿¡æ¯</span></span><br><span class="line">    that.reason = <span class="literal">undefined</span>; <span class="comment">// rejectedçŠ¶æ€æ—¶ æ‹’ç»çš„åŸå› </span></span><br><span class="line">    that.onFulfilledCallbacks = []; <span class="comment">// å­˜å‚¨fulfilledçŠ¶æ€å¯¹åº”çš„onFulfilledå‡½æ•°</span></span><br><span class="line">    that.onRejectedCallbacks = []; <span class="comment">// å­˜å‚¨rejectedçŠ¶æ€å¯¹åº”çš„onRejectedå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123; <span class="comment">// valueæˆåŠŸæ€æ—¶æ¥æ”¶çš„ç»ˆå€¼</span></span><br><span class="line">        <span class="keyword">if</span>(value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value.then(resolve, reject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å®è·µä¸­è¦ç¡®ä¿ onFulfilled å’Œ onRejected æ–¹æ³•å¼‚æ­¥æ‰§è¡Œï¼Œä¸”åº”è¯¥åœ¨ then æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚</span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨resolve å›è°ƒå¯¹åº”onFulfilledå‡½æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (that.status === PENDING) &#123;</span><br><span class="line">                <span class="comment">// åªèƒ½ç”±pendingçŠ¶æ€ =&gt; fulfilledçŠ¶æ€ (é¿å…è°ƒç”¨å¤šæ¬¡resolve reject)</span></span><br><span class="line">                that.status = FULFILLED;</span><br><span class="line">                that.value = value;</span><br><span class="line">                that.onFulfilledCallbacks.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> cb(that.value));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123; <span class="comment">// reasonå¤±è´¥æ€æ—¶æ¥æ”¶çš„æ‹’å› </span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨reject å›è°ƒå¯¹åº”onRejectedå‡½æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (that.status === PENDING) &#123;</span><br><span class="line">                <span class="comment">// åªèƒ½ç”±pendingçŠ¶æ€ =&gt; rejectedçŠ¶æ€ (é¿å…è°ƒç”¨å¤šæ¬¡resolve reject)</span></span><br><span class="line">                that.status = REJECTED;</span><br><span class="line">                that.reason = reason;</span><br><span class="line">                that.onRejectedCallbacks.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> cb(that.reason));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•è·åœ¨excutoræ‰§è¡Œå™¨ä¸­æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line">    <span class="comment">// new Promise((resolve, reject) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     throw new Error('error in excutor')</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        excutor(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> newPromise;</span><br><span class="line">    <span class="comment">// å¤„ç†å‚æ•°é»˜è®¤å€¼ ä¿è¯å‚æ•°åç»­èƒ½å¤Ÿç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    onFulfilled =</span><br><span class="line">        <span class="keyword">typeof</span> onFulfilled === <span class="string">"function"</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line">    onRejected =</span><br><span class="line">        <span class="keyword">typeof</span> onRejected === <span class="string">"function"</span> ? onRejected : <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> reason;</span><br><span class="line">        &#125;;</span><br><span class="line">    <span class="keyword">if</span> (that.status === FULFILLED) &#123; <span class="comment">// æˆåŠŸæ€</span></span><br><span class="line">        <span class="keyword">return</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    <span class="keyword">let</span> x = onFulfilled(that.value);</span><br><span class="line">                    resolvePromise(newPromise, x, resolve, reject); <span class="comment">// æ–°çš„promise resolve ä¸Šä¸€ä¸ªonFulfilledçš„è¿”å›å€¼</span></span><br><span class="line">                &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">                    reject(e); <span class="comment">// æ•è·å‰é¢onFulfilledä¸­æŠ›å‡ºçš„å¼‚å¸¸ then(onFulfilled, onRejected);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (that.status === REJECTED) &#123; <span class="comment">// å¤±è´¥æ€</span></span><br><span class="line">        <span class="keyword">return</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = onRejected(that.reason);</span><br><span class="line">                    resolvePromise(newPromise, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">                    reject(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (that.status === PENDING) &#123; <span class="comment">// ç­‰å¾…æ€</span></span><br><span class="line">        <span class="comment">// å½“å¼‚æ­¥è°ƒç”¨resolve/rejectedæ—¶ å°†onFulfilled/onRejectedæ”¶é›†æš‚å­˜åˆ°é›†åˆä¸­</span></span><br><span class="line">        <span class="keyword">return</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            that.onFulfilledCallbacks.push(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = onFulfilled(value);</span><br><span class="line">                    resolvePromise(newPromise, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">                    reject(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            that.onRejectedCallbacks.push(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = onRejected(reason);</span><br><span class="line">                    resolvePromise(newPromise, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">                    reject(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>emmmï¼Œæˆ‘è¿˜æ˜¯ä¹–ä¹–åœ°å†™å›è¿›é˜¶ç‰ˆå§ã€‚</p>
<h2 id="æ‰‹å†™é˜²æŠ–-Debouncing-å’ŒèŠ‚æµ-Throttling"><a href="#æ‰‹å†™é˜²æŠ–-Debouncing-å’ŒèŠ‚æµ-Throttling" class="headerlink" title="æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)"></a>æ‰‹å†™é˜²æŠ–(<code>Debouncing</code>)å’ŒèŠ‚æµ(<code>Throttling</code>)</h2><blockquote>
<p><code>scroll</code> äº‹ä»¶æœ¬èº«ä¼šè§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“ï¼ŒåŒæ—¶ <code>scroll</code> äº‹ä»¶çš„ <code>handler</code> åˆä¼šè¢«é«˜é¢‘åº¦çš„è§¦å‘, å› æ­¤äº‹ä»¶çš„ <code>handler</code> å†…éƒ¨ä¸åº”è¯¥æœ‰å¤æ‚æ“ä½œï¼Œä¾‹å¦‚ <code>DOM</code> æ“ä½œå°±ä¸åº”è¯¥æ”¾åœ¨äº‹ä»¶å¤„ç†ä¸­ã€‚<br>é’ˆå¯¹æ­¤ç±»é«˜é¢‘åº¦è§¦å‘äº‹ä»¶é—®é¢˜ï¼ˆä¾‹å¦‚é¡µé¢ <code>scroll</code> ï¼Œå±å¹• <code>resize</code>ï¼Œç›‘å¬ç”¨æˆ·è¾“å…¥ç­‰ï¼‰ï¼Œæœ‰ä¸¤ç§å¸¸ç”¨çš„è§£å†³æ–¹æ³•ï¼Œé˜²æŠ–å’ŒèŠ‚æµã€‚</p>
</blockquote>
<h3 id="9-1-é˜²æŠ–-Debouncing-å®ç°"><a href="#9-1-é˜²æŠ–-Debouncing-å®ç°" class="headerlink" title="9.1 é˜²æŠ–(Debouncing)å®ç°"></a>9.1 é˜²æŠ–(<code>Debouncing</code>)å®ç°</h3><p>å…¸å‹ä¾‹å­ï¼šé™åˆ¶ é¼ æ ‡è¿å‡» è§¦å‘ã€‚</p>
<p>ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£é‡Šæ˜¯ï¼š</p>
<blockquote>
<p>å½“ä¸€æ¬¡äº‹ä»¶å‘ç”Ÿåï¼Œäº‹ä»¶å¤„ç†å™¨è¦ç­‰ä¸€å®šé˜ˆå€¼çš„æ—¶é—´ï¼Œå¦‚æœè¿™æ®µæ—¶é—´è¿‡å»å å†ä¹Ÿæ²¡æœ‰ äº‹ä»¶å‘ç”Ÿï¼Œå°±å¤„ç†æœ€åä¸€æ¬¡å‘ç”Ÿçš„äº‹ä»¶ã€‚å‡è®¾è¿˜å·® <code>0.01</code> ç§’å°±åˆ°è¾¾æŒ‡å®šæ—¶é—´ï¼Œè¿™æ—¶åˆæ¥äº†ä¸€ä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆä¹‹å‰çš„ç­‰å¾…ä½œåºŸï¼Œéœ€è¦é‡æ–°å†ç­‰å¾…æŒ‡å®šæ—¶é—´ã€‚</p>
</blockquote>
<p><img src="/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/2.png" alt></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜²æŠ–åŠ¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn,wait=<span class="number">50</span>,immediate</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    returnfunction() &#123;</span><br><span class="line">        <span class="keyword">if</span>(immediate) &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(timer) clearTimeout(timer)</span><br><span class="line">        timer = setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line">        &#125;,wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="èŠ‚æµ-Throttling-å®ç°"><a href="#èŠ‚æµ-Throttling-å®ç°" class="headerlink" title="èŠ‚æµ(Throttling)å®ç°"></a>èŠ‚æµ(<code>Throttling</code>)å®ç°</h3><blockquote>
<p>å¯ä»¥ç†è§£ä¸ºäº‹ä»¶åœ¨ä¸€ä¸ªç®¡é“ä¸­ä¼ è¾“ï¼ŒåŠ ä¸Šè¿™ä¸ªèŠ‚æµé˜€ä»¥åï¼Œäº‹ä»¶çš„æµé€Ÿå°±ä¼šå‡æ…¢ã€‚å®é™…ä¸Šè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯å¦‚æ­¤ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨é¢‘ç‡é™åˆ¶åœ¨ä¸€å®šé˜ˆå€¼å†…ï¼Œä¾‹å¦‚ 1sï¼Œé‚£ä¹ˆ 1s å†…è¿™ä¸ªå‡½æ•°ä¸€å®šä¸ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡</p>
</blockquote>
<p><img src="/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/3.png" alt></p>
<p>ç®€å•çš„èŠ‚æµå‡½æ•°:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, wait</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> prev = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">	returnfunction() &#123; </span><br><span class="line">	    <span class="keyword">const</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">		<span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">		<span class="keyword">if</span> (now - prev &gt; wait) &#123;</span><br><span class="line">			fn.apply(<span class="keyword">this</span>, args);</span><br><span class="line">			prev = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ç»“åˆå®è·µ"><a href="#ç»“åˆå®è·µ" class="headerlink" title="ç»“åˆå®è·µ"></a>ç»“åˆå®è·µ</h3><p><strong>é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°æ¥åˆ‡æ¢æ¨¡å¼ã€‚</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay, isDebounce</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer</span><br><span class="line">  <span class="keyword">let</span> lastCall = <span class="number">0</span></span><br><span class="line">  returnfunction (...args) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isDebounce) &#123;</span><br><span class="line">      <span class="keyword">if</span> (timer) clearTimeout(timer)</span><br><span class="line">      timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        fn(...args)</span><br><span class="line">      &#125;, delay)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">      <span class="keyword">if</span> (now - lastCall &lt; delay) <span class="keyword">return</span></span><br><span class="line">      lastCall = now</span><br><span class="line">      fn(...args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´"><a href="#æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´"></a>æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</h2><p>æœ‰ä¸ªæœ€è‘—åçš„ä¹ä¸ç‰ˆå®ç°ï¼Œåœ¨ã€Šä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸Šï¼‰ã€‹é‡Œä¹Ÿæœ‰æåŠï¼š<br><img src="/2019/03/29/JavaScriptæ‰‹å†™ä»£ç ç§˜ç±/4.png" alt></p>
<h3 id="10-1-ä¹ä¸ç‰ˆ"><a href="#10-1-ä¹ä¸ç‰ˆ" class="headerlink" title="10.1 ä¹ä¸ç‰ˆ"></a>10.1 ä¹ä¸ç‰ˆ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newObj = <span class="built_in">JSON</span>.parse( <span class="built_in">JSON</span>.stringify( someObj ) );</span><br></pre></td></tr></table></figure>
<h3 id="10-2-é¢è¯•å¤Ÿç”¨ç‰ˆ"><a href="#10-2-é¢è¯•å¤Ÿç”¨ç‰ˆ" class="headerlink" title="10.2 é¢è¯•å¤Ÿç”¨ç‰ˆ"></a>10.2 é¢è¯•å¤Ÿç”¨ç‰ˆ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œ</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj == <span class="string">"object"</span>)&#123;</span><br><span class="line">        <span class="comment">//å¤æ‚æ•°æ®ç±»å‹</span></span><br><span class="line">        <span class="keyword">var</span> result = obj.constructor == <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> obj)&#123;</span><br><span class="line">            result[i] = <span class="keyword">typeof</span> obj[i] == <span class="string">"object"</span> ? deepCopy(obj[i]) : obj[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//ç®€å•æ•°æ®ç±»å‹ ç›´æ¥ == èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">var</span> result = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…³äºæ·±æ‹·è´çš„è®¨è®ºå¤©å¤©æœ‰ï¼Œè¿™é‡Œå°±è´´ä¸¤ç§å§ï¼Œæ¯•ç«Ÿæˆ‘â€¦</p>
<h2 id="å®ç°ä¸€ä¸ªinstanceOf"><a href="#å®ç°ä¸€ä¸ªinstanceOf" class="headerlink" title="å®ç°ä¸€ä¸ªinstanceOf"></a>å®ç°ä¸€ä¸ª<code>instanceOf</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceOf</span>(<span class="params">left,right</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> proto = left.__proto__;</span><br><span class="line">    <span class="keyword">let</span> prototype = right.prototype</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(proto === <span class="literal">null</span>) returnfalseif(proto === prototype) returntrue</span><br><span class="line">        proto = proto.__proto__;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„æ‰å¹³åŒ–æ•°ç»„çš„å‡ ç§æ–¹æ³•"><a href="#æ•°ç»„æ‰å¹³åŒ–æ•°ç»„çš„å‡ ç§æ–¹æ³•" class="headerlink" title="æ•°ç»„æ‰å¹³åŒ–æ•°ç»„çš„å‡ ç§æ–¹æ³•"></a>æ•°ç»„æ‰å¹³åŒ–æ•°ç»„çš„å‡ ç§æ–¹æ³•</h2><h3 id="Arrayâ€‹-prototypeâ€‹-flat"><a href="#Arrayâ€‹-prototypeâ€‹-flat" class="headerlink" title="Arrayâ€‹.prototypeâ€‹.flat()"></a>Arrayâ€‹.prototypeâ€‹.flat()</h3><p>flat()æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦depthé€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜åŸæ•°ç»„</p>
<p>è¯­æ³•ï¼š let newArray = arr.flat(depth)<br>æè¿°ï¼š depthä¸ºæŒ‡å®šè¦æå–åµŒå¥—æ•°ç»„çš„ç»“æ„æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º 1<br>      flat() æ–¹æ³•ä¼šç§»é™¤æ•°ç»„ä¸­çš„ç©ºé¡¹</p>
<p>ä¾‹å­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]];</span><br><span class="line">    arr1.flat(); <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡å®šè¦æå–åµŒå¥—æ•°ç»„çš„ç»“æ„æ·±åº¦ä¸º1å±‚</span></span><br><span class="line">    <span class="keyword">let</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>]]];</span><br><span class="line">    arr2.flat(<span class="number">1</span>); <span class="comment">// [1, 2, 3, 4, [5, 6]]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡å®šè¦æå–åµŒå¥—æ•°ç»„çš„ç»“æ„æ·±åº¦ä¸º2å±‚</span></span><br><span class="line">    <span class="keyword">let</span> arr3 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>]]];</span><br><span class="line">    arr3.flat(<span class="number">2</span>); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ Infinity ä½œä¸ºæ·±åº¦ï¼Œå±•å¼€ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„</span></span><br><span class="line">    <span class="keyword">let</span> arr4 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>]]]</span><br><span class="line">    arr4.flat(<span class="literal">Infinity</span>); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤æ•°ç»„ä¸­çš„ç©ºé¡¹</span></span><br><span class="line">    <span class="keyword">let</span> arr5 = [<span class="number">1</span>, <span class="number">2</span>, , <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">    arr5.flat(); <span class="comment">// [1, 2, 4, 5]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å½’å¹¶æ–¹æ³•-reduce"><a href="#å½’å¹¶æ–¹æ³•-reduce" class="headerlink" title="å½’å¹¶æ–¹æ³• reduce()"></a>å½’å¹¶æ–¹æ³• reduce()</h3><blockquote>
<p>æˆ‘ä»¬ç”¨reduceå‡½æ•°è¿›è¡Œéå†ï¼ŒæŠŠ<code>prev</code>çš„åˆå€¼èµ‹å€¼ä¸º[]ï¼Œå¦‚æœå½“å‰çš„å€¼æ˜¯æ•°ç»„çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±é€’å½’éå†å®ƒçš„å­©å­ï¼Œå¦‚æœå½“å‰çš„å€¼ä¸æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠå®ƒæ‹¼æ¥è¿›æ•°ç»„é‡Œã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [[<span class="number">9</span>, <span class="number">10</span>], <span class="number">11</span>]];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">prev, cur</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prev.concat(<span class="built_in">Array</span>.isArray(cur) ? flat(cur) : cur);</span><br><span class="line">      &#125;, [])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(flat(arr)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br></pre></td></tr></table></figure>
<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h3><blockquote>
<p>toString()æ–¹æ³•æœ‰å¾ˆå¤§å±€é™æ€§ï¼Œåªé€‚ç”¨äºæ•°ç»„å…ƒç´ å…¨éƒ¨ä¸ºæ•°å­—çš„æƒ…å†µä¸‹</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// toString &amp;&amp; Json.parase</span></span><br><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [[<span class="number">9</span>, <span class="number">10</span>], <span class="number">11</span>]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = arr.toString();</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="string">'['</span> + str + <span class="string">']'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(flat(arr)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// toString &amp;&amp; split</span></span><br><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [[<span class="number">9</span>, <span class="number">10</span>], <span class="number">11</span>]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.toString().split(<span class="string">','</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>(item)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(flat(arr)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// join &amp;&amp; split</span></span><br><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [[<span class="number">9</span>, <span class="number">10</span>], <span class="number">11</span>]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.join(<span class="string">','</span>).split(<span class="string">','</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>(item);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(flat(arr)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br></pre></td></tr></table></figure>
<h3 id="å¾ªç¯-é€’å½’"><a href="#å¾ªç¯-é€’å½’" class="headerlink" title="å¾ªç¯+é€’å½’"></a>å¾ªç¯+é€’å½’</h3><blockquote>
<p>é€’å½’çš„éå†æ¯ä¸€é¡¹ï¼Œè‹¥ä¸ºæ•°ç»„åˆ™ç»§ç»­éå†ï¼Œå¦åˆ™<code>concat</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [[<span class="number">9</span>, <span class="number">10</span>], <span class="number">11</span>]];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> result = [];</span><br><span class="line">      arr.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(item)) &#123;</span><br><span class="line">          result = result.concat(flat(item));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result.push(item);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(flat(arr)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‰©å±•è¿ç®—ç¬¦â€¦"><a href="#æ‰©å±•è¿ç®—ç¬¦â€¦" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦â€¦"></a>æ‰©å±•è¿ç®—ç¬¦â€¦</h3><blockquote>
<p><code>...</code>ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¸­</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [[<span class="number">9</span>, <span class="number">10</span>], <span class="number">11</span>]]</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">while</span> (arr.some(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item))) &#123;</span><br><span class="line">        arr = [].concat(...arr);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(flat(arr)); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>æ”¶é›†å„ç§å‰ç«¯ç¼–ç¨‹çš„å¥‡æŠ€æ·«å·§</p>
</blockquote>
<h2 id="æ•°å­—åƒä½åˆ†éš”ç¬¦"><a href="#æ•°å­—åƒä½åˆ†éš”ç¬¦" class="headerlink" title="æ•°å­—åƒä½åˆ†éš”ç¬¦"></a>æ•°å­—åƒä½åˆ†éš”ç¬¦</h2><p>æ•°å­—éœ€è¦ç”¨æ‹¬å·åŒ…è£¹ï¼Œå¦åˆ™è§£æå™¨ä¼šå°†<code>.</code>è§£æä¸ºå°æ•°ç‚¹ï¼ŒæŠ¥è¯­æ³•é”™è¯¯ã€‚ä¹Ÿå¯ä»¥å†™æˆ<code>n..toLocaleString()</code>ï¼Œè¿™æ ·è§£æå™¨ä¼šè®¤ä¸ºç¬¬ä¸€ä¸ªç‚¹æ˜¯å°æ•°ç‚¹ï¼Œç¬¬äºŒä¸ªç‚¹æ˜¯å±æ€§è®¿é—®å™¨ã€‚</p>
<p>å¤§éƒ¨åˆ†å›½å®¶çš„æ•°å­—æœ¬åœ°æ ¼å¼éƒ½æ˜¯ç”¨é€—å·ä½œåƒä½åˆ†éš”ç¬¦ã€‚ä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚<code>(4374389489327893).toLocaleString(&#39;de-DE&#39;)</code>çš„è¿”å›å€¼å°±æ˜¯<code>4.374.389.489.327.893</code>ï¼Œè¿™æ˜¯å¾·å›½çš„æ ¼å¼ã€‚å†æ¯”å¦‚<code>(4374389489327893).toLocaleString(&#39;ar-SA&#39;)</code>çš„è¿”å›å€¼å°±æ˜¯<code>Ù¤Ù¬Ù£Ù§Ù¤Ù¬Ù£Ù¨Ù©Ù¬Ù¤Ù¨Ù©Ù¬Ù£Ù¢Ù§Ù¬Ù¨Ù©Ù£</code>ï¼Œè¿™æ˜¯æ²™ç‰¹é˜¿æ‹‰ä¼¯çš„æ ¼å¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kilofy</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (n).toLocaleString(<span class="string">'zh-CN'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">kilofy(<span class="number">4374389489327893</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// "4,374,389,489,327,893"</span></span><br></pre></td></tr></table></figure>
<p>ğŸŒğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒš</p>
<p>ä¸ºä»€ä¹ˆè¦åŠ ä¸€ä¸ªé›¶å®½å¦å®šå…ˆè¡Œæ–­è¨€<code>(?!^)</code>ï¼Ÿå®ƒçš„æ„æ€æ˜¯åŒ¹é…é¡¹ä¸èƒ½åœ¨è¡Œé¦–ä¹‹å‰ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>/(?=(\d{3})+$)/g</code>å°±å¯ä»¥è¾¾åˆ°æ•ˆæœã€‚ä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚<code>374389489327893</code>å°±ä¼šè¿”å›<code>,374,389,489,327,893</code>ï¼Œè€Œè¿™å°±æ˜¯é›¶å®½å¦å®šå…ˆè¡Œæ–­è¨€å‘æŒ¥ä½œç”¨çš„åœºæ™¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(?!^)(?=(\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kilofy</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">String</span>(n).replace(reg, <span class="string">','</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">kilofy(<span class="number">4374389489327893</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// "4,374,389,489,327,893"</span></span><br></pre></td></tr></table></figure>
<h2 id="æ ¼å¼åŒ–-URL-æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºå¯¹è±¡"><a href="#æ ¼å¼åŒ–-URL-æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºå¯¹è±¡" class="headerlink" title="æ ¼å¼åŒ– URL æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºå¯¹è±¡"></a>æ ¼å¼åŒ– URL æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºå¯¹è±¡</h2><p>replace å›è°ƒçš„åä¸¤ä¸ªå‚æ•° k å’Œ vï¼Œåˆ†åˆ«å¯¹åº”æ­£åˆ™ä¸­çš„ä¸¤ä¸ªæ•è·ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/([^?&amp;=]+)=([^&amp;]+)/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryStringObject</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> q = &#123;&#125;;</span><br><span class="line">    location.search.replace(reg, (m, k, v) =&gt; q[k] = v);</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getQueryStringObject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// URL: https://matiji.cn/path?a=z&amp;b=y&amp;c=x</span></span><br><span class="line"><span class="comment">// &#123; a: z, b: y: c: x &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¿«é€Ÿæµ®ç‚¹æ•°è½¬æ•´æ•°"><a href="#å¿«é€Ÿæµ®ç‚¹æ•°è½¬æ•´æ•°" class="headerlink" title="å¿«é€Ÿæµ®ç‚¹æ•°è½¬æ•´æ•°"></a>å¿«é€Ÿæµ®ç‚¹æ•°è½¬æ•´æ•°</h2><p>å¦‚æœå¸Œæœ›å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨Math.floor()ã€Math.ceil()æˆ–Math.round()ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ç§æ›´å¿«çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨|(ä½æˆ–è¿ç®—ç¬¦)å°†æµ®ç‚¹æ•°æˆªæ–­ä¸ºæ•´æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">23.9</span> | <span class="number">0</span>);  <span class="comment">// Result: 23</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">-23.9</span> | <span class="number">0</span>); <span class="comment">// Result: -23</span></span><br></pre></td></tr></table></figure></p>
<p>|çš„è¡Œä¸ºå–å†³äºå¤„ç†çš„æ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥æœ€å¥½åªåœ¨ç¡®å®šçš„æƒ…å†µä¸‹ä½¿ç”¨è¿™ä¸ªå¿«æ·æ–¹å¼ã€‚<br>å¦‚æœnä¸ºæ­£ï¼Œåˆ™n | 0æœ‰æ•ˆåœ°å‘ä¸‹èˆå…¥ã€‚ å¦‚æœnä¸ºè´Ÿæ•°ï¼Œåˆ™æœ‰æ•ˆåœ°å‘ä¸Šèˆå…¥ã€‚ æ›´å‡†ç¡®åœ°è¯´ï¼Œæ­¤æ“ä½œå°†åˆ é™¤å°æ•°ç‚¹åé¢çš„ä»»ä½•å†…å®¹ï¼Œå°†æµ®ç‚¹æ•°æˆªæ–­ä¸ºæ•´æ•°ã€‚<br>ä½ å¯ä»¥ä½¿ç”¨~~æ¥è·å¾—ç›¸åŒçš„èˆå…¥æ•ˆæœï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œå®é™…ä¸Šä»»ä½•ä½æ“ä½œç¬¦éƒ½ä¼šå¼ºåˆ¶æµ®ç‚¹æ•°ä¸ºæ•´æ•°ã€‚è¿™äº›ç‰¹æ®Šæ“ä½œä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºä¸€æ—¦å¼ºåˆ¶ä¸ºæ•´æ•°ï¼Œå€¼å°±ä¿æŒä¸å˜ã€‚</p>
<h2 id="åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—"><a href="#åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—" class="headerlink" title="åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—"></a>åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—</h2><p>æŒ‰ä½æˆ–è¿ç®—ç¬¦è¿˜å¯ä»¥ç”¨äºä»æ•´æ•°çš„æœ«å°¾åˆ é™¤ä»»æ„æ•°é‡çš„æ•°å­—ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨è¿™æ ·çš„ä»£ç æ¥åœ¨ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"1553"</span>; </span><br><span class="line"><span class="built_in">Number</span>(str.substring(<span class="number">0</span>, str.length - <span class="number">1</span>));</span><br></pre></td></tr></table></figure></p>
<p>ç›¸åï¼ŒæŒ‰ä½æˆ–è¿ç®—ç¬¦å¯ä»¥è¿™æ ·å†™ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1553</span> / <span class="number">10</span>   | <span class="number">0</span>)  <span class="comment">// Result: 155</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1553</span> / <span class="number">100</span>  | <span class="number">0</span>)  <span class="comment">// Result: 15</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1553</span> / <span class="number">1000</span> | <span class="number">0</span>)  <span class="comment">// Result: 1</span></span><br></pre></td></tr></table></figure></p>
<h2 id="è·å–æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹"><a href="#è·å–æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹" class="headerlink" title="è·å–æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹"></a>è·å–æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹</h2><p>æ•°ç»„æ–¹æ³•slice()å¯ä»¥æ¥å—è´Ÿæ•´æ•°ï¼Œå¦‚æœæä¾›å®ƒï¼Œå®ƒå°†æ¥å—æ•°ç»„æœ«å°¾çš„å€¼ï¼Œè€Œä¸æ˜¯æ•°ç»„å¼€å¤´çš„å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">-1</span>)); <span class="comment">// Result: [9]</span></span><br><span class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">-2</span>)); <span class="comment">// Result: [8, 9]</span></span><br><span class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">-3</span>)); <span class="comment">// Result: [7, 8, 9]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="æ ¼å¼åŒ–JSONä»£ç "><a href="#æ ¼å¼åŒ–JSONä»£ç " class="headerlink" title="æ ¼å¼åŒ–JSONä»£ç "></a>æ ¼å¼åŒ–JSONä»£ç </h2><p>æœ€åï¼Œä½ ä¹‹å‰å¯èƒ½å·²ç»ä½¿ç”¨è¿‡JSON.stringifyï¼Œä½†æ˜¯æ‚¨æ˜¯å¦æ„è¯†åˆ°å®ƒè¿˜å¯ä»¥å¸®åŠ©ä½ ç¼©è¿›JSONï¼Ÿ<br>stringify()æ–¹æ³•æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šä¸€ä¸ªreplacerå‡½æ•°ï¼Œå¯ç”¨äºè¿‡æ»¤æ˜¾ç¤ºçš„JSONå’Œä¸€ä¸ªç©ºæ ¼å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">alpha</span>: <span class="string">'A'</span>, <span class="attr">beta</span>: <span class="string">'B'</span> &#125;, <span class="literal">null</span>, <span class="string">'\t'</span>));</span><br><span class="line"><span class="comment">// Result:</span></span><br><span class="line"><span class="comment">// '&#123;</span></span><br><span class="line"><span class="comment">//     "alpha": A,</span></span><br><span class="line"><span class="comment">//     "beta": B</span></span><br><span class="line"><span class="comment">// &#125;'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="11-ç§åœ¨å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰¾ä¸åˆ°çš„JavaScriptæŠ€å·§"><a href="#11-ç§åœ¨å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰¾ä¸åˆ°çš„JavaScriptæŠ€å·§" class="headerlink" title="11 ç§åœ¨å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰¾ä¸åˆ°çš„JavaScriptæŠ€å·§"></a><a href="https://juejin.im/post/5ce88a3951882533182d7e7d" target="_blank" rel="noopener">11 ç§åœ¨å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰¾ä¸åˆ°çš„JavaScriptæŠ€å·§</a></h2><h2 id="è·å–uuid"><a href="#è·å–uuid" class="headerlink" title="è·å–uuid"></a>è·å–uuid</h2><p>å‡ºäºå¯¹ç™»å½•æ—¶æ•ˆä»¥åŠå®‰å…¨æ€§çš„è€ƒè™‘ã€‚åœ¨ç™»å½•éªŒè¯æ—¶ï¼Œåå°æ ¹æ® uuid å’Œé€šè¿‡ uuid è·å–åˆ°çš„éªŒè¯ç è¿›è¡Œæ ¡éªŒã€‚<br>è¿™é‡Œåˆ—å‡ºä¸€äº›è·å– uuid çš„æ–¹æ³•ã€‚æ¥æºäºï¼šç½‘ç»œã€‚<br>æ–¹æ³•ä¸€:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getUUID () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span>.replace(<span class="regexp">/[xy]/g</span>, c =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> (c === <span class="string">'x'</span> ? (<span class="built_in">Math</span>.random() * <span class="number">16</span> | <span class="number">0</span>) : (<span class="string">'r&amp;0x3'</span> | <span class="string">'0x8'</span>)).toString(<span class="number">16</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•äºŒï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">generateUUID() &#123; </span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.performance &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">window</span>.performance.now === <span class="string">"function"</span>) &#123; </span><br><span class="line">        d += performance.now()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> uuid = <span class="string">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span>.replace(<span class="regexp">/[xy]/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123; </span><br><span class="line">        <span class="keyword">var</span> r = (d + <span class="built_in">Math</span>.random() * <span class="number">16</span>) % <span class="number">16</span> | <span class="number">0</span>; d = <span class="built_in">Math</span>.floor(d / <span class="number">16</span>) </span><br><span class="line">        <span class="keyword">return</span> (c == <span class="string">'x'</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>)).toString(<span class="number">16</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> uuid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•ä¸‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">guid() &#123; </span><br><span class="line">    function S4() &#123; </span><br><span class="line">        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);</span><br><span class="line">    &#125; </span><br><span class="line">    return (S4() + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + S4() + S4())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•å››ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æŒ‡å®šé•¿åº¦å’ŒåŸºæ•°</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uuid2</span>(<span class="params">len, radix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> chars = <span class="string">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span>.split(<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">var</span> uuid = [],</span><br><span class="line">        i;</span><br><span class="line">    radix = radix || chars.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (len) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) uuid[i] = chars[<span class="number">0</span> | <span class="built_in">Math</span>.random() * radix];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> r;</span><br><span class="line">        uuid[<span class="number">8</span>] = uuid[<span class="number">13</span>] = uuid[<span class="number">18</span>] = uuid[<span class="number">23</span>] = <span class="string">'-'</span>;</span><br><span class="line">        uuid[<span class="number">14</span>] = <span class="string">'4'</span>;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">36</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!uuid[i]) &#123;</span><br><span class="line">                r = <span class="number">0</span> | <span class="built_in">Math</span>.random() * <span class="number">16</span>;</span><br><span class="line">                uuid[i] = chars[(i == <span class="number">19</span>) ? (r &amp; <span class="number">0x3</span>) | <span class="number">0x8</span> : r];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> uuid.join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="ä½¿ç”¨setTimeoutä»£æ›¿setIntervalè¿›è¡Œé—´æ­‡è°ƒç”¨"><a href="#ä½¿ç”¨setTimeoutä»£æ›¿setIntervalè¿›è¡Œé—´æ­‡è°ƒç”¨" class="headerlink" title="ä½¿ç”¨setTimeoutä»£æ›¿setIntervalè¿›è¡Œé—´æ­‡è°ƒç”¨"></a>ä½¿ç”¨setTimeoutä»£æ›¿setIntervalè¿›è¡Œé—´æ­‡è°ƒç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> executeTimes = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> intervalTime = <span class="number">500</span>;</span><br><span class="line"><span class="keyword">var</span> intervalId = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¾å¼€ä¸‹é¢çš„æ³¨é‡Šè¿è¡ŒsetIntervalçš„Demo</span></span><br><span class="line">intervalId = setInterval(intervalFun,intervalTime);</span><br><span class="line"><span class="comment">// æ”¾å¼€ä¸‹é¢çš„æ³¨é‡Šè¿è¡ŒsetTimeoutçš„Demo// setTimeout(timeOutFun,intervalTime);functionintervalFun()&#123;</span></span><br><span class="line">    executeTimes++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"doIntervalFunâ€”â€”"</span>+executeTimes);</span><br><span class="line">    <span class="keyword">if</span>(executeTimes==<span class="number">5</span>)&#123;</span><br><span class="line">        clearInterval(intervalId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functiontimeOutFun()&#123;</span><br><span class="line">    executeTimes++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"doTimeOutFunâ€”â€”"</span>+executeTimes);</span><br><span class="line">    <span class="keyword">if</span>(executeTimes&lt;<span class="number">5</span>)&#123;</span><br><span class="line">        setTimeout(<span class="built_in">arguments</span>.callee,intervalTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨setTimeoutçš„æ–¹æ³•é‡Œé¢åˆè°ƒç”¨äº†ä¸€æ¬¡setTimeoutï¼Œå°±å¯ä»¥è¾¾åˆ°é—´æ­‡è°ƒç”¨çš„ç›®çš„ã€‚</p>
<p>é‡ç‚¹æ¥äº†ï¼Œä¸ºä»€ä¹ˆä½œè€…å»ºè®®æˆ‘ä»¬ä½¿ç”¨setTimeoutä»£æ›¿setIntervalå‘¢ï¼ŸsetTimeoutå¼çš„é—´æ­‡è°ƒç”¨å’Œä¼ ç»Ÿçš„setIntervalé—´æ­‡è°ƒç”¨æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>åŒºåˆ«åœ¨äºï¼ŒsetIntervalé—´æ­‡è°ƒç”¨ï¼Œæ˜¯åœ¨å‰ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå‰ï¼Œå°±å¼€å§‹è®¡æ—¶ï¼Œæ¯”å¦‚é—´æ­‡æ—¶é—´æ˜¯500msï¼Œé‚£ä¹ˆä¸ç®¡é‚£æ—¶å€™å‰ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œéƒ½ä¼šæŠŠåä¸€ä¸ªæ–¹æ³•æ”¾å…¥æ‰§è¡Œçš„åºåˆ—ä¸­ã€‚è¿™æ—¶å€™å°±ä¼šå‘ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚å‰ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ—¶é—´è¶…è¿‡500msï¼ŒåŠ å…¥æ˜¯1000msï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ï¼Œå‰ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œåä¸€ä¸ªæ–¹æ³•é©¬ä¸Šå°±ä¼šæ‰§è¡Œï¼Œå› ä¸ºæ­¤æ—¶é—´æ­‡æ—¶é—´å·²ç»è¶…è¿‡500msäº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> executeTimes = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> intervalTime = <span class="number">500</span>;</span><br><span class="line"><span class="keyword">var</span> intervalId = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> oriTime = newDate().getTime();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¾å¼€ä¸‹é¢çš„æ³¨é‡Šè¿è¡ŒsetIntervalçš„Demo// intervalId = setInterval(intervalFun,intervalTime);// æ”¾å¼€ä¸‹é¢çš„æ³¨é‡Šè¿è¡ŒsetTimeoutçš„Demo</span></span><br><span class="line">setTimeout(timeOutFun,intervalTime);</span><br><span class="line"></span><br><span class="line">functionintervalFun()&#123;</span><br><span class="line">    executeTimes++;</span><br><span class="line">    <span class="keyword">var</span> nowExecuteTimes = executeTimes;</span><br><span class="line">    <span class="keyword">var</span> timeDiff = newDate().getTime() - oriTime;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"doIntervalFunâ€”â€”"</span>+nowExecuteTimes+<span class="string">", after "</span> + timeDiff + <span class="string">"ms"</span>);</span><br><span class="line">    <span class="keyword">var</span> delayParam = <span class="number">0</span>;</span><br><span class="line">    sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"doIntervalFunâ€”â€”"</span>+nowExecuteTimes+<span class="string">" finish !"</span>);</span><br><span class="line">    <span class="keyword">if</span>(executeTimes==<span class="number">5</span>)&#123;</span><br><span class="line">        clearInterval(intervalId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functiontimeOutFun()&#123;</span><br><span class="line">    executeTimes++;</span><br><span class="line">    <span class="keyword">var</span> nowExecuteTimes = executeTimes;</span><br><span class="line">    <span class="keyword">var</span> timeDiff = newDate().getTime() - oriTime;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"doTimeOutFunâ€”â€”"</span>+nowExecuteTimes+<span class="string">", after "</span> + timeDiff + <span class="string">"ms"</span>);</span><br><span class="line">    <span class="keyword">var</span> delayParam = <span class="number">0</span>;</span><br><span class="line">    sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"doTimeOutFunâ€”â€”"</span>+nowExecuteTimes+<span class="string">" finish !"</span>);</span><br><span class="line">    <span class="keyword">if</span>(executeTimes&lt;<span class="number">5</span>)&#123;</span><br><span class="line">        setTimeout(<span class="built_in">arguments</span>.callee,intervalTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functionsleep(sleepTime)&#123;</span><br><span class="line">    <span class="keyword">var</span> start=newDate().getTime();</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(newDate().getTime()-start&gt;sleepTime)&#123;</span><br><span class="line">            <span class="keyword">break</span>;    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ï¼ˆè¿™é‡Œä½¿ç”¨å¤§ç‰›æä¾›çš„sleepå‡½æ•°æ¥æ¨¡æ‹Ÿå‡½æ•°è¿è¡Œçš„æ—¶é—´ï¼‰<br>æ‰§è¡ŒsetIntervalçš„Demoæ–¹æ³•ï¼Œçœ‹æ§åˆ¶å°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">doIntervalFunâ€”â€”<span class="number">1</span>, after <span class="number">500</span>ms</span><br><span class="line">VM2854:<span class="number">19</span> doIntervalFunâ€”â€”<span class="number">1</span> finish !</span><br><span class="line">VM2854:<span class="number">16</span> doIntervalFunâ€”â€”<span class="number">2</span>, after <span class="number">1503</span>ms</span><br><span class="line">VM2854:<span class="number">19</span> doIntervalFunâ€”â€”<span class="number">2</span> finish !</span><br><span class="line">VM2854:<span class="number">16</span> doIntervalFunâ€”â€”<span class="number">3</span>, after <span class="number">2507</span>ms</span><br><span class="line">VM2854:<span class="number">19</span> doIntervalFunâ€”â€”<span class="number">3</span> finish !</span><br><span class="line">VM2854:<span class="number">16</span> doIntervalFunâ€”â€”<span class="number">4</span>, after <span class="number">3510</span>ms</span><br><span class="line">VM2854:<span class="number">19</span> doIntervalFunâ€”â€”<span class="number">4</span> finish !</span><br><span class="line">VM2854:<span class="number">16</span> doIntervalFunâ€”â€”<span class="number">5</span>, after <span class="number">4512</span>ms</span><br><span class="line">VM2854:<span class="number">19</span> doIntervalFunâ€”â€”<span class="number">5</span> finish !</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥å‘ç°ï¼Œfun2å’Œfun1å¼€å§‹çš„é—´æ­‡æ¥è¿‘1000msï¼Œåˆšå¥½å°±æ˜¯fun1çš„æ‰§è¡Œæ—¶é—´ï¼Œä¹Ÿå°±æ„å‘³ç€fun1æ‰§è¡Œå®Œåfun2é©¬ä¸Šå°±æ‰§è¡Œäº†ï¼Œå’Œæˆ‘ä»¬é—´æ­‡è°ƒç”¨çš„åˆè¡·èƒŒé“è€Œé©°ã€‚</p>
<p>æˆ‘ä»¬æ³¨é‡Šæ‰setIntervalçš„Demoæ–¹æ³•ï¼Œæ”¾å¼€setTimeoutçš„Demoæ–¹æ³•ï¼Œè¿è¡Œï¼ŒæŸ¥çœ‹æ§åˆ¶å°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">doTimeOutFunâ€”â€”<span class="number">1</span>, after <span class="number">500</span>ms</span><br><span class="line">VM2621:<span class="number">32</span> doTimeOutFunâ€”â€”<span class="number">1</span> finish !</span><br><span class="line">VM2621:<span class="number">29</span> doTimeOutFunâ€”â€”<span class="number">2</span>, after <span class="number">2001</span>ms</span><br><span class="line">VM2621:<span class="number">32</span> doTimeOutFunâ€”â€”<span class="number">2</span> finish !</span><br><span class="line">VM2621:<span class="number">29</span> doTimeOutFunâ€”â€”<span class="number">3</span>, after <span class="number">3503</span>ms</span><br><span class="line">VM2621:<span class="number">32</span> doTimeOutFunâ€”â€”<span class="number">3</span> finish !</span><br><span class="line">VM2621:<span class="number">29</span> doTimeOutFunâ€”â€”<span class="number">4</span>, after <span class="number">5004</span>ms</span><br><span class="line">VM2621:<span class="number">32</span> doTimeOutFunâ€”â€”<span class="number">4</span> finish !</span><br><span class="line">VM2621:<span class="number">29</span> doTimeOutFunâ€”â€”<span class="number">5</span>, after <span class="number">6505</span>ms</span><br><span class="line">VM2621:<span class="number">32</span> doTimeOutFunâ€”â€”<span class="number">5</span> finish !</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸‹ç»ˆäºæ­£å¸¸äº†ï¼Œfun1å’Œfun2ç›¸å·®äº†1500ms = 1000 + 500ï¼Œfun2åœ¨fun1æ‰§è¡Œå®Œçš„500msåæ‰§è¡Œã€‚</p>
<h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><ol>
<li><p>å®ç°ç§æœ‰å˜é‡<br>å¦‚æœæˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªnameå€¼ï¼Œæˆ‘ä»¬å¯ä»¥å…è®¸ä»»ä½•äººè®¿é—®è¿™ä¸ªnameå±æ€§ï¼Œä½†æ˜¯åªæœ‰å°‘éƒ¨åˆ†äººï¼Œå¯ä»¥ä¿®æ”¹è¿™ä¸ªnameå±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é—­åŒ…ï¼Œå¯ä»¥åœ¨setNameå€¼ä¸­ï¼Œå†™å“ªäº›äººå…·æœ‰ä¿®æ”¹çš„æƒé™ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </span><br><span class="line">    <span class="comment">//å˜é‡ä½œç”¨åŸŸä¸ºå‡½æ•°å†…éƒ¨ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®ï¼Œä¸ä¼šä¸å¤–éƒ¨å˜é‡å‘ç”Ÿé‡åå†²çª   var name = "FE";      </span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//ç®¡ç†ç§æœ‰å˜é‡   </span></span><br><span class="line">       getName : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </span><br><span class="line">           <span class="keyword">return</span> name;   </span><br><span class="line">       &#125;,   </span><br><span class="line">       setName : <span class="function"><span class="keyword">function</span>(<span class="params">newName</span>)</span>&#123;   </span><br><span class="line">           name = newName;   </span><br><span class="line">       &#125;   </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ•°æ®ç¼“å­˜<br>å‡å¦‚è¯´æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªè®¡ç®—é‡å¾ˆå¤§å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œè¿™ä¸ªå€¼åœ¨å…¶ä»–å‡½æ•°ä¸­è¿˜æœ‰åº”ç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨é—­åŒ…ï¼Œå¯ä»¥å°†è¯¥æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¾›å…¶ä»–çš„å‡½æ•°ä½¿ç”¨ï¼ˆè¿™æ˜¯åœ¨å…¶ä»–åšå®¢ä¸­çœ‹åˆ°çš„ï¼Œå…·ä½“ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå¦‚æœæœ‰å…´è¶£ï¼Œå¯ä»¥è‡ªå·±æŸ¥é˜…ç›¸å…³æ–‡çŒ®ï¼‰ã€‚</p>
</li>
</ol>
<p>ç¼ºç‚¹ï¼š<br>é€ æˆå†…å­˜æ¶ˆè€—è¿‡å¤§ï¼Œå¦‚æœå¤„ç†ä¸å½“ï¼Œä¼šé€ æˆå†…å­˜æ³„æ¼</p>
<h2 id="æ•°ç»„ä¸­çš„forEachå’Œmapçš„åŒºåˆ«"><a href="#æ•°ç»„ä¸­çš„forEachå’Œmapçš„åŒºåˆ«" class="headerlink" title="æ•°ç»„ä¸­çš„forEachå’Œmapçš„åŒºåˆ«"></a>æ•°ç»„ä¸­çš„forEachå’Œmapçš„åŒºåˆ«</h2><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½è¦å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œç„¶åç»å¸¸ç”¨åˆ°çš„ä¸¤ä¸ªæ–¹æ³•å°±æ˜¯forEachå’Œmapæ–¹æ³•ã€‚ å…ˆæ¥è¯´è¯´å®ƒä»¬çš„å…±åŒç‚¹</p>
<ul>
<li>ç›¸åŒç‚¹<br>éƒ½æ˜¯å¾ªç¯éå†æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹<br>forEachå’Œmapæ–¹æ³•é‡Œæ¯æ¬¡æ‰§è¡ŒåŒ¿åå‡½æ•°éƒ½æ”¯æŒ3ä¸ªå‚æ•°ï¼Œå‚æ•°åˆ†åˆ«æ˜¯itemï¼ˆå½“å‰æ¯ä¸€é¡¹ï¼‰ï¼Œindexï¼ˆç´¢å¼•å€¼ï¼‰ï¼Œarrï¼ˆåŸæ•°ç»„ï¼‰<br>åŒ¿åå‡½æ•°ä¸­çš„thiséƒ½æ˜¯æŒ‡å‘window<br>åªèƒ½éå†æ•°ç»„<br>éƒ½ä¸ä¼šæ”¹å˜åŸæ•°ç»„</li>
<li>åŒºåˆ«<br>mapæ–¹æ³•</li>
</ul>
<p>1.mapæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ºåŸå§‹æ•°ç»„è°ƒç”¨å‡½æ•°å¤„ç†åçš„å€¼ã€‚ 2.mapæ–¹æ³•ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼Œmapæ–¹æ³•ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ã€‚ 3.æµè§ˆå™¨æ”¯æŒï¼šchromeã€Safari1.5+ã€operaéƒ½æ”¯æŒï¼ŒIE9+,<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array.map(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,arr</span>)</span>&#123;&#125;,thisValue)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>];</span><br><span class="line"><span class="keyword">var</span> str = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,arr</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//windowconsole.log("åŸæ•°ç»„arr:",arr); //æ³¨æ„è¿™é‡Œæ‰§è¡Œ5æ¬¡return item/2;</span></span><br><span class="line">&#125;,<span class="keyword">this</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//[0,1,2,3,4]</span></span><br></pre></td></tr></table></figure></p>
<p>è‹¥arrä¸ºç©ºæ•°ç»„ï¼Œåˆ™mapæ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>
<p>forEachæ–¹æ³•</p>
<ol>
<li>forEachæ–¹æ³•ç”¨æ¥è°ƒç”¨æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†å…ƒç´ ä¼ ç»™å›è°ƒå‡½æ•° 2.forEachå¯¹äºç©ºæ•°ç»„æ˜¯ä¸ä¼šè°ƒç”¨å›è°ƒå‡½æ•°çš„ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,arr</span>)</span>&#123;&#125;,<span class="keyword">this</span>)</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>];</span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> str = arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,arr</span>)</span>&#123;</span><br><span class="line">    sum += item;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"sumçš„å€¼ä¸ºï¼š"</span>,sum); <span class="comment">//0 2 6 12 20console.log(this); //window</span></span><br><span class="line">&#125;,<span class="keyword">this</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum);<span class="comment">//20console.log(str); //undefined</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>æ— è®ºarræ˜¯ä¸æ˜¯ç©ºæ•°ç»„ï¼ŒforEachè¿”å›çš„éƒ½æ˜¯undefinedã€‚è¿™ä¸ªæ–¹æ³•åªæ˜¯å°†æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä½œä¸ºcallbackçš„å‚æ•°æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<h2 id="for-inå’Œfor-ofçš„åŒºåˆ«"><a href="#for-inå’Œfor-ofçš„åŒºåˆ«" class="headerlink" title="for inå’Œfor ofçš„åŒºåˆ«"></a>for inå’Œfor ofçš„åŒºåˆ«</h2><p>éå†æ•°ç»„é€šå¸¸ä½¿ç”¨forå¾ªç¯ï¼ŒES5çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨forEachï¼ŒES5å…·æœ‰éå†æ•°ç»„åŠŸèƒ½çš„è¿˜æœ‰mapã€filterã€someã€everyã€reduceã€reduceRightç­‰ï¼Œåªä¸è¿‡ä»–ä»¬çš„è¿”å›ç»“æœä¸ä¸€æ ·ã€‚ä½†æ˜¯ä½¿ç”¨foreachéå†æ•°ç»„çš„è¯ï¼Œä½¿ç”¨breakä¸èƒ½ä¸­æ–­å¾ªç¯ï¼Œä½¿ç”¨returnä¹Ÿä¸èƒ½è¿”å›åˆ°å¤–å±‚å‡½æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myArray=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">myArray.name=<span class="string">"æ•°ç»„"</span><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> myArray) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨for in ä¹Ÿå¯ä»¥éå†æ•°ç»„ï¼Œä½†æ˜¯ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><p>indexç´¢å¼•ä¸ºå­—ç¬¦ä¸²å‹æ•°å­—ï¼Œä¸èƒ½ç›´æ¥è¿›è¡Œå‡ ä½•è¿ç®—</p>
</li>
<li><p>éå†é¡ºåºæœ‰å¯èƒ½ä¸æ˜¯æŒ‰ç…§å®é™…æ•°ç»„çš„å†…éƒ¨é¡ºåº</p>
</li>
<li><p>ä½¿ç”¨for inä¼šéå†æ•°ç»„æ‰€æœ‰çš„å¯æšä¸¾å±æ€§ï¼ŒåŒ…æ‹¬åŸå‹ã€‚ä¾‹å¦‚ä¸Šæ —çš„åŸå‹æ–¹æ³•methodå’Œnameå±æ€§</p>
</li>
</ol>
<p>æ‰€ä»¥for inæ›´é€‚åˆéå†å¯¹è±¡ï¼Œä¸è¦ä½¿ç”¨for inéå†æ•°ç»„ã€‚</p>
<p>é‚£ä¹ˆé™¤äº†ä½¿ç”¨forå¾ªç¯ï¼Œå¦‚ä½•æ›´ç®€å•çš„æ­£ç¡®çš„éå†æ•°ç»„è¾¾åˆ°æˆ‘ä»¬çš„æœŸæœ›å‘¢ï¼ˆå³ä¸éå†methodå’Œnameï¼‰ï¼ŒES6ä¸­çš„for ofæ›´èƒœä¸€ç­¹.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myArray=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">myArray.name=<span class="string">"æ•°ç»„"</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> myArray) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è®°ä½ï¼Œfor inéå†çš„æ˜¯æ•°ç»„çš„ç´¢å¼•ï¼ˆå³é”®åï¼‰ï¼Œè€Œfor oféå†çš„æ˜¯æ•°ç»„å…ƒç´ å€¼ã€‚</p>
<p>for oféå†çš„åªæ˜¯æ•°ç»„å†…çš„å…ƒç´ ï¼Œè€Œä¸åŒ…æ‹¬æ•°ç»„çš„åŸå‹å±æ€§methodå’Œç´¢å¼•name</p>
<p>éå†å¯¹è±¡ é€šå¸¸ç”¨for inæ¥éå†å¯¹è±¡çš„é”®å<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myObject=&#123;</span><br><span class="line">a:<span class="number">1</span>,</span><br><span class="line">b:<span class="number">2</span>,</span><br><span class="line">c:<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> myObject) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>for in å¯ä»¥éå†åˆ°myObjectçš„åŸå‹æ–¹æ³•method,å¦‚æœä¸æƒ³éå†åŸå‹æ–¹æ³•å’Œå±æ€§çš„è¯ï¼Œå¯ä»¥åœ¨å¾ªç¯å†…éƒ¨åˆ¤æ–­ä¸€ä¸‹,<code>hasOwnPropery</code>æ–¹æ³•å¯ä»¥åˆ¤æ–­æŸå±æ€§æ˜¯å¦æ˜¯è¯¥å¯¹è±¡çš„å®ä¾‹å±æ€§<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> myObject) &#123;</span><br><span class="line"> <span class="keyword">if</span>ï¼ˆmyObject.hasOwnProperty(key))&#123;</span><br><span class="line"><span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åŒæ ·å¯ä»¥é€šè¿‡ES5çš„<code>Object.keys(myObject)</code>è·å–å¯¹è±¡çš„å®ä¾‹å±æ€§ç»„æˆçš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬åŸå‹æ–¹æ³•å’Œå±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myObject=&#123;</span><br><span class="line">a:<span class="number">1</span>,</span><br><span class="line">b:<span class="number">2</span>,</span><br><span class="line">c:<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(myObject).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key,index</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key,myObject[key])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="å®ç°ä¸€ä¸ªEventEmitteræ–¹æ³•"><a href="#å®ç°ä¸€ä¸ªEventEmitteræ–¹æ³•" class="headerlink" title="å®ç°ä¸€ä¸ªEventEmitteræ–¹æ³•"></a>å®ç°ä¸€ä¸ªEventEmitteræ–¹æ³•</h2><p>EventEmitter çš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚<br>å½“ä½ å›ç­”å‡º vue ä¸­ç”¨ emit é€šä¿¡çš„æ—¶å€™ï¼Œå°±è¦å°å¿ƒäº†ã€‚EventEmitter æ–¹æ³•ä¸»è¦åŒ…å«äº† on,emit,once,offæ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">classEvent&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">          <span class="keyword">this</span>.events = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      on(name, fn) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.events[name]) &#123;</span><br><span class="line">            <span class="keyword">this</span>.events[name] = []</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">this</span>.events[name].push(fn);</span><br><span class="line">          returnthis;</span><br><span class="line">      &#125;</span><br><span class="line">      emit(name, ...args) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.events[name]) &#123;</span><br><span class="line">            returnthis;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> fns = <span class="keyword">this</span>.events[name]</span><br><span class="line">        fns.forEach(<span class="function"><span class="params">fn</span> =&gt;</span> fn.call(<span class="keyword">this</span>, ...args))</span><br><span class="line">        returnthis;</span><br><span class="line">      &#125;</span><br><span class="line">      off(name,fn) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.events[name]) &#123;</span><br><span class="line">            returnthis;</span><br><span class="line">        &#125;</span><br><span class="line">          <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">            <span class="keyword">this</span>.events[name] = nullreturnthis</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">const</span> index = <span class="keyword">this</span>.events[name].indexOf(fn);</span><br><span class="line">          <span class="keyword">this</span>.events[name].splice(index, <span class="number">1</span>);</span><br><span class="line">        returnthis;</span><br><span class="line">      &#125;</span><br><span class="line">      once(name,fn) &#123;</span><br><span class="line">        <span class="keyword">const</span> only = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">          <span class="keyword">this</span>.off(name, only);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">this</span>.on(name, only);</span><br><span class="line">        returnthis;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h2><p>ä»promiseã€process.nextTickã€setTimeoutå‡ºå‘ï¼Œè°ˆè°ˆEvent Loopä¸­çš„Job queue</p>
<p>ç®€è¦ä»‹ç»ï¼šè°ˆè°ˆpromise.resove,setTimeout,setImmediate,process.nextTickåœ¨EvenLoopé˜Ÿåˆ—ä¸­çš„æ‰§è¡Œé¡ºåº</p>
<p>1.é—®é¢˜çš„å¼•å‡º<br>event loopéƒ½ä¸é™Œç”Ÿï¼Œæ˜¯æŒ‡ä¸»çº¿ç¨‹ä»â€œä»»åŠ¡é˜Ÿåˆ—â€ä¸­å¾ªç¯è¯»å–ä»»åŠ¡ï¼Œæ¯”å¦‚</p>
<p>ä¾‹1ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">1</span>)&#125;,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡º2,1</span></span><br></pre></td></tr></table></figure></p>
<p>åœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜ç™½é¦–å…ˆæ‰§è¡Œä¸»çº¿ç¨‹ä¸­çš„åŒæ­¥ä»»åŠ¡ï¼Œå½“ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†ä»event loopä¸­è¯»å–ä»»åŠ¡ï¼Œå› æ­¤å…ˆè¾“å‡º2ï¼Œå†è¾“å‡º1ã€‚</p>
<p>event loopè¯»å–ä»»åŠ¡çš„å…ˆåé¡ºåºï¼Œå–å†³äºä»»åŠ¡é˜Ÿåˆ—ï¼ˆJob queueï¼‰ä¸­å¯¹äºä¸åŒä»»åŠ¡è¯»å–è§„åˆ™çš„é™å®šã€‚æ¯”å¦‚ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>ä¾‹2ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//è¾“å‡ºä¸º  1  2 3</span></span><br></pre></td></tr></table></figure></p>
<p>å…ˆè¾“å‡º1ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºæ˜¯åŒæ­¥ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹ä¸­ä¼˜å…ˆæ‰§è¡Œï¼Œè¿™é‡Œçš„é—®é¢˜æ˜¯setTimeoutå’ŒPromise.thenä»»åŠ¡çš„æ‰§è¡Œä¼˜å…ˆçº§æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚</p>
<p>2 . Job queueä¸­çš„æ‰§è¡Œé¡ºåº<br>åœ¨Job queueä¸­çš„é˜Ÿåˆ—åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šmacro-taskå’ŒmicroTaskã€‚æˆ‘ä»¬ä¸¾ä¾‹æ¥çœ‹æ‰§è¡Œé¡ºåºçš„è§„å®šï¼Œæˆ‘ä»¬è®¾</p>
<p>macro-taské˜Ÿåˆ—åŒ…å«ä»»åŠ¡: a1, a2 , a3 micro-taské˜Ÿåˆ—åŒ…å«ä»»åŠ¡: b1, b2 , b3</p>
<p>æ‰§è¡Œé¡ºåºä¸ºï¼Œé¦–å…ˆæ‰§è¡Œmarco-taské˜Ÿåˆ—å¼€å¤´çš„ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ a1 ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œåœ¨æ‰§è¡Œmicro-taské˜Ÿåˆ—é‡Œçš„æ‰€æœ‰ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ä¾æ¬¡æ‰§è¡Œb1, b2 , b3ï¼Œæ‰§è¡Œå®Œåæ¸…ç©ºmicro-taskä¸­çš„ä»»åŠ¡ï¼Œæ¥ç€æ‰§è¡Œmarco-taskä¸­çš„ç¬¬äºŒä¸ªä»»åŠ¡ï¼Œä¾æ¬¡å¾ªç¯ã€‚</p>
<p>äº†è§£å®Œäº†macro-taskå’Œmicro-taskä¸¤ç§é˜Ÿåˆ—çš„æ‰§è¡Œé¡ºåºä¹‹åï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹ï¼ŒçœŸå®åœºæ™¯ä¸‹è¿™ä¸¤ç§ç±»å‹çš„é˜Ÿåˆ—é‡ŒçœŸæ­£åŒ…å«çš„ä»»åŠ¡ï¼ˆæˆ‘ä»¬ä»¥node V8å¼•æ“ä¸ºä¾‹ï¼‰ï¼Œåœ¨node V8ä¸­ï¼Œè¿™ä¸¤ç§ç±»å‹çš„çœŸå®ä»»åŠ¡é¡ºåºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>macro-taskï¼ˆå®ä»»åŠ¡ï¼‰é˜Ÿåˆ—çœŸå®åŒ…å«ä»»åŠ¡ï¼š<br>script(ä¸»ç¨‹åºä»£ç ),setTimeout, setInterval, setImmediate, I/O, UI rendering</p>
<p>micro-taskï¼ˆå¾®ä»»åŠ¡ï¼‰é˜Ÿåˆ—çœŸå®åŒ…å«ä»»åŠ¡ï¼š<br>process.nextTick, Promises, Object.observe, MutationObserver</p>
<p>ç”±æ­¤æˆ‘ä»¬å¾—åˆ°çš„æ‰§è¡Œé¡ºåºåº”è¯¥ä¸ºï¼š</p>
<p>script(ä¸»ç¨‹åºä»£ç )â€”&gt;process.nextTickâ€”&gt;Promisesâ€¦â€”â€”&gt;setTimeoutâ€”â€”&gt;setIntervalâ€”â€”&gt;setImmediateâ€”â€”&gt; I/Oâ€”â€”&gt;UI rendering</p>
<p>åœ¨ES6ä¸­macro-taské˜Ÿåˆ—åˆç§°ä¸ºScriptJobsï¼Œè€Œmicro-taskåˆç§°PromiseJobs</p>
<p>3 . çœŸå®ç¯å¢ƒä¸­æ‰§è¡Œé¡ºåºçš„ä¸¾ä¾‹</p>
<p>ï¼ˆ1ï¼‰ setTimeoutå’Œpromise</p>
<p>ä¾‹3:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å…ˆä»¥ç¬¬1å°èŠ‚çš„ä¾‹å­ä¸ºä¾‹ï¼Œè¿™é‡Œéµå¾ªçš„é¡ºåºä¸ºï¼š</p>
<p>script(ä¸»ç¨‹åºä»£ç )â€”â€”&gt;promiseâ€”â€”&gt;setTimeout<br>å¯¹åº”çš„è¾“å‡ºä¾æ¬¡ä¸ºï¼š1 â€”â€”&gt;2â€”â€”â€”â€”&gt;3<br>ï¼ˆ2ï¼‰ process.nextTickå’Œpromiseã€setTimeout</p>
<p>ä¾‹å­4ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">1</span>)&#125;,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">newPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">   resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">4</span>)&#125;);</span><br><span class="line"></span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">5</span>)&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line"><span class="comment">//è¾“å‡º2,6,5,3,4,1</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªä¾‹å­å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œè¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹åœ¨å®šä¹‰promiseçš„æ—¶å€™ï¼Œpromiseæ„é€ éƒ¨åˆ†æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè¿™æ ·é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p>
<p>é¦–å…ˆåˆ†æJob queueçš„æ‰§è¡Œé¡ºåºï¼š</p>
<p>script(ä¸»ç¨‹åºä»£ç )â€”â€”&gt;process.nextTickâ€”â€”&gt;promiseâ€”â€”&gt;setTimeout</p>
<p>I) ä¸»ä½“éƒ¨åˆ†ï¼š å®šä¹‰promiseçš„æ„é€ éƒ¨åˆ†æ˜¯åŒæ­¥çš„ï¼Œ å› æ­¤å…ˆè¾“å‡º2 ï¼Œä¸»ä½“éƒ¨åˆ†å†è¾“å‡º6ï¼ˆåŒæ­¥æƒ…å†µä¸‹ï¼Œå°±æ˜¯ä¸¥æ ¼æŒ‰ç…§å®šä¹‰çš„å…ˆåé¡ºåºï¼‰</p>
<p>II)process.nextTick: è¾“å‡º5</p>
<p>IIIï¼‰promiseï¼š è¿™é‡Œçš„promiseéƒ¨åˆ†ï¼Œä¸¥æ ¼çš„è¯´å…¶å®æ˜¯promise.thenéƒ¨åˆ†ï¼Œè¾“å‡ºçš„æ˜¯3,4</p>
<p>IV) setTimeout ï¼š æœ€åè¾“å‡º1</p>
<p>ç»¼åˆçš„æ‰§è¡Œé¡ºåºå°±æ˜¯ï¼š 2â€”â€”&gt;6â€”â€”&gt;5â€”â€”&gt;3â€”â€”&gt;4â€”â€”&gt;1</p>
<p>ï¼ˆ3ï¼‰æ›´å¤æ‚çš„ä¾‹å­<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">1</span>)&#125;,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">newPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">   setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;resolve()&#125;,<span class="number">0</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">4</span>)&#125;);</span><br><span class="line"></span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">5</span>)&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºçš„æ˜¯  2 6 5 1 3 4</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§æƒ…å†µè·Ÿæˆ‘ä»¬ï¼ˆ2ï¼‰ä¸­çš„ä¾‹å­ï¼ŒåŒºåˆ«åœ¨äºpromiseçš„æ„é€ ä¸­ï¼Œæ²¡æœ‰åŒæ­¥çš„resolveï¼Œå› æ­¤promise.thenåœ¨å½“å‰çš„æ‰§è¡Œé˜Ÿåˆ—ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œåªæœ‰promiseä»pendingè½¬ç§»åˆ°resolveï¼Œæ‰ä¼šæœ‰thenæ–¹æ³•ï¼Œè€Œè¿™ä¸ªresolveæ˜¯åœ¨ä¸€ä¸ªsetTimoutæ—¶é—´ä¸­å®Œæˆçš„ï¼Œå› æ­¤3,4æœ€åè¾“å‡ºã€‚</p>
<h2 id="typeofå’Œinstanceof"><a href="#typeofå’Œinstanceof" class="headerlink" title="typeofå’Œinstanceof"></a>typeofå’Œinstanceof</h2><p>ECMAScriptæ˜¯æ¾æ•£ç±»å‹çš„ï¼Œä¸€æ¬¡éœ€è¦ä¸€ç§æ‰‹æ®µæ¥æ£€æµ‹ç»™å®šå˜é‡çš„æ•°æ®ç±»å‹ï¼Œtypeofæ“ä½œç¬¦ï¼ˆæ³¨æ„ä¸æ˜¯å‡½æ•°å“ˆï¼ï¼‰å°±æ˜¯è´Ÿè´£æä¾›è¿™æ–¹é¢ä¿¡æ¯çš„</p>
<p><strong>typeof å¯ä»¥ç”¨äºæ£€æµ‹åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ã€‚</strong></p>
<p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> variable</span><br></pre></td></tr></table></figure></p>
<p>è¿”å›6ç§Stringç±»å‹çš„ç»“æœï¼š</p>
<ul>
<li>â€œundefinedâ€ - å¦‚æœè¿™ä¸ªå€¼æœªå®šä¹‰</li>
<li>â€œbooleanâ€ - å¦‚æœè¿™ä¸ªå€¼æ˜¯å¸ƒå°”å€¼</li>
<li>â€œstringâ€ - å¦‚æœè¿™ä¸ªå€¼æ˜¯å­—ç¬¦ä¸²</li>
<li>â€œnumberâ€ - å¦‚æœè¿™ä¸ªå€¼æ˜¯æ•°å€¼</li>
<li>â€œobjectâ€ - å¦‚æœè¿™ä¸ªå€¼æ˜¯å¯¹è±¡æˆ–null</li>
<li>â€œfunctionâ€ - å¦‚æœè¿™ä¸ªå€¼æ˜¯å‡½æ•°<br>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span><span class="string">'hello'</span>); <span class="comment">// "string"console.log(typeofnull); // "object"console.log(typeof (newObject())); // "object"console.log(typeof(function()&#123;&#125;)); // "function"</span></span><br></pre></td></tr></table></figure>
<p>typeofä¸»è¦ç”¨äºæ£€æµ‹åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€undefinedï¼Œ å› ä¸ºtypeofç”¨äºæ£€æµ‹å¼•ç”¨ç±»å‹å€¼æ—¶ï¼Œå¯¹äºä»»ä½•Objectå¯¹è±¡å®ä¾‹ï¼ˆåŒ…æ‹¬nullï¼‰ï¼Œtypeoféƒ½è¿”å›â€objectâ€å€¼ï¼Œæ²¡åŠæ³•åŒºåˆ†æ˜¯é‚£ç§å¯¹è±¡ï¼Œå¯¹å®é™…ç¼–ç ç”¨å¤„ä¸å¤§ã€‚</p>
<p><strong>instanceof ç”¨äºåˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æŸä¸ªå¯¹è±¡çš„å®ä¾‹</strong></p>
<p>åœ¨æ£€æµ‹åŸºæœ¬æ•°æ®ç±»å‹æ—¶typeofæ˜¯éå¸¸å¾—åŠ›çš„åŠ©æ‰‹ï¼Œä½†åœ¨æ£€æµ‹å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œè¿™ä¸ªæ“ä½œç¬¦çš„ç”¨å¤„ä¸å¤§ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯æƒ³çŸ¥é“æŸä¸ªå€¼æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯æƒ³çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ECMAScriptæä¾›çš„instanceofæ“ä½œç¬¦ã€‚</p>
<p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = variable instanceofconstructor</span><br></pre></td></tr></table></figure></p>
<p>è¿”å›å¸ƒå°”ç±»å‹å€¼ï¼š</p>
<ul>
<li>true - å¦‚æœå˜é‡ï¼ˆvariableï¼‰æ˜¯ç»™å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œé‚£ä¹ˆinstanceofæ“ä½œç¬¦ä¼šè¿”å›true</li>
<li>false - å¦‚æœå˜é‡ï¼ˆvariableï¼‰ä¸æ˜¯ç»™å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œé‚£ä¹ˆinstanceofæ“ä½œç¬¦ä¼šè¿”å›false<br>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">functionPerson()&#123;&#125;</span><br><span class="line">functionAnimal()&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> animal1 = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(person1 <span class="keyword">instanceof</span> Person); <span class="comment">// trueconsole.log(animal1 instanceof Person); // falseconsole.log(animal1 instanceofObject); // trueconsole.log(1instanceof Person);   //falsevar oStr =  newString("hello world");</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(oStr));  	<span class="comment">// objectconsole.log(oStr instanceofString);</span></span><br><span class="line"><span class="built_in">console</span>.log(oStr instanceofObject);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­ foo æ˜¯å¦æ˜¯ Foo ç±»çš„å®ä¾‹functionFoo()&#123;&#125;</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="built_in">console</span>.log(foo <span class="keyword">instanceof</span> Foo);</span><br><span class="line"></span><br><span class="line"><span class="comment">// instanceof åœ¨ç»§æ‰¿ä¸­å…³ç³»ä¸­çš„ç”¨æ³•console.log('instanceof åœ¨ç»§æ‰¿ä¸­å…³ç³»ä¸­çš„ç”¨æ³•');</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">functionAoo()&#123;&#125;</span><br><span class="line">functionFoo()&#123;&#125;</span><br><span class="line"></span><br><span class="line">Foo.prototype = <span class="keyword">new</span> Aoo();</span><br><span class="line"><span class="keyword">var</span> fo = <span class="keyword">new</span> Foo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fo <span class="keyword">instanceof</span> Foo);</span><br><span class="line"><span class="built_in">console</span>.log(fo <span class="keyword">instanceof</span> Aoo)</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®è§„å®šï¼Œæ‰€æœ‰å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯Objectçš„å®ä¾‹ã€‚å› æ­¤ï¼Œåœ¨æ£€æµ‹ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼å’ŒObjectæ„é€ å‡½æ•°æ—¶ï¼Œinstanceofæ“ä½œç¬¦ä¼šå§‹ç»ˆè¿”å›trueã€‚å¦‚æœä½¿ç”¨instanceof æ“ä½œç¬¦æ£€æµ‹åŸºæœ¬ç±»å‹å€¼æ—¶ï¼Œè¯¥æ“ä½œç¬¦ä¼šå§‹ç»ˆè¿”å›falseï¼Œå› ä¸ºåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>));</span><br><span class="line"><span class="comment">// [object Null]undefinedconsole.log(Object.prototype.toString.call([1,2,3]));</span></span><br><span class="line"><span class="comment">//[object Array]undefinedconsole.log(Object.prototype.toString.call(&#123;&#125;));</span></span><br><span class="line"><span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="å¸¸è§çš„ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"><a href="#å¸¸è§çš„ç»§æ‰¿çš„å‡ ç§æ–¹æ³•" class="headerlink" title="å¸¸è§çš„ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"></a>å¸¸è§çš„ç»§æ‰¿çš„å‡ ç§æ–¹æ³•</h2><p><strong>åŸå‹é“¾ç»§æ‰¿</strong></p>
<p>å®šä¹‰ åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦å¤–ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•<br>ä»£ç <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">functionSuperType()&#123;</span><br><span class="line">    <span class="keyword">this</span>.property = <span class="string">'true'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    returnthis.property;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functionSubType()&#123;</span><br><span class="line">    <span class="keyword">this</span>.subProperty = <span class="string">'false'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    returnthis.subProperty;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType();</span><br><span class="line">alert(instance.getSuperValue());<span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>ä¼˜ç‚¹ ç®€å•æ˜äº†ï¼Œå®¹æ˜“å®ç°ï¼Œåœ¨çˆ¶ç±»æ–°å¢åŸå‹å±æ€§å’Œæ–¹æ³•ï¼Œå­ç±»éƒ½èƒ½è®¿é—®åˆ°ã€‚</li>
<li>ç¼ºç‚¹ åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å‡½æ•°ï¼Œæ‰€æœ‰çš„å®ä¾‹éƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨åœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªï¼Œå…¶ä»–éƒ½ä¼šæ”¹å˜ã€‚ä¸èƒ½åƒè¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•°</li>
</ul>
<p><strong>æ„é€ å‡½æ•°ç»§æ‰¿</strong><br>å®šä¹‰ åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹çš„æ„é€ å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">functionSuperType()&#123;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">'red'</span>,<span class="string">'yellow'</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">functionSubType()&#123;</span><br><span class="line">    SuperType.call(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType();</span><br><span class="line">instance1.colors.push(<span class="string">'black'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType();</span><br><span class="line">instance2.colors.push(<span class="string">'white'</span>);</span><br><span class="line"></span><br><span class="line">alert(instance1.colors);<span class="comment">//'red','yellow','black'</span></span><br><span class="line"></span><br><span class="line">alert(instance2.colors);<span class="comment">//'red','yellow','white'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜ç‚¹ ç®€å•æ˜äº†ï¼Œç›´æ¥ç»§æ‰¿äº†è¶…ç±»å‹æ„é€ å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•</li>
<li>ç¼ºç‚¹ æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œå› æ­¤å‡½æ•°å¤ç”¨å°±æ— ä»è°ˆèµ·äº†ï¼Œè€Œä¸”è¶…ç±»å‹ä¸­çš„åŸå‹çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯¹å­ç±»å‹ä¹Ÿæ˜¯ä¸å¯è§çš„ï¼Œç»“æœæ‰€æœ‰çš„ç±»å‹åªèƒ½ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ã€‚</li>
</ul>
<p><strong>ç»„åˆç»§æ‰¿</strong></p>
<p>å®šä¹‰ ä½¿ç”¨åŸå‹é“¾å®ç°å¤šåŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œä½¿ç”¨æ„é€ å‡½æ•°å®ç°å®ä¾‹çš„ç»§æ‰¿</p>
<p>ä»£ç <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">functionSuperType(name)&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">'red'</span>,<span class="string">'black'</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   alert(<span class="keyword">this</span>.name); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">functionSubType(name,age)&#123;</span><br><span class="line">    SuperType.call(<span class="keyword">this</span>,name);</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SubType.protptype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.protptype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.age);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>ä¼˜ç‚¹ è§£å†³äº†æ„é€ å‡½æ•°å’ŒåŸå‹ç»§æ‰¿ä¸­çš„ä¸¤ä¸ªé—®é¢˜</li>
<li>ç¼ºç‚¹ æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡è¶…ç±»å‹çš„æ„é€ å‡½æ•°</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/js/" rel="tag"># js</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/13/ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ4/" rel="next" title="ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ4">
                <i class="fa fa-chevron-left"></i> ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ4
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/31/HTTPç¼“å­˜æœºåˆ¶åŠåŸç†/" rel="prev" title="HTTPç¼“å­˜æœºåˆ¶åŠåŸç†">
                HTTPç¼“å­˜æœºåˆ¶åŠåŸç† <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="ææ–Œ">
            
              <p class="site-author-name" itemprop="name">ææ–Œ</p>
              <p class="site-description motion-element" itemprop="description">äººç”Ÿå¦‚é€†æ—…     æˆ‘äº¦æ˜¯è¡Œäºº</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">182</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„-28-ä¸ª-JavaScript-æŠ€å·§"><span class="nav-number">1.</span> <span class="nav-text">ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨-vnode-diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹"><span class="nav-number">2.</span> <span class="nav-text">Vueåº•å±‚æ¶æ„åŠå…¶åº”ç”¨,vnode diffç®—æ³•â€”â€”â€”åˆ’é‡ç‚¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰"><span class="nav-number">3.</span> <span class="nav-text">ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é˜²å¾¡-XSS-æ”»å‡»"><span class="nav-number">4.</span> <span class="nav-text">é˜²å¾¡ XSS æ”»å‡»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é˜²å¾¡-CSRF-æ”»å‡»"><span class="nav-number">5.</span> <span class="nav-text">é˜²å¾¡ CSRF æ”»å‡»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-å’Œ-vue-çš„-diff-è¿‡ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«"><span class="nav-number">6.</span> <span class="nav-text">react å’Œ vue çš„ diff è¿‡ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ã€å‰ç«¯é¢è¯•åˆ†äº«ã€‘-å¯’å†¬æ±‚èŒä¸Šç¯‡"><span class="nav-number">7.</span> <span class="nav-text">ã€å‰ç«¯é¢è¯•åˆ†äº«ã€‘- å¯’å†¬æ±‚èŒä¸Šç¯‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reduxå’Œvuexçš„åŒºåˆ«"><span class="nav-number">8.</span> <span class="nav-text">reduxå’Œvuexçš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦"><span class="nav-number">9.</span> <span class="nav-text">å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªJSON-stringify"><span class="nav-number">10.</span> <span class="nav-text">å®ç°ä¸€ä¸ªJSON.stringify</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªJSON-parse"><span class="nav-number">11.</span> <span class="nav-text">å®ç°ä¸€ä¸ªJSON.parse</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¬¬ä¸€ç§ï¼šç›´æ¥è°ƒç”¨-eval"><span class="nav-number">11.1.</span> <span class="nav-text">ç¬¬ä¸€ç§ï¼šç›´æ¥è°ƒç”¨ eval</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¬¬äºŒç§ï¼šFunction"><span class="nav-number">11.2.</span> <span class="nav-text">ç¬¬äºŒç§ï¼šFunction</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªcallæˆ–-apply"><span class="nav-number">12.</span> <span class="nav-text">å®ç°ä¸€ä¸ªcallæˆ– apply</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-callæŒ‰å¥—è·¯å®ç°"><span class="nav-number">12.1.</span> <span class="nav-text">Function.callæŒ‰å¥—è·¯å®ç°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç®€å•ç‰ˆ"><span class="nav-number">12.2.</span> <span class="nav-text">ç®€å•ç‰ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®Œå–„ç‰ˆ"><span class="nav-number">12.3.</span> <span class="nav-text">å®Œå–„ç‰ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-applyçš„æ¨¡æ‹Ÿå®ç°"><span class="nav-number">12.4.</span> <span class="nav-text">Function.applyçš„æ¨¡æ‹Ÿå®ç°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªFunction-bind"><span class="nav-number">13.</span> <span class="nav-text">å®ç°ä¸€ä¸ªFunction.bind()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªç»§æ‰¿"><span class="nav-number">14.</span> <span class="nav-text">å®ç°ä¸€ä¸ªç»§æ‰¿</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–"><span class="nav-number">15.</span> <span class="nav-text">å®ç°ä¸€ä¸ªJSå‡½æ•°æŸ¯é‡ŒåŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#é€šç”¨ç‰ˆ"><span class="nav-number">15.1.</span> <span class="nav-text">é€šç”¨ç‰ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6éªšå†™æ³•"><span class="nav-number">15.2.</span> <span class="nav-text">ES6éªšå†™æ³•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ‰‹å†™ä¸€ä¸ªPromise-ä¸­é«˜çº§å¿…è€ƒ"><span class="nav-number">16.</span> <span class="nav-text">æ‰‹å†™ä¸€ä¸ªPromise(ä¸­é«˜çº§å¿…è€ƒ)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Promiseçš„æµç¨‹å›¾åˆ†æ"><span class="nav-number">16.1.</span> <span class="nav-text">Promiseçš„æµç¨‹å›¾åˆ†æ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é¢è¯•å¤Ÿç”¨ç‰ˆ"><span class="nav-number">16.2.</span> <span class="nav-text">é¢è¯•å¤Ÿç”¨ç‰ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤§å‚ä¸“ä¾›ç‰ˆ"><span class="nav-number">16.3.</span> <span class="nav-text">å¤§å‚ä¸“ä¾›ç‰ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ‰‹å†™é˜²æŠ–-Debouncing-å’ŒèŠ‚æµ-Throttling"><span class="nav-number">17.</span> <span class="nav-text">æ‰‹å†™é˜²æŠ–(Debouncing)å’ŒèŠ‚æµ(Throttling)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-é˜²æŠ–-Debouncing-å®ç°"><span class="nav-number">17.1.</span> <span class="nav-text">9.1 é˜²æŠ–(Debouncing)å®ç°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#èŠ‚æµ-Throttling-å®ç°"><span class="nav-number">17.2.</span> <span class="nav-text">èŠ‚æµ(Throttling)å®ç°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»“åˆå®è·µ"><span class="nav-number">17.3.</span> <span class="nav-text">ç»“åˆå®è·µ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´"><span class="nav-number">18.</span> <span class="nav-text">æ‰‹å†™ä¸€ä¸ªJSæ·±æ‹·è´</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-ä¹ä¸ç‰ˆ"><span class="nav-number">18.1.</span> <span class="nav-text">10.1 ä¹ä¸ç‰ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-é¢è¯•å¤Ÿç”¨ç‰ˆ"><span class="nav-number">18.2.</span> <span class="nav-text">10.2 é¢è¯•å¤Ÿç”¨ç‰ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªinstanceOf"><span class="nav-number">19.</span> <span class="nav-text">å®ç°ä¸€ä¸ªinstanceOf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°ç»„æ‰å¹³åŒ–æ•°ç»„çš„å‡ ç§æ–¹æ³•"><span class="nav-number">20.</span> <span class="nav-text">æ•°ç»„æ‰å¹³åŒ–æ•°ç»„çš„å‡ ç§æ–¹æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Arrayâ€‹-prototypeâ€‹-flat"><span class="nav-number">20.1.</span> <span class="nav-text">Arrayâ€‹.prototypeâ€‹.flat()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å½’å¹¶æ–¹æ³•-reduce"><span class="nav-number">20.2.</span> <span class="nav-text">å½’å¹¶æ–¹æ³• reduce()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toString-NaN"><span class="nav-number">20.3.</span> <span class="nav-text">toString()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¾ªç¯-é€’å½’"><span class="nav-number">20.4.</span> <span class="nav-text">å¾ªç¯+é€’å½’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ‰©å±•è¿ç®—ç¬¦â€¦"><span class="nav-number">20.5.</span> <span class="nav-text">æ‰©å±•è¿ç®—ç¬¦â€¦</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°å­—åƒä½åˆ†éš”ç¬¦"><span class="nav-number">21.</span> <span class="nav-text">æ•°å­—åƒä½åˆ†éš”ç¬¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ ¼å¼åŒ–-URL-æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºå¯¹è±¡"><span class="nav-number">22.</span> <span class="nav-text">æ ¼å¼åŒ– URL æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºå¯¹è±¡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¿«é€Ÿæµ®ç‚¹æ•°è½¬æ•´æ•°"><span class="nav-number">23.</span> <span class="nav-text">å¿«é€Ÿæµ®ç‚¹æ•°è½¬æ•´æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—"><span class="nav-number">24.</span> <span class="nav-text">åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è·å–æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹"><span class="nav-number">25.</span> <span class="nav-text">è·å–æ•°ç»„ä¸­çš„æœ€åä¸€é¡¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ ¼å¼åŒ–JSONä»£ç "><span class="nav-number">26.</span> <span class="nav-text">æ ¼å¼åŒ–JSONä»£ç </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-ç§åœ¨å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰¾ä¸åˆ°çš„JavaScriptæŠ€å·§"><span class="nav-number">27.</span> <span class="nav-text">11 ç§åœ¨å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰¾ä¸åˆ°çš„JavaScriptæŠ€å·§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è·å–uuid"><span class="nav-number">28.</span> <span class="nav-text">è·å–uuid</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨setTimeoutä»£æ›¿setIntervalè¿›è¡Œé—´æ­‡è°ƒç”¨"><span class="nav-number">29.</span> <span class="nav-text">ä½¿ç”¨setTimeoutä»£æ›¿setIntervalè¿›è¡Œé—´æ­‡è°ƒç”¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é—­åŒ…"><span class="nav-number">30.</span> <span class="nav-text">é—­åŒ…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°ç»„ä¸­çš„forEachå’Œmapçš„åŒºåˆ«"><span class="nav-number">31.</span> <span class="nav-text">æ•°ç»„ä¸­çš„forEachå’Œmapçš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for-inå’Œfor-ofçš„åŒºåˆ«"><span class="nav-number">32.</span> <span class="nav-text">for inå’Œfor ofçš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªEventEmitteræ–¹æ³•"><span class="nav-number">33.</span> <span class="nav-text">å®ç°ä¸€ä¸ªEventEmitteræ–¹æ³•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#äº‹ä»¶å¾ªç¯"><span class="nav-number">34.</span> <span class="nav-text">äº‹ä»¶å¾ªç¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#typeofå’Œinstanceof"><span class="nav-number">35.</span> <span class="nav-text">typeofå’Œinstanceof</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¸¸è§çš„ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"><span class="nav-number">36.</span> <span class="nav-text">å¸¸è§çš„ç»§æ‰¿çš„å‡ ç§æ–¹æ³•</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ–Œ</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	æè¿°ï¼šç‚¹å‡»çº¢å¿ƒ
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	æè¿°ï¼šå¤åˆ¶ä»£ç 
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


