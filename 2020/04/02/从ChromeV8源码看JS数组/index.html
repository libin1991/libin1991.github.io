<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="ç®€ä»‹æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—éƒ½æ˜¯çº¿æ€§è¡¨ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½æ˜¯ä¸€æ®µçº¿æ€§çš„ç»“æ„ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯éçº¿æ€§è¡¨ï¼Œä¾‹å¦‚æ ‘ã€å›¾ã€å †ç­‰ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½éçº¿æ€§ã€‚ æœ¬èŠ‚ä¸»è¦ä»‹ç» JavaScript æ•°ç»„ï¼Œåœ¨å¼€å§‹æœ¬ç« èŠ‚å‰ï¼Œæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š æˆ‘ä»¬çŸ¥é“åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ•°ç»„ä¸­ä¿å­˜ä¸åŒç±»å‹å€¼ï¼Œå¹¶ä¸”æ•°ç»„å¯ä»¥åŠ¨æ€å¢é•¿ï¼Œä¸åƒå…¶å®ƒè¯­è¨€ï¼Œä¾‹å¦‚ Cï¼Œåˆ›å»ºçš„æ—¶å€™è¦å†³å®šæ•°ç»„çš„å¤§å°ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå°±è¦é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå–ƒï¼Ÿ">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»ChromeV8æºç çœ‹JSæ•°ç»„">
<meta property="og:url" content="http://yoursite.com/2020/04/02/ä»ChromeV8æºç çœ‹JSæ•°ç»„/index.html">
<meta property="og:site_name" content="å¥”å‘æœªæ¥çš„æ—¥å­">
<meta property="og:description" content="ç®€ä»‹æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—éƒ½æ˜¯çº¿æ€§è¡¨ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½æ˜¯ä¸€æ®µçº¿æ€§çš„ç»“æ„ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯éçº¿æ€§è¡¨ï¼Œä¾‹å¦‚æ ‘ã€å›¾ã€å †ç­‰ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½éçº¿æ€§ã€‚ æœ¬èŠ‚ä¸»è¦ä»‹ç» JavaScript æ•°ç»„ï¼Œåœ¨å¼€å§‹æœ¬ç« èŠ‚å‰ï¼Œæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š æˆ‘ä»¬çŸ¥é“åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ•°ç»„ä¸­ä¿å­˜ä¸åŒç±»å‹å€¼ï¼Œå¹¶ä¸”æ•°ç»„å¯ä»¥åŠ¨æ€å¢é•¿ï¼Œä¸åƒå…¶å®ƒè¯­è¨€ï¼Œä¾‹å¦‚ Cï¼Œåˆ›å»ºçš„æ—¶å€™è¦å†³å®šæ•°ç»„çš„å¤§å°ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå°±è¦é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå–ƒï¼Ÿ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-04-02T14:40:56.474Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä»ChromeV8æºç çœ‹JSæ•°ç»„">
<meta name="twitter:description" content="ç®€ä»‹æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—éƒ½æ˜¯çº¿æ€§è¡¨ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½æ˜¯ä¸€æ®µçº¿æ€§çš„ç»“æ„ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯éçº¿æ€§è¡¨ï¼Œä¾‹å¦‚æ ‘ã€å›¾ã€å †ç­‰ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½éçº¿æ€§ã€‚ æœ¬èŠ‚ä¸»è¦ä»‹ç» JavaScript æ•°ç»„ï¼Œåœ¨å¼€å§‹æœ¬ç« èŠ‚å‰ï¼Œæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š æˆ‘ä»¬çŸ¥é“åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ•°ç»„ä¸­ä¿å­˜ä¸åŒç±»å‹å€¼ï¼Œå¹¶ä¸”æ•°ç»„å¯ä»¥åŠ¨æ€å¢é•¿ï¼Œä¸åƒå…¶å®ƒè¯­è¨€ï¼Œä¾‹å¦‚ Cï¼Œåˆ›å»ºçš„æ—¶å€™è¦å†³å®šæ•°ç»„çš„å¤§å°ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå°±è¦é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå–ƒï¼Ÿ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/04/02/ä»ChromeV8æºç çœ‹JSæ•°ç»„/">





  <title>ä»ChromeV8æºç çœ‹JSæ•°ç»„ | å¥”å‘æœªæ¥çš„æ—¥å­</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div id="sky">
				<div id="background" class="container">
			<!-- svg file -->
			<svg id="svgout" height="100%" width="100%" viewbox="0 0 550 400">
				<defs>
					<g id="bottomShadow">
						<path fill="#000000" stroke="none" d="
		M 270.5 225.95
		L 127.35 316.65 266.8 400 409.6 309.25 270.5 225.95 Z"/>
					</g>
					<g id="Layer52_0_FILL">
						<path class="topGrass" fill="#B9D668" stroke="none" d="
	M 397.85 229.3
	L 397.85 225.6 269.85 152 135.75 228.6 135.75 233.65 262.1 306.55 397.85 229.3 Z"/>
					</g>
					<g id="Layer51_0_FILL">
						<path class="leftSideGrass" fill="#6E9E4F" stroke="none" d="
	M 135.1 229.95
	L 135.1 256.85 262.1 328.4 262.1 301.85 135.1 229.95 Z"/>
					</g>
					<g id="Layer50_0_FILL">
						<path class="rightGrassTop" fill="#8CB154" stroke="none" d="
	M 397.85 225.95
	L 395.8 225.95 261.75 301.55 261.75 328.4 397.85 251.15 397.85 225.95 Z"/>
					</g>
					<g id="Layer48_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.45 282.4
	L 135.75 298.15 262.1 372.1 261.75 355.65 135.45 282.4 Z"/>
					</g>
					<g id="Layer47_0_FILL">
						<path class="middleLeftCrust" fill="#C77E61" stroke="none" d="
	M 135.1 270.3
	L 135.1 283.05 275.9 364.35 271.85 348.9 135.1 270.3 Z"/>
					</g>
					<g id="Layer46_0_FILL">
						<path class="crustLeftTop" fill="#955541" stroke="none" d="
	M 135.1 255.15
	L 135.1 270.3 262.1 343.55 262.1 328.05 135.1 255.15 Z"/>
					</g>
					<g id="Layer45_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 294.5
	L 397.5 277 261.75 355.3 261.75 372.75 397.5 294.5 Z"/>
					</g>
					<g id="Layer44_0_FILL">
						<path class="middleRightCrust" fill="#C89451" stroke="none" d="
	M 397.5 269.95
	L 397.15 266.6 262.1 343.2 262.1 355.95 397.5 279.7 397.5 269.95 Z"/>
					</g>
					<g id="Layer43_0_FILL">
						<path class="topRightCrust" fill="#A47237" stroke="none" d="
	M 397.5 266.6
	L 397.5 250.45 261.75 328.4 261.75 343.85 397.5 266.6 Z"/>
					</g>
					<g id="Layer41_0_FILL">
						<path class="greyRoad" fill="#B2B2B1" stroke="none" d="
	M 295.05 283.05
	Q 299.05 280.35 308.45 275.3 317.85 269.95 323.6 266.9
	L 268.8 233.65 338.05 191.35 309.15 174.55 177.75 254.5
	Q 191.55 262.2 198.25 266.25 204.65 269.95 209.7 271.95
	L 241.6 250.45 295.05 283.05 Z"/>
					</g>
					<g id="Layer40_0_FILL">
						<path fill="#FFFFFF" stroke="none" d="
	M 199.95 256.85
	Q 194.55 261.2 191.9 262.2
	L 194.9 263.9 200.95 259.2 199.95 256.85
	M 225.8 243.75
	L 224.8 241.75 211.05 250.8 212.05 252.8 225.8 243.75
	M 308.15 275.65
	L 296.7 266.6 295.35 268.6 306.8 277.7 308.15 275.65
	M 275.9 253.5
	L 274.55 255.5 285.95 264.55 287.3 262.55 275.9 253.5
	M 251.7 227.3
	L 250.7 225.25 236.9 234.35 237.9 236.35 251.7 227.3
	M 257.05 240.7
	L 254.05 240.7 268.8 249.8 269.5 247.75 257.05 240.7
	M 277.2 207.8
	L 263.45 216.85 264.45 218.9 278.25 209.8 277.2 207.8
	M 305.1 192.65
	L 304.1 190.65 290.3 199.75 291.35 201.75 305.1 192.65 Z"/>
					</g>
					<g id="Layer38_0_FILL">
						<path class="frontFascia" fill="#ECB27B" stroke="none" d="
	M 359.25 187.95
	L 346.4 174.95 333.85 202.9 359.25 187.95 Z"/>
					</g>
					<g id="Layer37_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 334 201.05
	L 334.35 232 359.2 217.55 359.25 187.95 334 201.05 Z"/>
					</g>
					<g id="Layer36_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 334.35 232.3
	L 334.35 205.1 305.1 191.35 305.1 216.85 334.35 232.3 Z"/>
					</g>
					<g id="Layer35_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 329.7 167.9
	L 331.05 167.9 344.55 176.7 347.85 176.7 363 192.25 363.15 189.55 350.65 176.7 350.55 176.7 334.25 167.5 334.25 159.1 329.7 159.1 329.7 164.9 322.65 160.95 322.3 162.15 329.7 167 329.7 167.9 Z"/>
					</g>
					<g id="Layer34_0_FILL">
						<path class="leftRoof" fill="#F2563B" stroke="none" d="
	M 334.05 207.05
	L 350.65 176.7 322.1 160.45 302.1 192.05 334.05 207.05 Z"/>
					</g>
					<g id="Layer30_0_FILL">
						<path id="windowFour" class="windows" stroke="none" fill="#975A42" d="
	M 341.35 203.3
	Q 340.9 203.45 340.5 203.8 340.1 204.2 339.85 204.75 339.7 205 339.7 205.3 339.6 205.75 339.7 206.1 339.7 206.15 339.7 206.2 339.8 206.5 340 206.8 340.55 207.4 341.45 207.4 342.35 207.4 343 206.8 343.4 206.5 343.65 206.1 343.85 205.75 343.95 205.3 344.05 204.4 343.55 203.8 343.3 203.45 343 203.3 342.65 203.15 342.2 203.15 341.8 203.15 341.35 203.3
	M 355.85 198.45
	Q 355.8 198.2 355.6 198 355.1 197.4 354.2 197.4 353.35 197.4 352.6 198 351.85 198.65 351.7 199.55 351.7 199.7 351.7 199.85 351.6 200.5 352 201.05 352.55 201.65 353.45 201.65 354.3 201.65 355.05 201.05 355.45 200.7 355.7 200.25 355.8 200.05 355.9 199.85 355.95 199.7 355.95 199.55 356.05 198.95 355.85 198.45 Z"/>
						<path class="door" fill="#B65041" stroke="none" d="
	M 351.95 211.2
	L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2
	M 351.2 211.2
	L 351.35 211.2 351.35 211.1 351.2 211.2 Z"/>
					</g>
					<g>
						<path id="Layer30_0_FILL" fill="#000000" fill-opacity="1" stroke="none" d="
	M 183.7 215.3
	L 183.7 215.6
	Q 187.25 231.75 212.25 234.35
	L 183.7 215.3 Z"/>
					</g>
					<g id="Layer29_0_FILL">
						<path fill="#000000" fill-opacity="0.4" stroke="none" d="
	M 305.1 216.85
	L 305.15 217.2
	Q 309.45 233.2 334.35 232.3
	L 305.1 216.85 Z"/>
					</g>
					<g id="Layer27_0_FILL">
						<path class="vegetation" fill="#78A950" stroke="none" d="
	M 177.45 231.65
	Q 175.75 235.35 181.8 239.35 185.5 235.7 185.15 231.3 182.8 230.65 181.45 234 179.45 231.3 177.45 231.65
	M 236.9 266.6
	Q 235.2 270.3 241.25 274.3 244.95 270.6 244.65 266.25 242.3 265.6 240.95 268.95 238.9 266.25 236.9 266.6
	M 254.7 277
	Q 253.05 280.7 259.1 284.75 262.75 281.05 262.45 276.65 260.1 276 258.75 279.35 256.7 276.65 254.7 277
	M 315.5 245.75
	Q 313.5 243.05 311.5 243.4 309.8 247.1 315.85 251.15 319.55 247.45 319.2 243.05 316.85 242.4 315.5 245.75
	M 295.35 232.65
	Q 293.7 236.35 299.75 240.4 303.45 236.7 303.1 232.3 300.75 231.65 299.4 235 297.4 232.3 295.35 232.65
	M 277.2 171.85
	Q 275.55 175.55 281.6 179.55 285.3 175.85 284.95 171.5 282.6 170.85 281.25 174.2 279.25 171.5 277.2 171.85 Z"/>
					</g>
					<g id="Layer26_0_FILL">
						<path class="treeWood" fill="#AE663D" stroke="none" d="
	M 175.1 177.55
	L 172.05 177.55 172.05 191.1 159.3 172.85
	Q 154.6 171.5 172.05 195.7
	L 172.05 212.5 175.1 212.5 175.1 177.55
	M 252.7 151.35
	L 249 151.35 249 176.9 252.7 176.9 252.7 151.35 Z"/>
					</g>
					<g id="Layer25_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 192.55 179.55
	Q 200.95 173.5 200.95 165.1 200.95 156.4 192.55 150 184.15 144.3 172.05 144.3 160.3 144.3 151.9 150 143.15 156.4 143.15 165.1 143.15 173.5 151.9 179.55 160.3 185.95 172.05 185.95 184.15 185.95 192.55 179.55
	M 236.25 106.65
	Q 230.2 116.05 230.2 129.15 230.2 142.25 236.25 151.35 242.3 160.75 250.7 160.75 258.75 160.75 264.8 151.35 270.85 142.25 270.85 129.15 270.85 116.05 264.8 106.65 258.75 97.6 250.7 97.6 242.3 97.6 236.25 106.65 Z"/>
					</g>
					<g id="Layer24_0_FILL">
						<path class="vegetation" fill="#77A951" stroke="none" d="
	M 158.3 221.9
	Q 160.65 221.9 161.95 220.2 163 219.55 163.3 218.55 164.65 218.9 166.35 218.9 170.05 218.9 172.4 216.2 175.1 213.85 175.1 210.15 175.1 206.45 172.4 203.75 170.05 201.4 166.35 201.4 162.65 201.4 159.95 203.75 157.6 206.45 157.6 210.15 157.6 210.8 157.6 211.15 155.95 211.5 154.6 212.5 152.9 214.15 152.9 216.55 152.9 218.9 154.6 220.2 156.25 221.9 158.3 221.9
	M 338.35 240.05
	Q 341.05 237.7 341.05 234 341.05 230.3 338.35 227.6 336 225.25 332.3 225.25 328.65 225.25 325.95 227.6 323.6 230.3 323.6 234 323.6 237.7 325.95 240.05 328.65 242.75 332.3 242.75 336 242.75 338.35 240.05 Z"/>
					</g>
					<g id="Layer22_0_FILL">
						<path class="rightRoof" fill="#D05041" stroke="none" d="
	M 220 173.85
	L 236.8 186.7 264.35 171.15 244.5 159.55 220 173.85 Z"/>
					</g>
					<g id="Layer21_0_FILL">
						<path class="leftWall" fill="#C57F42" stroke="none" d="
	M 212.25 191.35
	L 183.35 172.3 183.7 215.3 212.25 234.35 212.25 191.35 Z"/>
					</g>
					<g id="Layer20_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 192.1 149.85
	L 236.45 174.8 243.1 171.4
	Q 220.05 150.55 196.3 139.95
	L 192.1 149.85 Z"/>
					</g>
					<g id="Layer19_0_FILL">
						<path class="frontFascia" fill="#EBB17B" stroke="none" d="
	M 226.85 160.95
	L 212 190.6 229.75 192.6 239.75 172.85 226.85 160.95 Z"/>
					</g>
					<g id="Layer18_0_FILL">
						<path class="frontWall" fill="#EFA258" stroke="none" d="
	M 240.15 172.65
	L 211.9 191.6 212.25 233.65 264.35 201.7 264.35 170.8 240.8 184.45 240.15 172.65 Z"/>
					</g>
					<g id="Layer17_0_FILL">
						<path class="rightRoof" fill="#EF4427" stroke="none" d="
	M 210.9 142.2
	L 205.9 142.2 205.9 152.65 210.9 152.65 210.9 142.2 Z"/>
					</g>
					<g>
						<path id="Layer16_0_FILL" class="leftRoof" fill="#F2563B" stroke="none" d="
	M 210.25 195.5
	L 227.4 160.95 195.45 141.35 177.65 175.85 210.25 195.5 Z"/>
					</g>
					<g>
						<path id="sun" fill="#E3BD0E" stroke="none" d="
	M 257.05 15.95
	Q 251.7 15.95 248 19.65 244.3 23.35 244.3 28.7 244.3 34.1 248 37.8 251.7 41.5 257.05 41.5 262.45 41.5 266.15 37.8 269.85 34.1 269.85 28.7 269.85 23.35 266.15 19.65 262.45 15.95 257.05 15.95 Z"/>
					</g>
					<g id="Layer8_0_FILL">
						<path fill="#975A42" stroke="none" d="
	M 238.45 189.65
	Q 238.295703125 189.362109375 238.05 189.1 237.35 188.3 236.2 188.3 235.05 188.3 234.15 189.1 233.3 189.9 233.2 191.05 233.1 192.2 233.8 193 234.55 193.8 235.7 193.8 236.85 193.8 237.7 193 238.1970703125 192.558203125 238.45 192 238.6552734375 191.56484375 238.7 191.05 238.7671875 190.276953125 238.45 189.65
	M 220.55 197.55
	Q 220 197.55 219.5 197.75 218.95 197.95 218.5 198.35 217.933203125 198.8833984375 217.7 199.55 217.5833984375 199.916796875 217.55 200.3 217.4923828125 200.96171875 217.7 201.5 217.852734375 201.9103515625 218.15 202.25 218.95 203.05 220.1 203.05 221.25 203.05 222.05 202.25 222.95 201.45 223.05 200.3 223.15 199.15 222.4 198.35 222.05 197.95 221.65 197.75 221.15 197.55 220.55 197.55 Z"/>
					</g>
					<g id="Layer7_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 233.55 206.75
	L 225.9 211.95 226.25 225.5 233.95 220.35 233.55 206.75 Z"/>
					</g>
					<g>
						<path id="windowOne" class="windows" fill="#975A42" stroke="none" d="
	M 188.65 198.4
	L 188.8 204.1 198.65 210.45 198.55 204.75 188.65 198.4
	M 208.45 216.8
	L 208.35 211.1 198.55 204.75 198.65 210.45 208.45 216.8
	M 188.8 204.1
	L 188.95 209.8 198.8 216.15 198.65 210.45 188.8 204.1
	M 208.6 222.5
	L 208.45 216.8 198.65 210.45 198.8 216.15 208.6 222.5 Z"/>
					</g>
					<g>
						<path id="windowThree" class="windows" fill="#975A42" stroke="none" d="
	M 311.7 214.1
	L 318.55 217.55 318.45 211.9 311.6 208.45 311.7 214.1
	M 325.4 221
	L 325.25 215.35 318.45 211.9 318.55 217.55 325.4 221
	M 318.4 206.2
	L 311.5 202.75 311.6 208.45 318.45 211.9 318.4 206.2
	M 325.25 215.35
	L 325.2 209.7 318.4 206.2 318.45 211.9 325.25 215.35 Z"/>
					</g>
					<g id="Layer2_0_FILL">
						<path class="door" fill="#B65041" stroke="none" d="
	M 259.7 183.25
	L 244.6 191.9 244.6 213.8 259.7 204.55 259.7 183.25 Z"/>
					</g>
					<path id="windowTwo" fill="#975A42" class="windows" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" d="
	M 223.05 200.3
	Q 222.95 201.45 222.05 202.25 221.25 203.05 220.1 203.05 218.95 203.05 218.15 202.25 217.852734375 201.9103515625 217.7 201.5 217.4923828125 200.96171875 217.55 200.3 217.5833984375 199.916796875 217.7 199.575 217.933203125 198.8833984375 218.5 198.35 218.95 197.95 219.5 197.75 220 197.55 220.55 197.55 221.15 197.55 221.65 197.75 222.05 197.95 222.4 198.35 223.15 199.15 223.05 200.3 Z
	M 238.7 191.05
	Q 238.6552734375 191.56484375 238.45 192 238.1970703125 192.558203125 237.7 193 236.85 193.8 235.7 193.8 234.55 193.8 233.8 193 233.1 192.2 233.2 191.05 233.3 189.9 234.15 189.1 235.05 188.3 236.2 188.3 237.35 188.3 238.05 189.1 238.295703125 189.362109375 238.45 189.65 238.7671875 190.276953125 238.7 191.05 Z"/>
					<path fill="#F2563B" stroke="none" d=" M 351.95 211.2 L 351.8 211.2 346.05 215.1 346.05 225.2 351.95 221.6 351.95 211.2 Z"/>
					<path id="Layer6_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 198.55 204.75
	L 208.35 211.1 208.45 216.8 208.6 222.5 198.8 216.15 188.95 209.8 188.8 204.1 188.65 198.4 198.55 204.75 198.65 210.45 208.45 216.8
	M 198.8 216.15
	L 198.65 210.45 188.8 204.1"/>
					<path id="Layer5_0_1_STROKES" class="windowRims" stroke="#AE663D" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="
	M 325.25 215.35
	L 325.4 221 318.55 217.55 311.7 214.1 311.6 208.45 311.5 202.75 318.4 206.2 325.2 209.7 325.25 215.35 318.45 211.9 318.55 217.55
	M 318.4 206.2
	L 318.45 211.9 311.6 208.45"/>
				</defs>
				<g id="shadow">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use xlink:href="#bottomShadow"/>
					</g>
				</g>
				<g transform="matrix( 1, 0, 0, 1, 0,0) ">
					<use xlink:href="#sun"/>
				</g>
				<g id="earth">
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer52_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer51_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer50_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer48_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer47_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer46_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer45_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer44_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer43_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer41_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer40_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer38_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer37_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer36_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer35_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer34_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowFour"/>
						<use class="element" xlink:href="#Layer32_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer30_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer27_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer26_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer25_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer24_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer22_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer21_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer20_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer19_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer18_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer17_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer16_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer8_0_FILL"/>
						<use class="element" xlink:href="#windowTwo"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer7_0_FILL"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowOne"/>
						<use class="element" xlink:href="#Layer6_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#windowThree"/>
						<use class="element" xlink:href="#Layer5_0_1_STROKES"/>
					</g>
					<g transform="matrix( 1, 0, 0, 1, 0,0) ">
						<use class="element" xlink:href="#Layer2_0_FILL"/>
					</g>
				</g>
			</svg>
			<! -- End of SVG file -->
			<! -- Moon/Sun Toggle -->
			<div id="toggleButton" class="day-toggle">
				<div class="sun-icon"></div>
				<label class="switch">
            <input id="toggleCheckbox" type="checkbox">
            <div class="slider"></div>
        </label>
				<div class="cloud-icon"></div>
			</div>
			<! -- Moon/Sun Toggle -->
			<! -- End of Container -->
		</div>
			</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å¥”å‘æœªæ¥çš„æ—¥å­</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">æ‰“å·¥æ˜¯ä¸å¯èƒ½æ‰“å·¥çš„ï¼Œ è¿™è¾ˆå­éƒ½ä¸å¯èƒ½æ‰“å·¥çš„ï¼</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/02/ä»ChromeV8æºç çœ‹JSæ•°ç»„/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¥”å‘æœªæ¥çš„æ—¥å­">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ä»ChromeV8æºç çœ‹JSæ•°ç»„</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-04-02T22:20:57+08:00">
                2020-04-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—éƒ½æ˜¯çº¿æ€§è¡¨ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½æ˜¯ä¸€æ®µçº¿æ€§çš„ç»“æ„ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯éçº¿æ€§è¡¨ï¼Œä¾‹å¦‚æ ‘ã€å›¾ã€å †ç­‰ï¼Œå®ƒè¡¨ç¤ºçš„ç»“æ„éƒ½éçº¿æ€§ã€‚</p>
<p>æœ¬èŠ‚ä¸»è¦ä»‹ç» JavaScript æ•°ç»„ï¼Œåœ¨å¼€å§‹æœ¬ç« èŠ‚å‰ï¼Œæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>æˆ‘ä»¬çŸ¥é“åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ•°ç»„ä¸­ä¿å­˜ä¸åŒç±»å‹å€¼ï¼Œå¹¶ä¸”æ•°ç»„å¯ä»¥åŠ¨æ€å¢é•¿ï¼Œä¸åƒå…¶å®ƒè¯­è¨€ï¼Œä¾‹å¦‚ Cï¼Œåˆ›å»ºçš„æ—¶å€™è¦å†³å®šæ•°ç»„çš„å¤§å°ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå°±è¦é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå–ƒï¼Ÿ</p>
<p>æœ¬èŠ‚ä» Chrome v8 æºç è§’åº¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œåˆ†ä¸ºå››ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>æ•°ç»„åŸºç¡€å…¥é—¨</li>
<li>JavaScript ä¸­ï¼Œæ•°ç»„ä¸ºä»€ä¹ˆå¯ä»¥ä¿å­˜ä¸åŒç±»å‹ï¼Ÿ</li>
<li>JavaScript ä¸­ï¼Œæ•°ç»„æ˜¯å¦‚ä½•å­˜å‚¨çš„å–ƒï¼Ÿ</li>
<li>JavaScript ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆ <code>FastElements</code> ï¼‰</li>
</ul>
<p>ä¸‹é¢è¿›å…¥æ­£é¢˜å§ï¼ï¼ˆæ–‡æœ«æœ‰æƒŠå–œï¼‰ğŸ˜Š</p>
<p>æƒ³è¦æ›´å¤šæ›´å¿«çš„å­¦ä¹ æœ¬ç³»åˆ—ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·ã€Œå‰ç«¯ç“¶å­å›ã€å’Œæˆ‘çš„ã€Œ<a href="https://github.com/sisterAn/JavaScript-Algorithms" target="_blank" rel="noopener">Githubï¼ˆç‚¹å‡»æŸ¥çœ‹ï¼‰</a>ã€</p>
<h3 id="ä¸€ã€æ•°ç»„ï¼ˆåŸºç¡€ï¼‰"><a href="#ä¸€ã€æ•°ç»„ï¼ˆåŸºç¡€ï¼‰" class="headerlink" title="ä¸€ã€æ•°ç»„ï¼ˆåŸºç¡€ï¼‰"></a>ä¸€ã€æ•°ç»„ï¼ˆåŸºç¡€ï¼‰</h3><p>ä¸€ç§æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œæ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰ï¼Œå®ƒç¼–å·ä» 0 å¼€å§‹ï¼Œä»£è¡¨ä¸€ç»„è¿ç»­çš„å‚¨å­˜ç»“æ„ï¼Œç”¨æ¥å‚¨å­˜åŒä¸€ç§ç±»å‹çš„æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<p>å®ƒçš„è¿™ç§ç‰¹å®šçš„å­˜å‚¨ç»“æ„ï¼ˆè¿ç»­å­˜å‚¨ç©ºé—´å­˜å‚¨åŒä¸€ç±»å‹æ•°æ®ï¼‰å†³å®šäº†ï¼š</p>
<p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>éšæœºè®¿é—®ï¼šå¯ä»¥é€šè¿‡ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„ä¸­çš„ä»»æ„ä½ç½®ä¸Šçš„æ•°æ®</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>å¯¹æ•°æ®çš„åˆ é™¤å’Œæ’å…¥ä¸æ˜¯å¾ˆå‹å¥½</li>
</ul>
<p><strong>æŸ¥æ‰¾ï¼š</strong> æ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›</p>
<p><strong>æ’å…¥æˆ–åˆ é™¤ï¼š</strong> æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›</p>
<p>åœ¨ JavaScript ä¸­çš„æ•°ç»„å‡ ä¹æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä¸å…‰å¯ä»¥ä½œä¸ºä¸€ä¸ªæ™®é€šçš„æ•°ç»„ä½¿ç”¨ï¼Œå¯ä»¥ä½œä¸ºæ ˆæˆ–é˜Ÿåˆ—ä½¿ç”¨ã€‚</p>
<p>æ•°ç»„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<p>æ ˆï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stack = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// è¿›æ ˆ</span></span><br><span class="line">stack.push(<span class="number">4</span>)</span><br><span class="line"><span class="comment">// å‡ºæ ˆ</span></span><br><span class="line">stcak.pop()</span><br></pre></td></tr></table></figure></p>
<p>é˜Ÿåˆ—ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> queue = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// è¿›é˜Ÿ</span></span><br><span class="line">queue.push(<span class="number">4</span>)</span><br><span class="line"><span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">queue.shift()</span><br></pre></td></tr></table></figure></p>
<h3 id="äºŒã€JavaScript-ä¸­ï¼Œæ•°ç»„å¯ä»¥ä¿å­˜ä¸åŒç±»å‹å€¼"><a href="#äºŒã€JavaScript-ä¸­ï¼Œæ•°ç»„å¯ä»¥ä¿å­˜ä¸åŒç±»å‹å€¼" class="headerlink" title="äºŒã€JavaScript ä¸­ï¼Œæ•°ç»„å¯ä»¥ä¿å­˜ä¸åŒç±»å‹å€¼"></a>äºŒã€JavaScript ä¸­ï¼Œæ•°ç»„å¯ä»¥ä¿å­˜ä¸åŒç±»å‹å€¼</h3><p>çœ‹ä¸€ä¸‹ Chrome v8 æºç ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The JSArray describes JavaScript Arrays</span></span><br><span class="line"><span class="comment">//  Such an array can be in one of two modes:</span></span><br><span class="line"><span class="comment">//    - fast, backing storage is a FixedArray and length &lt;= elements.length();</span></span><br><span class="line"><span class="comment">//       Please note: push and pop can be used to grow and shrink the array.</span></span><br><span class="line"><span class="comment">//    - slow, backing storage is a HashTable with numbers as keys.</span></span><br><span class="line">class JSArray: public JSObject &#123;</span><br><span class="line"> public:</span><br><span class="line">  <span class="comment">// [length]: The length property.</span></span><br><span class="line">  DECL_ACCESSORS(length, <span class="built_in">Object</span>)</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">// Number of element slots to pre-allocate for an empty array.</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> int kPreallocatedArrayElements = <span class="number">4</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>JSArray</code> æ˜¯ç»§æ‰¿è‡ª <code>JSObject</code> çš„ï¼Œæ‰€ä»¥åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„å¯ä»¥æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä»¥ key-value å½¢å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ JavaScript ä¸­çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼ã€‚</p>
<h3 id="ä¸‰ã€JavaScript-ä¸­ï¼Œæ•°ç»„çš„å­˜å‚¨"><a href="#ä¸‰ã€JavaScript-ä¸­ï¼Œæ•°ç»„çš„å­˜å‚¨" class="headerlink" title="ä¸‰ã€JavaScript ä¸­ï¼Œæ•°ç»„çš„å­˜å‚¨"></a>ä¸‰ã€JavaScript ä¸­ï¼Œæ•°ç»„çš„å­˜å‚¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The JSArray describes JavaScript Arrays</span></span><br><span class="line"><span class="comment">//  Such an array can be in one of two modes:</span></span><br><span class="line"><span class="comment">//    - fast, backing storage is a FixedArray and length &lt;= elements.length();</span></span><br><span class="line"><span class="comment">//       Please note: push and pop can be used to grow and shrink the array.</span></span><br><span class="line"><span class="comment">//    - slow, backing storage is a HashTable with numbers as keys.</span></span><br><span class="line">class JSArray: public JSObject &#123;</span><br><span class="line"> public:</span><br><span class="line">  <span class="comment">// [length]: The length property.</span></span><br><span class="line">  DECL_ACCESSORS(length, <span class="built_in">Object</span>)</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">// Number of element slots to pre-allocate for an empty array.</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> int kPreallocatedArrayElements = <span class="number">4</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>JSArray</code> ç»§æ‰¿äº <code>JSObject</code> ï¼Œä»æ³¨é‡Šä¸Šçœ‹ï¼Œå®ƒæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š</p>
<ul>
<li><strong>fastï¼š</strong>å­˜å‚¨ç»“æ„æ˜¯ <code>FixedArray</code> ï¼Œå¹¶ä¸”æ•°ç»„é•¿åº¦ <code>&lt;= elements.length()</code> ï¼Œ<code>push</code> æˆ– <code>pop</code> æ—¶å¯èƒ½ä¼šä¼´éšç€åŠ¨æ€æ‰©å®¹æˆ–å‡å®¹</li>
<li><strong>slowï¼š</strong>å­˜å‚¨ç»“æ„æ˜¯ <code>HashTable</code>ï¼ˆå“ˆå¸Œè¡¨ï¼‰ï¼Œå¹¶ä¸”æ•°ç»„ä¸‹æ ‡ä½œä¸º <code>key</code></li>
</ul>
<p><code>fast</code> æ¨¡å¼ä¸‹æ•°ç»„åœ¨æºç é‡Œé¢å« <code>FastElements</code> ï¼Œè€Œ <code>slow</code> æ¨¡å¼ä¸‹çš„å«åš <code>SlowElements</code> ã€‚</p>
<h4 id="1-å¿«æ•°ç»„ï¼ˆFastElementsï¼‰"><a href="#1-å¿«æ•°ç»„ï¼ˆFastElementsï¼‰" class="headerlink" title="1. å¿«æ•°ç»„ï¼ˆFastElementsï¼‰"></a>1. å¿«æ•°ç»„ï¼ˆFastElementsï¼‰</h4><p><code>FixedArray</code> æ˜¯ V8 å®ç°çš„ä¸€ä¸ªç±»ä¼¼äºæ•°ç»„çš„ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€æ®µè¿ç»­çš„å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•ç›´æ¥å®šä½ã€‚æ–°åˆ›å»ºçš„ç©ºæ•°ç»„é»˜è®¤å°±æ˜¯å¿«æ•°ç»„ã€‚å½“æ•°ç»„æ»¡ï¼ˆæ•°ç»„çš„é•¿åº¦è¾¾åˆ°æ•°ç»„åœ¨å†…å­˜ä¸­ç”³è¯·çš„å†…å­˜å®¹é‡æœ€å¤§å€¼ï¼‰çš„æ—¶å€™ï¼Œç»§ç»­ <code>push</code> æ—¶ï¼Œ <code>JSArray</code> ä¼šè¿›è¡ŒåŠ¨æ€çš„æ‰©å®¹ï¼Œä»¥å­˜å‚¨æ›´å¤šçš„å…ƒç´ ã€‚</p>
<h4 id="2-æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰"><a href="#2-æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰" class="headerlink" title="2. æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰"></a>2. æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰</h4><p>æ…¢æ•°ç»„ä»¥å“ˆå¸Œè¡¨çš„å½¢å¼å­˜å‚¨åœ¨å†…å­˜ç©ºé—´é‡Œï¼Œå®ƒä¸éœ€è¦å¼€è¾Ÿè¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œä½†éœ€è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œä¸å¿«æ•°ç»„ç›¸æ¯”ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/objects/dictionary.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EXPORT_TEMPLATE_DECLARE</span>(<span class="title">V8_EXPORT_PRIVATE</span>) <span class="title">Dictionary</span></span></span><br><span class="line">    : public HashTable&lt;Derived, Shape&gt; &#123;</span><br><span class="line">  using DerivedHashTable = HashTable&lt;Derived, Shape&gt;;</span><br><span class="line"></span><br><span class="line"> public:</span><br><span class="line">  using Key = typename Shape::Key;</span><br><span class="line">  <span class="comment">// Returns the value at entry.</span></span><br><span class="line">  inline <span class="built_in">Object</span> ValueAt(InternalIndex entry);</span><br><span class="line">  inline <span class="built_in">Object</span> ValueAt(<span class="keyword">const</span> Isolate* isolate, InternalIndex entry);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ä»æºç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„å†…éƒ¨å°±æ˜¯ä¸€ä¸ª HashTableã€‚</p>
<h4 id="3-ä»€ä¹ˆæ—¶å€™ä¼šä»-fast-è½¬å˜ä¸º-slow-å–ƒï¼Ÿ"><a href="#3-ä»€ä¹ˆæ—¶å€™ä¼šä»-fast-è½¬å˜ä¸º-slow-å–ƒï¼Ÿ" class="headerlink" title="3. ä»€ä¹ˆæ—¶å€™ä¼šä» fast è½¬å˜ä¸º slow å–ƒï¼Ÿ"></a>3. ä»€ä¹ˆæ—¶å€™ä¼šä» fast è½¬å˜ä¸º slow å–ƒï¼Ÿ</h4><p>ä» Chrome V8 æºç ä¸Šçœ‹ï¼Œ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/objects/js-objects.h</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t kMaxGap = <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/objects/dictionary.h</span></span><br><span class="line"><span class="comment">// JSObjects prefer dictionary elements if the dictionary saves this much</span></span><br><span class="line"><span class="comment">// memory compared to a fast elements backing store.</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t kPreferFastElementsSizeFactor = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/objects/js-objects-inl.h</span></span><br><span class="line"><span class="comment">// If the fast-case backing storage takes up much more memory than a dictionary</span></span><br><span class="line"><span class="comment">// backing storage would, the object should have slow elements.</span></span><br><span class="line"><span class="comment">// static</span></span><br><span class="line"><span class="keyword">static</span> inline bool ShouldConvertToSlowElements(uint32_t used_elements,</span><br><span class="line">                                               uint32_t new_capacity) &#123;</span><br><span class="line">  uint32_t size_threshold = NumberDictionary::kPreferFastElementsSizeFactor *</span><br><span class="line">                            NumberDictionary::ComputeCapacity(used_elements) *</span><br><span class="line">                            NumberDictionary::kEntrySize;</span><br><span class="line">  <span class="comment">// å¿«æ•°ç»„æ–°å®¹é‡æ˜¯æ‰©å®¹åçš„å®¹é‡3å€ä¹‹å¤šæ—¶ï¼Œä¹Ÿä¼šè¢«è½¬æˆæ…¢æ•°ç»„</span></span><br><span class="line">  <span class="keyword">return</span> size_threshold &lt;= new_capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> inline bool ShouldConvertToSlowElements(JSObject object,</span><br><span class="line">                                               uint32_t capacity,</span><br><span class="line">                                               uint32_t index,</span><br><span class="line">                                               uint32_t* new_capacity) &#123;</span><br><span class="line">  STATIC_ASSERT(JSObject::kMaxUncheckedOldFastElementsLength &lt;=</span><br><span class="line">                JSObject::kMaxUncheckedFastElementsLength);</span><br><span class="line">  <span class="keyword">if</span> (index &lt; capacity) &#123;</span><br><span class="line">    *new_capacity = capacity;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å½“åŠ å…¥çš„ç´¢å¼•å€¼ï¼ˆä¾‹å¦‚ä¾‹3ä¸­çš„2000ï¼‰æ¯”å½“å‰å®¹é‡capacity å¤§äºç­‰äº 1024æ—¶ï¼Œ</span></span><br><span class="line">  <span class="comment">// è¿”å›trueï¼Œè½¬ä¸ºæ…¢æ•°ç»„</span></span><br><span class="line">  <span class="keyword">if</span> (index - capacity &gt;= JSObject::kMaxGap) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  *new_capacity = JSObject::NewElementsCapacity(index + <span class="number">1</span>);</span><br><span class="line">  DCHECK_LT(index, *new_capacity);</span><br><span class="line">  <span class="comment">// TODO(ulan): Check if it works with young large objects.</span></span><br><span class="line">  <span class="keyword">if</span> (*new_capacity &lt;= JSObject::kMaxUncheckedOldFastElementsLength ||</span><br><span class="line">      (*new_capacity &lt;= JSObject::kMaxUncheckedFastElementsLength &amp;&amp;</span><br><span class="line">       ObjectInYoungGeneration(object))) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ShouldConvertToSlowElements(object.GetFastElementsUsage(),</span><br><span class="line">                                     *new_capacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œå½“å¤„äºä»¥ä¸‹æƒ…å†µæ—¶ï¼Œå¿«æ•°ç»„ä¼šè¢«è½¬å˜ä¸ºæ…¢æ•°ç»„ï¼š</p>
<ul>
<li>å½“åŠ å…¥çš„ç´¢å¼•å€¼ index æ¯”å½“å‰å®¹é‡ capacity å·®å€¼å¤§äºç­‰äº 1024 æ—¶ï¼ˆindex - capacity &gt;= 1024ï¼‰</li>
<li>å¿«æ•°ç»„æ–°å®¹é‡æ˜¯æ‰©å®¹åçš„å®¹é‡ 3 å€ä¹‹å¤šæ—¶</li>
</ul>
<p>ä¾‹å¦‚ï¼šå‘å¿«æ•°ç»„é‡Œå¢åŠ ä¸€ä¸ªå¤§ç´¢å¼•åŒç±»å‹å€¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr[<span class="number">2000</span>] = <span class="number">10</span>;</span><br></pre></td></tr></table></figure></p>
<p>å½“å¾€ <code>arr</code> å¢åŠ ä¸€ä¸ª <code>2000</code> çš„ç´¢å¼•æ—¶ï¼Œ<code>arr</code> è¢«è½¬æˆæ…¢æ•°ç»„ã€‚èŠ‚çœäº†å¤§é‡çš„å†…å­˜ç©ºé—´ï¼ˆä»ç´¢å¼•ä¸º 2 åˆ°ç´¢å¼•ä¸º 2000ï¼‰ã€‚</p>
<h4 id="4-ä»€ä¹ˆæ—¶å€™ä¼šä»-slow-è½¬å˜ä¸º-fast-å–ƒï¼Ÿ"><a href="#4-ä»€ä¹ˆæ—¶å€™ä¼šä»-slow-è½¬å˜ä¸º-fast-å–ƒï¼Ÿ" class="headerlink" title="4. ä»€ä¹ˆæ—¶å€™ä¼šä» slow è½¬å˜ä¸º fast å–ƒï¼Ÿ"></a>4. ä»€ä¹ˆæ—¶å€™ä¼šä» slow è½¬å˜ä¸º fast å–ƒï¼Ÿ</h4><p>æˆ‘ä»¬å·²ç»çŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°ç”±å¿«å˜æ…¢ï¼Œé‚£ç”±æ…¢å˜å¿«å°±å¾ˆç®€å•äº†<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> bool ShouldConvertToFastElements(JSObject object,</span><br><span class="line">                                        NumberDictionary dictionary,</span><br><span class="line">                                        uint32_t index,</span><br><span class="line">                                        uint32_t* new_capacity) &#123;</span><br><span class="line">  <span class="comment">// If properties with non-standard attributes or accessors were added, we// cannot go back to fast elements.if (dictionary.requires_slow_elements()) returnfalse;</span></span><br><span class="line">  <span class="comment">// Adding a property with this index will require slow elements.if (index &gt;= static_cast&lt;uint32_t&gt;(Smi::kMaxValue)) returnfalse;</span></span><br><span class="line">  <span class="keyword">if</span> (object.IsJSArray()) &#123;</span><br><span class="line">    <span class="built_in">Object</span> length = JSArray::cast(object).length();</span><br><span class="line">    <span class="keyword">if</span> (!length.IsSmi()) returnfalse;</span><br><span class="line">    *new_capacity = static_cast&lt;uint32_t&gt;(Smi::ToInt(length));</span><br><span class="line">  &#125; elseif (object.IsJSArgumentsObject()) &#123;</span><br><span class="line">    returnfalse;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    *new_capacity = dictionary.max_number_key() + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  *new_capacity = Max(index + <span class="number">1</span>, *new_capacity);</span><br><span class="line">  uint32_t dictionary_size = static_cast&lt;uint32_t&gt;(dictionary.Capacity()) *</span><br><span class="line">                             NumberDictionary::kEntrySize;</span><br><span class="line">  <span class="comment">// Turn fast if the dictionary only saves 50% space.return2 * dictionary_size &gt;= *new_capacity;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å½“æ…¢æ•°ç»„çš„å…ƒç´ å¯å­˜æ”¾åœ¨å¿«æ•°ç»„ä¸­ä¸”é•¿åº¦åœ¨ smi ä¹‹é—´ä¸”ä»…èŠ‚çœäº†50%çš„ç©ºé—´ï¼Œåˆ™ä¼šè½¬å˜ä¸ºå¿«æ•°ç»„</p>
<h3 id="å››ã€JavaScript-ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆFastElementsï¼‰"><a href="#å››ã€JavaScript-ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆFastElementsï¼‰" class="headerlink" title="å››ã€JavaScript ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆFastElementsï¼‰"></a>å››ã€JavaScript ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆFastElementsï¼‰</h3><p>é»˜è®¤ç©ºæ•°ç»„åˆå§‹åŒ–å¤§å°ä¸º <code>4</code> :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Number of element slots to pre-allocate for an empty array.</span><br><span class="line">staticconst int kPreallocatedArrayElements = 4;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ JavaScript ä¸­ï¼Œå½“æ•°ç»„æ‰§è¡Œ <code>push</code> æ“ä½œæ—¶ï¼Œä¸€æ—¦å‘ç°æ•°ç»„å†…å­˜ä¸è¶³ï¼Œå°†è¿›è¡Œæ‰©å®¹ã€‚</p>
<p>åœ¨ Chrome æºç ä¸­ï¼Œ <code>push</code> çš„æ“ä½œæ˜¯ç”¨æ±‡ç¼–å®ç°çš„ï¼Œåœ¨ c++ é‡ŒåµŒå…¥çš„æ±‡ç¼–ï¼Œä»¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå¹¶ä¸”åœ¨æ±‡ç¼–çš„åŸºç¡€ä¸Šç”¨ c++ å°è£…äº†ä¸€å±‚ï¼Œåœ¨ç¼–è¯‘æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå°†è¿™äº› c++ ä»£ç è½¬æˆæ±‡ç¼–ä»£ç ã€‚</p>
<p>è®¡ç®—æ–°å®¹é‡çš„å‡½æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js-objects.h</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t kMinAddedElementsCapacity = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// code-stub-assembler.cc</span></span><br><span class="line">Node* CodeStubAssembler::CalculateNewElementsCapacity(Node* old_capacity,</span><br><span class="line">                                                      ParameterMode mode) &#123;</span><br><span class="line">  CSA_SLOW_ASSERT(<span class="keyword">this</span>, MatchesParameterMode(old_capacity, mode));</span><br><span class="line">  Node* half_old_capacity = WordOrSmiShr(old_capacity, <span class="number">1</span>, mode);</span><br><span class="line">  Node* new_capacity = IntPtrOrSmiAdd(half_old_capacity, old_capacity, mode);</span><br><span class="line">  Node* padding =</span><br><span class="line">      IntPtrOrSmiConstant(JSObject::kMinAddedElementsCapacity, mode);</span><br><span class="line">  <span class="keyword">return</span> IntPtrOrSmiAdd(new_capacity, padding, mode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥æ‰©å®¹åæ–°å®¹é‡è®¡å…¬å¼ä¸ºï¼š</p>
<blockquote>
<p><code>new_capacity = old_capacity /2 + old_capacity + 16</code></p>
</blockquote>
<p>å³è€çš„å®¹é‡çš„ 1.5 å€åŠ ä¸Š 16 ã€‚åˆå§‹åŒ–ä¸º 4 ä¸ªï¼Œå½“ <code>push</code> ç¬¬ 5 ä¸ªçš„æ—¶å€™ï¼Œå®¹é‡å°†ä¼šå˜æˆï¼š</p>
<blockquote>
<p><code>new_capacity = 4 / 2 + 4 + 16 = 22</code></p>
</blockquote>
<p>æ¥ç€ç”³è¯·ä¸€å—è¿™ä¹ˆå¤§çš„å†…å­˜ï¼ŒæŠŠè€çš„æ•°æ®æ‹·è¿‡å»ï¼ŒæŠŠæ–°å…ƒç´ æ”¾åœ¨å½“å‰ length ä½ç½®ï¼Œç„¶åå°†æ•°ç»„çš„ length + 1ï¼Œå¹¶è¿”å› lengthã€‚</p>
<p>æ‰€ä»¥ï¼Œæ‰©å®¹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ul>
<li><code>push</code> æ“ä½œæ—¶ï¼Œå‘ç°æ•°ç»„å†…å­˜ä¸è¶³</li>
<li>ç”³è¯· new_capacity = old_capacity /2 + old_capacity + 16 é‚£ä¹ˆé•¿åº¦çš„å†…å­˜ç©ºé—´</li>
<li>å°†æ•°ç»„æ‹·è´åˆ°æ–°å†…å­˜ä¸­</li>
<li>æŠŠæ–°å…ƒç´ æ”¾åœ¨å½“å‰ length ä½ç½®</li>
<li>æ•°ç»„çš„ length + 1</li>
<li>è¿”å› length</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œä¸åƒ Cï¼Œéœ€ç”¨ç”¨æˆ·æ‰‹åŠ¨ç”³è¯·å†…å­˜ç©ºé—´ã€‚</p>
<p>å½“æ•°ç»„æ‰§è¡Œ <code>pop</code> æ“ä½œæ—¶ï¼Œä¼šåˆ¤æ–­ <code>pop</code> åæ•°ç»„çš„å®¹é‡ï¼Œæ˜¯å¦éœ€è¦è¿›è¡Œå‡å®¹ã€‚</p>
<p>ä¸åŒäºæ•°ç»„çš„ <code>push</code> ä½¿ç”¨æ±‡ç¼–å®ç°çš„ï¼Œ <code>pop</code> ä½¿ç”¨ c++ å®ç°çš„ã€‚</p>
<p>åˆ¤æ–­æ˜¯å¦è¿›è¡Œå‡å®¹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">2</span> * length &lt;= capacity) &#123;</span><br><span class="line">  <span class="comment">// If more than half the elements won't be used, trim the array.</span></span><br><span class="line">  isolate-&gt;heap()-&gt;RightTrimFixedArray(*backing_store, capacity - length);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// Otherwise, fill the unused tail with holes.</span></span><br><span class="line">  BackingStore::cast(*backing_store)-&gt;FillWithHoles(length, old_length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œå½“æ•°ç»„ <code>pop</code> åï¼Œå¦‚æœæ•°ç»„å®¹é‡å¤§äºç­‰äº length çš„ 2 å€ï¼Œåˆ™è¿›è¡Œå®¹é‡è°ƒæ•´ï¼Œä½¿ç”¨ <code>RightTrimFixedArray</code> å‡½æ•°ï¼Œè®¡ç®—å‡ºéœ€è¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ï¼Œåšå¥½æ ‡è®°ï¼Œç­‰å¾… GC å›æ”¶ï¼›å¦‚æœæ•°ç»„å®¹é‡å°äº length çš„ 2 å€ï¼Œåˆ™ç”¨ holes å¯¹è±¡å¡«å……ã€‚</p>
<p>æ‰€ä»¥ï¼Œå‡å®¹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ul>
<li><code>pop</code> æ“ä½œæ—¶ï¼Œè·å–æ•°ç»„ <code>length</code></li>
<li>è·å– <code>length - 1</code> ä¸Šçš„å…ƒç´ ï¼ˆè¦åˆ é™¤çš„å…ƒç´ ï¼‰</li>
<li>æ•°ç»„ <code>length - 1</code></li>
<li>åˆ¤æ–­æ•°ç»„çš„æ€»å®¹é‡æ˜¯å¦å¤§äºç­‰äº length - 1 çš„ 2 å€</li>
<li>æ˜¯çš„è¯ï¼Œä½¿ç”¨ <code>RightTrimFixedArray</code> å‡½æ•°ï¼Œè®¡ç®—å‡ºéœ€è¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ï¼Œå¹¶åšå¥½æ ‡è®°ï¼Œç­‰å¾… <code>GC</code> å›æ”¶</li>
<li>ä¸æ˜¯çš„è¯ï¼Œç”¨ <code>holes</code> å¯¹è±¡å¡«å……</li>
<li>è¿”å›è¦åˆ é™¤çš„å…ƒç´ </li>
</ul>
<h3 id="äº”ã€è§£ç­”å¼€ç¯‡é—®é¢˜"><a href="#äº”ã€è§£ç­”å¼€ç¯‡é—®é¢˜" class="headerlink" title="äº”ã€è§£ç­”å¼€ç¯‡é—®é¢˜"></a>äº”ã€è§£ç­”å¼€ç¯‡é—®é¢˜</h3><font color="#dd0000">JavaScript ä¸­ï¼Œ <code>JSArray</code> ç»§æ‰¿è‡ª <code>JSObject</code> ï¼Œæˆ–è€…è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå†…éƒ¨æ˜¯ä»¥ key-value å½¢å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ JavaScript ä¸­çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼ã€‚å®ƒæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼Œå¿«æ•°ç»„ä¸æ…¢æ•°ç»„ï¼Œåˆå§‹åŒ–ç©ºæ•°ç»„æ—¶ï¼Œä½¿ç”¨å¿«æ•°ç»„ï¼Œå¿«æ•°ç»„ä½¿ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå½“æ•°ç»„é•¿åº¦è¾¾åˆ°æœ€å¤§æ—¶ï¼Œ<code>JSArray</code> ä¼šè¿›è¡ŒåŠ¨æ€çš„æ‰©å®¹ï¼Œä»¥å­˜å‚¨æ›´å¤šçš„å…ƒç´ ï¼Œç›¸å¯¹æ…¢æ•°ç»„ï¼Œæ€§èƒ½è¦å¥½å¾—å¤šã€‚å½“æ•°ç»„ä¸­ <code>hole</code> å¤ªå¤šæ—¶ï¼Œä¼šè½¬å˜æˆæ…¢æ•°ç»„ï¼Œå³ä»¥å“ˆå¸Œè¡¨çš„æ–¹å¼ï¼ˆ key-value çš„å½¢å¼ï¼‰å­˜å‚¨æ•°æ®ï¼Œä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ </font>

<h4 id="å¿«æ•°ç»„ï¼ˆFast-Elementsï¼‰"><a href="#å¿«æ•°ç»„ï¼ˆFast-Elementsï¼‰" class="headerlink" title="å¿«æ•°ç»„ï¼ˆFast Elementsï¼‰"></a>å¿«æ•°ç»„ï¼ˆFast Elementsï¼‰</h4><font color="#dd0000"> å¿«æ•°ç»„æ˜¯ä¸€ç§çº¿æ€§çš„å­˜å‚¨æ–¹å¼ã€‚æ–°åˆ›å»ºçš„ç©ºæ•°ç»„ï¼Œé»˜è®¤çš„å­˜å‚¨æ–¹å¼æ˜¯å¿«æ•°ç»„ï¼Œå¿«æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„ï¼Œå¯ä»¥æ ¹æ®å…ƒç´ çš„å¢åŠ å’Œåˆ é™¤æ¥åŠ¨æ€è°ƒæ•´å­˜å‚¨ç©ºé—´å¤§å°ï¼Œå†…éƒ¨æ˜¯é€šè¿‡æ‰©å®¹å’Œæ”¶ç¼©æœºåˆ¶å®ç°ï¼Œé‚£æ¥çœ‹ä¸‹æºç ä¸­æ˜¯æ€ä¹ˆæ‰©å®¹å’Œæ”¶ç¼©çš„ã€‚  </font>

<h4 id="æ…¢æ•°ç»„ï¼ˆDictionary-Elementsï¼‰"><a href="#æ…¢æ•°ç»„ï¼ˆDictionary-Elementsï¼‰" class="headerlink" title="æ…¢æ•°ç»„ï¼ˆDictionary Elementsï¼‰"></a>æ…¢æ•°ç»„ï¼ˆDictionary Elementsï¼‰</h4><font color="#dd0000"> æ…¢æ•°ç»„æ˜¯ä¸€ç§<strong>å“ˆå¸Œè¡¨</strong>çš„å†…å­˜å½¢å¼ã€‚ä¸ç”¨å¼€è¾Ÿå¤§å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼ŒèŠ‚çœäº†å†…å­˜ï¼Œä½†æ˜¯ç”±äºéœ€è¦ç»´æŠ¤è¿™æ ·ä¸€ä¸ª HashTableï¼Œå…¶æ•ˆç‡ä¼šæ¯”å¿«æ•°ç»„ä½ã€‚  </font>

<p><br></p>
<blockquote>
<p><strong>å„æœ‰ä¼˜åŠ£</strong></p>
</blockquote>
<ul>
<li>å¿«æ•°ç»„å°±æ˜¯ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œç”³è¯·äº†å¤§å—è¿ç»­å†…å­˜ï¼Œæé«˜æ•ˆç‡ã€‚</li>
<li>æ…¢æ•°ç»„ä»¥æ—¶é—´æ¢ç©ºé—´ï¼Œä¸å¿…ç”³è¯·è¿ç»­çš„ç©ºé—´ï¼ŒèŠ‚çœäº†å†…å­˜ï¼Œä½†éœ€è¦ä»˜å‡ºæ•ˆç‡å˜å·®çš„ä»£ä»·ã€‚</li>
</ul>
<h4 id="æ‰©å±•ï¼šArrayBuffer"><a href="#æ‰©å±•ï¼šArrayBuffer" class="headerlink" title="æ‰©å±•ï¼šArrayBuffer"></a>æ‰©å±•ï¼šArrayBuffer</h4><p>JSåœ¨ES6ä¹Ÿæ¨å‡ºäº†å¯ä»¥æŒ‰ç…§éœ€è¦åˆ†é…è¿ç»­å†…å­˜çš„æ•°ç»„ï¼Œè¿™å°±æ˜¯ArrayBufferã€‚<br>ArrayBufferä¼šä»å†…å­˜ä¸­ç”³è¯·è®¾å®šçš„äºŒè¿›åˆ¶å¤§å°çš„ç©ºé—´ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç›´æ¥æ“ä½œå®ƒï¼Œéœ€è¦é€šè¿‡ArrayBufferæ„å»ºä¸€ä¸ªè§†å›¾ï¼Œé€šè¿‡è§†å›¾æ¥æ“ä½œè¿™ä¸ªå†…å­˜ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var bf = new ArrayBuffer(1024);</span><br></pre></td></tr></table></figure></p>
<p>è¿™è¡Œä»£ç å°±ç”³è¯·äº† 1kb çš„å†…å­˜åŒºåŸŸã€‚ä½†æ˜¯å¹¶ä¸èƒ½å¯¹ arrayBuffer ç›´æ¥æ“ä½œï¼Œéœ€è¦å°†å®ƒèµ‹ç»™ä¸€ä¸ªè§†å›¾æ¥æ“ä½œå†…å­˜ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Int32Array</span>(bf);</span><br></pre></td></tr></table></figure></p>
<p>è¿™è¡Œä»£ç åˆ›å»ºäº†æœ‰ç¬¦å·çš„32ä½çš„æ•´æ•°æ•°ç»„ï¼Œæ¯ä¸ªæ•°å  4 å­—èŠ‚ï¼Œé•¿åº¦ä¹Ÿå°±æ˜¯ 1024 / 4 = 256 ä¸ªã€‚</p>
<h3 id="å…­ã€æœ€åé™„èµ ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼ˆè…¾è®¯ï¼‰ï¼šæ•°ç»„æ‰å¹³åŒ–ã€å»é‡ã€æ’åº"><a href="#å…­ã€æœ€åé™„èµ ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼ˆè…¾è®¯ï¼‰ï¼šæ•°ç»„æ‰å¹³åŒ–ã€å»é‡ã€æ’åº" class="headerlink" title="å…­ã€æœ€åé™„èµ ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼ˆè…¾è®¯ï¼‰ï¼šæ•°ç»„æ‰å¹³åŒ–ã€å»é‡ã€æ’åº"></a>å…­ã€æœ€åé™„èµ ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼ˆè…¾è®¯ï¼‰ï¼šæ•°ç»„æ‰å¹³åŒ–ã€å»é‡ã€æ’åº</h3><p>å…³äº <code>Array</code> çš„å±æ€§ã€æ–¹æ³•è¿™é‡Œä¸å†åšä»‹ç»ï¼Œè¯¦çœ‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">MDN Array</a> ã€‚</p>
<p>é¢è¯•é¢˜ï¼š</p>
<blockquote>
<p>å·²çŸ¥å¦‚ä¸‹æ•°ç»„ï¼švar arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];</p>
</blockquote>
<blockquote>
<p>ç¼–å†™ä¸€ä¸ªç¨‹åºå°†æ•°ç»„æ‰å¹³åŒ–å»å¹¶é™¤å…¶ä¸­é‡å¤éƒ¨åˆ†æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå‡åºä¸”ä¸é‡å¤çš„æ•°ç»„</p>
</blockquote>
<p>ç­”æ¡ˆï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, [<span class="number">11</span>, <span class="number">12</span>, [<span class="number">12</span>, <span class="number">13</span>, [<span class="number">14</span>] ] ] ], <span class="number">10</span>]</span><br><span class="line"><span class="comment">// æ‰å¹³åŒ–</span></span><br><span class="line"><span class="keyword">let</span> flatArr = arr.flat(<span class="number">4</span>)</span><br><span class="line"><span class="comment">// å»é‡</span></span><br><span class="line"><span class="keyword">let</span> disArr = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(flatArr))</span><br><span class="line"><span class="comment">// æ’åº</span></span><br><span class="line"><span class="keyword">let</span> result = disArr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a-b</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span></span><br></pre></td></tr></table></figure></p>
<p>å…³äº Set è¯·æŸ¥é˜… <a href="https://github.com/LuNaHaiJiao/blog/issues/24" target="_blank" rel="noopener">Setã€WeakSetã€MapåŠWeakMap</a></p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><ul>
<li><p>åŸæ–‡è½¬è‡ª<a href="https://juejin.im/post/5e84ae366fb9a03c840d564f" target="_blank" rel="noopener">ä»Chrome V8æºç çœ‹JavaScriptæ•°ç»„</a></p>
</li>
<li><p><a href="https://juejin.im/post/5d80919b51882538036fc87d" target="_blank" rel="noopener">æ¢ç©¶JS V8å¼•æ“ä¸‹çš„â€œæ•°ç»„â€åº•å±‚å®ç°</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/26388217" target="_blank" rel="noopener">ä»Chromeæºç çœ‹JS Arrayçš„å®ç°</a></p>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/21/APPå”¤èµ·é‚£ç‚¹ç ´äº‹/" rel="next" title="APPå”¤èµ·é‚£ç‚¹ç ´äº‹">
                <i class="fa fa-chevron-left"></i> APPå”¤èµ·é‚£ç‚¹ç ´äº‹
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/05/03/SSRè¸©å‘é›†é”¦/" rel="prev" title="SSRè¸©å‘é›†é”¦">
                SSRè¸©å‘é›†é”¦ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/tx.jpg" alt="ææ–Œ">
            
              <p class="site-author-name" itemprop="name">ææ–Œ</p>
              <p class="site-description motion-element" itemprop="description">äººç”Ÿå¦‚é€†æ—…     æˆ‘äº¦æ˜¯è¡Œäºº</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">210</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç®€ä»‹"><span class="nav-number">1.</span> <span class="nav-text">ç®€ä»‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸€ã€æ•°ç»„ï¼ˆåŸºç¡€ï¼‰"><span class="nav-number">2.</span> <span class="nav-text">ä¸€ã€æ•°ç»„ï¼ˆåŸºç¡€ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#äºŒã€JavaScript-ä¸­ï¼Œæ•°ç»„å¯ä»¥ä¿å­˜ä¸åŒç±»å‹å€¼"><span class="nav-number">3.</span> <span class="nav-text">äºŒã€JavaScript ä¸­ï¼Œæ•°ç»„å¯ä»¥ä¿å­˜ä¸åŒç±»å‹å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸‰ã€JavaScript-ä¸­ï¼Œæ•°ç»„çš„å­˜å‚¨"><span class="nav-number">4.</span> <span class="nav-text">ä¸‰ã€JavaScript ä¸­ï¼Œæ•°ç»„çš„å­˜å‚¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-å¿«æ•°ç»„ï¼ˆFastElementsï¼‰"><span class="nav-number">4.1.</span> <span class="nav-text">1. å¿«æ•°ç»„ï¼ˆFastElementsï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰"><span class="nav-number">4.2.</span> <span class="nav-text">2. æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-ä»€ä¹ˆæ—¶å€™ä¼šä»-fast-è½¬å˜ä¸º-slow-å–ƒï¼Ÿ"><span class="nav-number">4.3.</span> <span class="nav-text">3. ä»€ä¹ˆæ—¶å€™ä¼šä» fast è½¬å˜ä¸º slow å–ƒï¼Ÿ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-ä»€ä¹ˆæ—¶å€™ä¼šä»-slow-è½¬å˜ä¸º-fast-å–ƒï¼Ÿ"><span class="nav-number">4.4.</span> <span class="nav-text">4. ä»€ä¹ˆæ—¶å€™ä¼šä» slow è½¬å˜ä¸º fast å–ƒï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å››ã€JavaScript-ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆFastElementsï¼‰"><span class="nav-number">5.</span> <span class="nav-text">å››ã€JavaScript ä¸­ï¼Œæ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹ï¼ˆFastElementsï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#äº”ã€è§£ç­”å¼€ç¯‡é—®é¢˜"><span class="nav-number">6.</span> <span class="nav-text">äº”ã€è§£ç­”å¼€ç¯‡é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å¿«æ•°ç»„ï¼ˆFast-Elementsï¼‰"><span class="nav-number">6.1.</span> <span class="nav-text">å¿«æ•°ç»„ï¼ˆFast Elementsï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ…¢æ•°ç»„ï¼ˆDictionary-Elementsï¼‰"><span class="nav-number">6.2.</span> <span class="nav-text">æ…¢æ•°ç»„ï¼ˆDictionary Elementsï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‰©å±•ï¼šArrayBuffer"><span class="nav-number">6.3.</span> <span class="nav-text">æ‰©å±•ï¼šArrayBuffer</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…­ã€æœ€åé™„èµ ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼ˆè…¾è®¯ï¼‰ï¼šæ•°ç»„æ‰å¹³åŒ–ã€å»é‡ã€æ’åº"><span class="nav-number">7.</span> <span class="nav-text">å…­ã€æœ€åé™„èµ ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼ˆè…¾è®¯ï¼‰ï¼šæ•°ç»„æ‰å¹³åŒ–ã€å»é‡ã€æ’åº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‚è€ƒé“¾æ¥ï¼š"><span class="nav-number">8.</span> <span class="nav-text">å‚è€ƒé“¾æ¥ï¼š</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ–Œ</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <!--
  	æè¿°ï¼šç‚¹å‡»çº¢å¿ƒ
  -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <!--
  	æè¿°ï¼šå¤åˆ¶ä»£ç 
  -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>


