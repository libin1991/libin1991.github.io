<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="LuckDay">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="LuckDay">
<meta property="og:description" content="Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LuckDay">
<meta name="twitter:description" content="Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>LuckDay - æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div class="sky">
	<div class="clouds_one"></div>
	<div class="clouds_two"></div>
	<div class="clouds_three"></div>
</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LuckDay</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/01/å¼ºå¤§çš„marginè´Ÿè¾¹è·/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/01/å¼ºå¤§çš„marginè´Ÿè¾¹è·/" itemprop="url">å¼ºå¤§çš„marginè´Ÿè¾¹è·</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-08-01T11:17:55+08:00">
                2018-08-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>cssä¸­çš„è´Ÿè¾¹è·(negative margin)æ˜¯å¸ƒå±€ä¸­çš„ä¸€ä¸ªå¸¸ç”¨æŠ€å·§ï¼Œåªè¦è¿ç”¨å¾—åˆç†å¸¸å¸¸ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚å¾ˆå¤šç‰¹æ®Šçš„csså¸ƒå±€æ–¹æ³•éƒ½ä¾èµ–äºè´Ÿè¾¹è·ï¼Œæ‰€ä»¥æŒæ¡å®ƒçš„ç”¨æ³•å¯¹äºå‰ç«¯çš„åŒå­¦æ¥è¯´ï¼Œé‚£æ˜¯å¿…é¡»çš„ã€‚æœ¬æ–‡éå¸¸åŸºç¡€ï¼Œè€é¸Ÿå¯ä»¥ç•¥è¿‡ã€‚</p>
<p>å·¦å’Œå³çš„è´Ÿè¾¹è·å¯¹å…ƒç´ å®½åº¦çš„å½±å“</p>
<p>è´Ÿè¾¹è·ä¸ä»…èƒ½å½±å“å…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®ï¼Œè¿˜èƒ½å¢åŠ å…ƒç´ çš„å®½åº¦ï¼</p>
<p>è¿™ä¸ªä½œç”¨èƒ½å®ç°çš„å‰ææ˜¯ï¼šè¯¥å…ƒç´ æ²¡æœ‰è®¾å®šwidthå±æ€§ï¼ˆå½“ç„¶width:autoæ˜¯å¯ä»¥çš„ï¼‰ã€‚</p>
<p>æ¯”å¦‚ä¸‹å›¾çš„é»‘ç°è‰²éƒ¨åˆ†æ˜¯ä¸€ä¸ªå—çŠ¶å…ƒç´ ï¼Œå®ƒæ²¡æœ‰è®¾å®šå®½åº¦ã€‚å®ƒè¢«åŒ…è£¹åœ¨ä¸€ä¸ªå®½åº¦ä¸º400px,ä¸”æ°´å¹³å±…ä¸­çš„çˆ¶å…ƒç´ ä¸­ã€‚</p>
<p><img src="https://pic3.zhimg.com/v2-d7053213fb80015b97e243fae474124a_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-d7053213fb80015b97e243fae474124a_hd.jpg" alt=""></p>
<p>ç°åœ¨ç»™è¿™ä¸ªå…ƒç´ çš„è®¾ä¸€ä¸ªmargin-right:-100px;</p>
<p><img src="https://pic3.zhimg.com/v2-a3037b974494cdbe0c92d4c90af69f80_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-a3037b974494cdbe0c92d4c90af69f80_hd.jpg" alt=""></p>
<p>æˆ‘ä»¬çœ‹åˆ°å®ƒçš„å®½åº¦çš„ç¡®å˜é•¿100px;ç„¶åå†ç»™å®ƒè®¾ä¸€ä¸ªmargin-left:-100px;</p>
<p><img src="https://pic1.zhimg.com/v2-444d4e67d5804bfcbcd4991948889bdb_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-444d4e67d5804bfcbcd4991948889bdb_hd.jpg" alt=""></p>
<p>æˆ‘ä»¬çœ‹åˆ°å®ƒå˜å¾—æ›´å®½äº†ã€‚</p>
<p>è´Ÿçš„marginä¼šæ”¹å˜å…ƒç´ çš„å®½åº¦ï¼Œè¿™çš„ç¡®å¾ˆè®©äººè´¹è§£ï¼Œå¦‚æœè¯´è´Ÿè¾¹è·ä¼šæ”¹å˜å…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„è¯ï¼Œé‚£æ”¹å˜å®½åº¦è¿™ç§ç°è±¡è¿˜çœŸçš„è›®è®©äººä¸å¯æ€è®®çš„ã€‚</p>
<p>é‚£è¿™è´§æœ‰ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿæˆ‘å°±ä¸¾ä¸€ä¸ªä¾‹å­å§ã€‚<br><img src="https://pic2.zhimg.com/v2-ee54fb10005457120458e7823fc83d29_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-ee54fb10005457120458e7823fc83d29_hd.jpg" alt=""></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh&quot;&gt;



    &lt;head&gt;
        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
        &lt;title&gt;æµ®åŠ¨ä¸¤ç«¯å¯¹é½&lt;/title&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            ul,
            li {
                margin: 0;
                padding: 0;
            }

            h2 {
                clear: both;
                font-size: 1.2em;
            }

            .justify {
                width: 320px;
                /* 1è¡Œ3ä¸ªliï¼Œliä¹‹é—´è·ç¦»10px = 100px*3 + 10px*2 */
                overflow: hidden;
                margin: 10px;
                border: 1px solid #999999;
            }

            .justify ul {
                width: 330px;
                /* å¯å®¹çº³ä¸‹3åˆ—çš„å®½åº¦ */
                margin-bottom: -10px;
                /* éšè—æ‰æœ€ä¸‹é¢ä¸€è¡Œçš„margin-bottom */
                overflow: hidden;
                zoom: 1;
                /* è§¦å‘IEçš„Layout */
            }

            *+html .justify ul {
                margin-bottom: 0;
                /* é’ˆå¯¹IE7ä¸­æœ€å1è¡Œliçš„margin-bottomå¤±æ•ˆ */
            }

            .justify li {
                display: inline;
                float: left;
                list-style: none;
                width: 100px;
                height: 100px;
                margin: 0 10px 10px 0;
                background: #EEEEEE;
            }

            .margin ul {
                width: auto;
                margin: 0 -10px -10px 0;
            }

            .col-2 {
                width: 210px;
            }

            .col-4 {
                width: 430px;
            }
        &lt;/style&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;div&gt;
            &lt;a href=&quot;http://www.ddcat.net/blog/?p=1199&quot; title=&quot;å›åˆ°çŒ«çªBlog&quot;&gt;å›åˆ°çŒ«çªBlog&lt;/a&gt;
        &lt;/div&gt;
        &lt;h1&gt;æµ®åŠ¨ä¸¤ç«¯å¯¹é½&lt;/h1&gt;
        &lt;h2&gt;ulå®šå®½&lt;/h2&gt;
        &lt;div class=&quot;justify&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;ä¸­é—´&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;ä¸­é—´&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;ä¸­é—´&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        &lt;h2&gt;ulä½¿ç”¨è´Ÿmarginå€¼&lt;/h2&gt;
        &lt;div class=&quot;justify margin&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;ä¸­é—´&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;ä¸­é—´&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;ä¸­é—´&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        &lt;h2&gt;ä¸¤åˆ—&lt;/h2&gt;
        &lt;div class=&quot;justify margin col-2&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
                &lt;li&gt;é å·¦è¾¹&lt;/li&gt;
                &lt;li&gt;é å³è¾¹&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        &lt;h2&gt;å››åˆ—&lt;/h2&gt;
        &lt;div class=&quot;justify margin col-4&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;1&lt;/li&gt;
                &lt;li&gt;2&lt;/li&gt;
                &lt;li&gt;3&lt;/li&gt;
                &lt;li&gt;4&lt;/li&gt;
                &lt;li&gt;5&lt;/li&gt;
                &lt;li&gt;6&lt;/li&gt;
                &lt;li&gt;7&lt;/li&gt;
                &lt;li&gt;8&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;a href=&quot;http://www.ddcat.net/blog/?p=1199&quot; title=&quot;å›åˆ°çŒ«çªBlog&quot;&gt;å›åˆ°çŒ«çªBlog&lt;/a&gt;
        &lt;/div&gt;
    &lt;/body&gt;

&lt;/html&gt;
</code></pre><p><img src="https://pic2.zhimg.com/v2-5c529ec117f663aaacc2030c14423321_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-5c529ec117f663aaacc2030c14423321_hd.jpg" alt=""><img src="https://pic3.zhimg.com/v2-3255d3a67bca63a51e1407f982e2432b_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-3255d3a67bca63a51e1407f982e2432b_hd.jpg" alt=""><br>ä¸€ä¸ªè´Ÿçš„margin-right,ç›¸å½“äºæŠŠulçš„å®½åº¦å¢åŠ äº†10px.</p>
<p>è´Ÿè¾¹è·å¯¹æµ®åŠ¨å…ƒç´ çš„å½±å“</p>
<p>è´Ÿè¾¹è·å¯¹æµ®åŠ¨å…ƒç´ çš„å½±å“ä¸è´Ÿè¾¹è·å¯¹æ–‡æ¡£æµä¸­å…ƒç´ çš„å½±å“å…¶å®æ˜¯å·®ä¸å¤šçš„ã€‚æ–‡æ¡£æµä¸­å…ƒç´ çš„ä½ç½®ç”±æ–‡æ¡£æµçš„èµ°å‘å†³å®šï¼Œæµ®åŠ¨çš„å…ƒç´ ä¹Ÿå¯ä»¥çœ‹æˆæœ‰ä¸€ä¸ªâ€œæµ®åŠ¨æµâ€å­˜åœ¨ï¼Œä¸è¿‡æµ®åŠ¨æµæ—¢å¯ä»¥å‘å·¦ï¼Œä¹Ÿå¯ä»¥å‘å³ã€‚</p>
<p>æ¯”å¦‚ä¸‹å›¾æ˜¯ä¸‰ä¸ªå‘å·¦æµ®åŠ¨çš„å…ƒç´ ï¼Œå®½é«˜éƒ½æ˜¯100pxï¼š</p>
<p><img src="https://pic2.zhimg.com/v2-1de5e1221b518a74b0606c221cd421f1_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-1de5e1221b518a74b0606c221cd421f1_hd.jpg" alt=""></p>
<p>ç°åœ¨æŠŠå®ƒä»¬éƒ½è®¾ä¸€ä¸ªmargin-right:-50px; ç„¶åä¼šå˜æˆè¿™æ ·å­ï¼š</p>
<p><img src="https://pic4.zhimg.com/v2-b0b46b0eff5e6f19a4addafe0d670e85_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-b0b46b0eff5e6f19a4addafe0d670e85_hd.jpg" alt=""></p>
<p>æˆ‘ä»¬çœ‹åˆ°åé¢çš„å…ƒç´ å åˆ°äº†å‰é¢çš„å…ƒç´ ä¸Šã€‚</p>
<p>å†çœ‹ä¸‹é¢çš„å›¾ï¼š</p>
<p><img src="https://pic3.zhimg.com/v2-21b3ac21b68d64bdb604b825d00343ce_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-21b3ac21b68d64bdb604b825d00343ce_hd.jpg" alt=""></p>
<p>æˆ‘ä»¬æŠŠæµè§ˆå™¨ç¼©å°äº†ï¼Œç„¶åå› ä¸ºå®½åº¦ä¸å¤Ÿï¼Œå…ƒç´ 3æ‰ä¸‹æ¥äº†ã€‚æˆ‘ä»¬ç»™å…ƒç´ 3è®¾ä¸€ä¸ªmargin-left:-80px;çœ‹çœ‹ä¼šæ€ä¹ˆæ ·</p>
<p><img src="https://pic1.zhimg.com/v2-ee169d733bb4ce86b2c42de5ebf61bb7_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-ee169d733bb4ce86b2c42de5ebf61bb7_hd.jpg" alt=""></p>
<p>è¿™æ—¶æˆ‘ä»¬çœ‹åˆ°å…ƒç´ 3ä¸Šå»äº†ï¼Œè€Œä¸”è¿˜è¦†ç›–äº†å…ƒç´ 2çš„ä¸€éƒ¨åˆ†ã€‚ç»§ç»­å…ƒç´ 3è®¾ä¸ºmargin-left:-100px</p>
<p><img src="https://pic4.zhimg.com/v2-73ff48691bcf79125064218d71d6134f_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-73ff48691bcf79125064218d71d6134f_hd.jpg" alt=""></p>
<p>è¿™æ—¶å…ƒç´ 3å®Œå…¨è¦†ç›–ä½äº†å…ƒç´ 2,å½“å…ƒç´ 3è®¾ä¸ºï¼šmargin-left:-200pxæ—¶ï¼š</p>
<p><img src="https://pic4.zhimg.com/v2-fcc5dd42f3e8df550341c5af6a00fcfb_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-fcc5dd42f3e8df550341c5af6a00fcfb_hd.jpg" alt=""></p>
<p>æˆ‘ä»¬çœ‹åˆ°å…ƒç´ 3ç»§ç»­å‘å·¦ç§»åŠ¨å¹¶è¦†ç›–ä½äº†å…ƒç´ 1ã€‚</p>
<p>ç°åœ¨æƒ³å¿…å¤§å®¶éƒ½æ˜ç™½äº†è´Ÿè¾¹è·å¯¹æµ®åŠ¨å…ƒç´ ä½ç½®çš„å½±å“äº†å§ã€‚æ‰€ä»¥é‚£äº›è¯´å¾—å¾ˆå¥½å¬çš„ä»€ä¹ˆåœ£æ¯å¸ƒå±€ã€åŒé£ç¿¼å¸ƒå±€å•Šä»€ä¹ˆçš„ï¼Œéƒ½æ˜¯åˆ©ç”¨è¿™ä¸ªåŸç†å®ç°çš„ã€‚å°±æ˜¯æŸä¸ªå…ƒç´ è™½ç„¶æ˜¯å†™åœ¨äº†åé¢ï¼Œä½†å¯ä»¥é€šè¿‡è´Ÿè¾¹è·è®©å®ƒåœ¨æµè§ˆå™¨æ˜¾ç¤ºçš„æ—¶å€™æ˜¯åœ¨å‰é¢çš„ã€‚è¿™ä¸ªä»¥åå¯ä»¥å†æ…¢æ…¢è®²ã€‚</p>
<p>è´Ÿè¾¹è·å¯¹ç»å¯¹å®šä½å…ƒç´ çš„å½±å“</p>
<p>ç»å¯¹å®šä½çš„å…ƒç´ å®šä¹‰çš„topã€rightã€bottomã€leftç­‰å€¼æ˜¯å…ƒç´ è‡ªèº«çš„è¾¹ç•Œåˆ°æœ€è¿‘çš„å·²å®šä½çš„ç¥–å…ˆå…ƒç´ çš„è·ç¦»ï¼Œè¿™ä¸ªå…ƒç´ è‡ªèº«çš„è¾¹ç•ŒæŒ‡çš„å°±æ˜¯marginå®šä¹‰çš„è¾¹ç•Œï¼Œæ‰€ä»¥ï¼Œå¦‚æœmarginä¸ºæ­£çš„æ—¶å€™ï¼Œé‚£å®ƒçš„è¾¹ç•Œæ˜¯å‘å¤–æ‰©çš„ï¼Œå¦‚æœmarginä¸ºè´Ÿçš„æ—¶å€™ï¼Œåˆ™å®ƒçš„è¾¹ç•Œæ˜¯å‘é‡Œæ”¶çš„ã€‚åˆ©ç”¨è¿™ç‚¹ï¼Œå°±æœ‰äº†ç»å…¸çš„åˆ©ç”¨ç»å¯¹å®šä½æ¥å±…ä¸­çš„æ–¹æ³•ï¼š</p>
<p><img src="https://pic4.zhimg.com/v2-dffb7a1006cc4f494125e196595e79db_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-dffb7a1006cc4f494125e196595e79db_hd.jpg" alt=""></p>
<p>çœ‹ä¸‹æ•ˆæœï¼š</p>
<p><img src="https://pic3.zhimg.com/v2-61da203d81eb5f79ac55ca7811a35ff2_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-61da203d81eb5f79ac55ca7811a35ff2_hd.jpg" alt=""></p>
<p>ä½†è¯¥æ–¹æ³•çš„ç¼ºç‚¹æ˜¯å¿…é¡»è¦çŸ¥é“è¦å±…ä¸­å…ƒç´ çš„é«˜åº¦å’Œå®½åº¦ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/31/ä¸ºä»€ä¹ˆRedux-éœ€è¦-reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/31/ä¸ºä»€ä¹ˆRedux-éœ€è¦-reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ/" itemprop="url">ä¸ºä»€ä¹ˆRedux éœ€è¦ reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-07-31T00:13:40+08:00">
                2018-07-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="ä¸ºä»€ä¹ˆRedux-éœ€è¦-reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆRedux-éœ€è¦-reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆRedux éœ€è¦ reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆRedux éœ€è¦ reducersæ˜¯çº¯å‡½æ•°ï¼Ÿ</h4><p> è¿™åˆæ˜¯ä¸€ä¸ªå¾ˆå‰å®³çš„é—®é¢˜äº†ï¼Œä½¿ç”¨Reduxçš„éƒ½çŸ¥é“ï¼Œreducersä¼šæ¥æ”¶ä¸Šä¸€ä¸ªstateå’Œactionä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„stateï¼Œè¿™ä¸ªæ–°çš„stateä¸èƒ½æ˜¯åœ¨åŸæ¥stateåŸºç¡€ä¸Šçš„ä¿®æ”¹ã€‚æ‰€ä»¥ç»å¸¸å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">return Object.assign(...)</span><br><span class="line">//æˆ–è€…----------</span><br><span class="line">return &#123;...state,xx:xxx&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä½œç”¨ï¼Œéƒ½æ˜¯ä¸ºäº†è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆreducersè¦æ±‚æ˜¯çº¯å‡½æ•°(è¿”å›å…¨æ–°çš„å¯¹è±¡ï¼Œä¸å½±å“åŸå¯¹è±¡)?</strong>  â€“æŸé¢è¯•å®˜</p>
<h3 id="çº¯å‡½æ•°"><a href="#çº¯å‡½æ•°" class="headerlink" title="çº¯å‡½æ•°"></a>çº¯å‡½æ•°</h3><p>ä»æœ¬è´¨ä¸Šè®²ï¼Œçº¯å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼šä¸ä¿®æ”¹å‡½æ•°çš„è¾“å…¥å€¼ï¼Œä¾èµ–äºå¤–éƒ¨çŠ¶æ€ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼ŒDOMå’Œå…¨å±€å˜é‡ï¼‰ï¼ŒåŒæ—¶å¯¹äºä»»ä½•ç›¸åŒçš„è¾“å…¥æœ‰ç€ç›¸åŒçš„è¾“å‡ºç»“æœã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢çš„addå‡½æ•°ä¸ä¿®æ”¹å˜é‡aæˆ–bï¼ŒåŒæ—¶ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥å§‹ç»ˆè¿”å›ç›¸åŒçš„ç»“æœã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const add = (a,b) =&gt; &#123;a + b&#125;;</span><br></pre></td></tr></table></figure></p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œç»“æœå¯¹aã€bæ²¡æœ‰ä»»ä½•å½±å“ï¼Œå›å¤´å»çœ‹reducerï¼Œå®ƒç¬¦åˆçº¯å‡½æ•°çš„æ‰€æœ‰ç‰¹å¾ï¼Œæ‰€ä»¥å°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°<br>ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯çº¯å‡½æ•°?<br>å…ˆå‘Šè¯‰ä½ ç»“æœå§ï¼Œå¦‚æœåœ¨reducerä¸­ï¼Œåœ¨åŸæ¥çš„stateä¸Šè¿›è¡Œæ“ä½œï¼Œå¹¶è¿”å›çš„è¯ï¼Œå¹¶ä¸ä¼šè®©Reacté‡æ–°æ¸²æŸ“ã€‚ å®Œå…¨ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼<br>æ¥ä¸‹æ¥çœ‹ä¸‹Reduxçš„æºç ï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/8/22/165609de895ae1ae?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt=""><br>Reduxæ¥æ”¶ä¸€ä¸ªç»™å®šçš„stateï¼ˆå¯¹è±¡ï¼‰ï¼Œç„¶åé€šè¿‡å¾ªç¯å°†stateçš„æ¯ä¸€éƒ¨åˆ†ä¼ é€’ç»™æ¯ä¸ªå¯¹åº”çš„reducerã€‚å¦‚æœæœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ï¼Œreducerå°†è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å¦‚æœä¸å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œreducerå°†è¿”å›æ—§çš„stateã€‚<br>Reduxåªé€šè¿‡æ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªå¯¹è±¡çš„å­˜å‚¨ä½ç½®æ¥æ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒã€‚å¦‚æœä½ åœ¨reducerå†…éƒ¨ç›´æ¥ä¿®æ”¹æ—§çš„stateå¯¹è±¡çš„å±æ€§å€¼ï¼Œé‚£ä¹ˆæ–°çš„stateå’Œæ—§çš„stateå°†éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤Reduxè®¤ä¸ºæ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œè¿”å›çš„stateå°†ä¸ºæ—§çš„stateã€‚<br>å¥½äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»æºç çš„è§’åº¦æ¥è®²ï¼Œreduxè¦æ±‚å¼€å‘è€…å¿…é¡»è®©æ–°çš„stateæ˜¯å…¨æ–°çš„å¯¹è±¡ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆéè¦è¿™ä¹ˆéº»çƒ¦å¼€å‘è€…å‘¢ï¼Ÿ<br>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼šå°è¯•æ¯”è¾ƒaå’Œbæ˜¯å¦ç›¸åŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123;</span><br><span class="line">    name: &apos;jack&apos;,</span><br><span class="line">    friend: [&apos;sam&apos;,&apos;xiaoming&apos;,&apos;cunsi&apos;],</span><br><span class="line">    years: 12,</span><br><span class="line">    ...//çœç•¥né¡¹ç›®</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">var b = &#123;</span><br><span class="line">    name: &apos;jack&apos;,</span><br><span class="line">    friend: [&apos;sam&apos;,&apos;xiaoming&apos;,&apos;cunsi&apos;],</span><br><span class="line">    years: 13,</span><br><span class="line">    ...//çœç•¥né¡¹ç›®</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p> æ€è·¯æ˜¯æ€æ ·çš„ï¼Ÿæˆ‘ä»¬éœ€è¦éå†å¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡çš„å±æ€§æ˜¯æ•°ç»„ï¼Œè¿˜éœ€è¦è¿›è¡Œé€’å½’éå†ï¼Œå»çœ‹å†…å®¹æ˜¯å¦ä¸€è‡´ã€æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚ è¿™å¸¦æ¥çš„æ€§èƒ½æŸè€—æ˜¯éå¸¸å·¨å¤§çš„ã€‚ æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Ÿ<br>æœ‰ï¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ¥ä¸Šé¢çš„ä¾‹å­</span><br><span class="line">a === b  //false</span><br></pre></td></tr></table></figure></p>
<p> æˆ‘ä¸è¦è¿›è¡Œæ·±åº¦æ¯”è¾ƒï¼Œåªæ˜¯æµ…æ¯”è¾ƒï¼Œå¼•ç”¨å€¼ä¸ä¸€æ ·(ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡),é‚£å°±æ˜¯ä¸ä¸€æ ·çš„ã€‚ è¿™å°±æ˜¯reduxçš„reducerå¦‚æ­¤è®¾è®¡çš„åŸå› äº†</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/26/CSS-deferå’Œasyncçš„åŒºåˆ«/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/26/CSS-deferå’Œasyncçš„åŒºåˆ«/" itemprop="url">CSS deferå’Œasyncçš„åŒºåˆ«</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-07-26T22:46:19+08:00">
                2018-07-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å…ˆæ¥è¯•ä¸ªä¸€å¥è¯è§£é‡Šä»¨ï¼Œå½“æµè§ˆå™¨ç¢°åˆ° script è„šæœ¬çš„æ—¶å€™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>æ²¡æœ‰ defer æˆ– asyncï¼Œæµè§ˆå™¨ä¼šç«‹å³åŠ è½½å¹¶æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œâ€œç«‹å³â€æŒ‡çš„æ˜¯åœ¨æ¸²æŸ“è¯¥ script æ ‡ç­¾ä¹‹ä¸‹çš„æ–‡æ¡£å…ƒç´ ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç­‰å¾…åç»­è½½å…¥çš„æ–‡æ¡£å…ƒç´ ï¼Œè¯»åˆ°å°±åŠ è½½å¹¶æ‰§è¡Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=&quot;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>æœ‰ asyncï¼ŒåŠ è½½å’Œæ¸²æŸ“åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹å°†å’Œ script.js çš„åŠ è½½ä¸æ‰§è¡Œå¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script defer src=&quot;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>æœ‰ deferï¼ŒåŠ è½½åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹å°†å’Œ script.js çš„åŠ è½½å¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ï¼Œä½†æ˜¯ script.js çš„æ‰§è¡Œè¦åœ¨æ‰€æœ‰å…ƒç´ è§£æå®Œæˆä¹‹åï¼ŒDOMContentLoaded äº‹ä»¶è§¦å‘ä¹‹å‰å®Œæˆã€‚</p>
<p>ç„¶åä»å®ç”¨è§’åº¦æ¥è¯´å‘¢ï¼Œé¦–å…ˆæŠŠæ‰€æœ‰è„šæœ¬éƒ½ä¸¢åˆ°  ä¹‹å‰æ˜¯æœ€ä½³å®è·µï¼Œå› ä¸ºå¯¹äºæ—§æµè§ˆå™¨æ¥è¯´è¿™æ˜¯å”¯ä¸€çš„ä¼˜åŒ–é€‰æ‹©ï¼Œæ­¤æ³•å¯ä¿è¯éè„šæœ¬çš„å…¶ä»–ä¸€åˆ‡å…ƒç´ èƒ½å¤Ÿä»¥æœ€å¿«çš„é€Ÿåº¦å¾—åˆ°åŠ è½½å’Œè§£æã€‚</p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€å¼ å›¾å’¯ï¼š</p>
<p><img src="https://pic3.zhimg.com/v2-256ddc294b88b9a082b3b2aafe193728_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-256ddc294b88b9a082b3b2aafe193728_hd.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/v2-244a0c3246f534e96ce88124e3978261_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-244a0c3246f534e96ce88124e3978261_hd.jpg" alt=""></p>
<h2 id="è“è‰²çº¿ä»£è¡¨ç½‘ç»œè¯»å–ï¼Œçº¢è‰²çº¿ä»£è¡¨æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¿©éƒ½æ˜¯é’ˆå¯¹è„šæœ¬çš„ï¼›ç»¿è‰²çº¿ä»£è¡¨-HTML-è§£æã€‚ã€JS-è§£æä¼šé˜»å¡HTMLè§£æã€‘"><a href="#è“è‰²çº¿ä»£è¡¨ç½‘ç»œè¯»å–ï¼Œçº¢è‰²çº¿ä»£è¡¨æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¿©éƒ½æ˜¯é’ˆå¯¹è„šæœ¬çš„ï¼›ç»¿è‰²çº¿ä»£è¡¨-HTML-è§£æã€‚ã€JS-è§£æä¼šé˜»å¡HTMLè§£æã€‘" class="headerlink" title="è“è‰²çº¿ä»£è¡¨ç½‘ç»œè¯»å–ï¼Œçº¢è‰²çº¿ä»£è¡¨æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¿©éƒ½æ˜¯é’ˆå¯¹è„šæœ¬çš„ï¼›ç»¿è‰²çº¿ä»£è¡¨ HTML è§£æã€‚ã€JS è§£æä¼šé˜»å¡HTMLè§£æã€‘"></a>è“è‰²çº¿ä»£è¡¨ç½‘ç»œè¯»å–ï¼Œçº¢è‰²çº¿ä»£è¡¨æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¿©éƒ½æ˜¯é’ˆå¯¹è„šæœ¬çš„ï¼›ç»¿è‰²çº¿ä»£è¡¨ HTML è§£æã€‚ã€JS è§£æä¼šé˜»å¡HTMLè§£æã€‘</h2><p>æ­¤å›¾å‘Šè¯‰æˆ‘ä»¬ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š</p>
<ol>
<li>defer å’Œ async åœ¨ç½‘ç»œè¯»å–ï¼ˆä¸‹è½½ï¼‰è¿™å—å„¿æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼ˆç›¸è¾ƒäº HTML è§£æï¼‰</li>
<li>å®ƒä¿©çš„å·®åˆ«åœ¨äºè„šæœ¬ä¸‹è½½å®Œä¹‹åä½•æ—¶æ‰§è¡Œï¼Œæ˜¾ç„¶ defer æ˜¯æœ€æ¥è¿‘æˆ‘ä»¬å¯¹äºåº”ç”¨è„šæœ¬åŠ è½½å’Œæ‰§è¡Œçš„è¦æ±‚çš„</li>
<li>å…³äº deferï¼Œæ­¤å›¾æœªå°½ä¹‹å¤„åœ¨äºå®ƒæ˜¯æŒ‰ç…§åŠ è½½é¡ºåºæ‰§è¡Œè„šæœ¬çš„ï¼Œè¿™ä¸€ç‚¹è¦å–„åŠ åˆ©ç”¨</li>
<li>async åˆ™æ˜¯ä¸€ä¸ªä¹±åºæ‰§è¡Œçš„ä¸»ï¼Œåæ­£å¯¹å®ƒæ¥è¯´è„šæœ¬çš„åŠ è½½å’Œæ‰§è¡Œæ˜¯ç´§ç´§æŒ¨ç€çš„ï¼Œæ‰€ä»¥ä¸ç®¡ä½ å£°æ˜çš„é¡ºåºå¦‚ä½•ï¼Œåªè¦å®ƒåŠ è½½å®Œäº†å°±ä¼šç«‹åˆ»æ‰§è¡Œ</li>
<li>ä»”ç»†æƒ³æƒ³ï¼Œasync å¯¹äºåº”ç”¨è„šæœ¬çš„ç”¨å¤„ä¸å¤§ï¼Œå› ä¸ºå®ƒå®Œå…¨ä¸è€ƒè™‘ä¾èµ–ï¼ˆå“ªæ€•æ˜¯æœ€ä½çº§çš„é¡ºåºæ‰§è¡Œï¼‰ï¼Œä¸è¿‡å®ƒå¯¹äºé‚£äº›å¯ä»¥ä¸ä¾èµ–ä»»ä½•è„šæœ¬æˆ–ä¸è¢«ä»»ä½•è„šæœ¬ä¾èµ–çš„è„šæœ¬æ¥è¯´å´æ˜¯éå¸¸åˆé€‚çš„ï¼Œæœ€å…¸å‹çš„ä¾‹å­ï¼šGoogle Analytics</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/15/nodejså‡ ç§æ–‡ä»¶è·¯å¾„åŠpathæ¨¡å—/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/15/nodejså‡ ç§æ–‡ä»¶è·¯å¾„åŠpathæ¨¡å—/" itemprop="url">Node.jså‡ ç§æ–‡ä»¶è·¯å¾„åŠpathæ¨¡å—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-07-15T22:24:49+08:00">
                2018-07-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘åœ¨å†™ä¸€ç¯‡weexçš„webpacké…ç½®ï¼Œåˆšåˆšè¸©å‘äº†ï¼Œweekpackä¸­ä¼šç”¨åˆ°pathæ¨¡å—ï¼Œè€Œå¯¹äºè¿™ä¸ªæ¨¡å—ï¼Œæˆ‘æƒ³æŠ½ç¦»å‡ºæ¥çœ‹ä¸€ä¸‹ï¼Œå› ä¸ºè¿™ä¸ªç”¨åˆ°çš„è¿˜æ˜¯æ¯”è¾ƒå¤šçš„,å–œæ¬¢çš„æœ‹å‹å¯ä»¥ç‚¹ä¸ªå–œæ¬¢ï¼Œæˆ–è€…å»æˆ‘çš„<a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Flaihuamin%252FJS-total" target="_blank" rel="noopener">github</a>ç‚¹ä¸ªstarä¹Ÿè¡Œï¼Œè°¢è°¢æ”¯æŒï¼Œä¸¾èµ·å°æ‰‹æŒ‡ç‚¹ä¸€ç‚¹å“¦ğŸ˜¯ï¼Œå†™çš„ä¸å¯¹çš„åœ°æ–¹ï¼Œè¯„è®ºæ‹ç –ï¼Œè°¢è°¢ã€‚</p>
<h2 id="nodeä¸­çš„è·¯å¾„åˆ†ç±»"><a href="#nodeä¸­çš„è·¯å¾„åˆ†ç±»" class="headerlink" title="nodeä¸­çš„è·¯å¾„åˆ†ç±»"></a>nodeä¸­çš„è·¯å¾„åˆ†ç±»</h2><p>nodeä¸­çš„è·¯å¾„å¤§è‡´åˆ†5ç±»ï¼Œdirname,filename,process.cwd(),./,../,å…¶ä¸­å‰ä¸‰ä¸ªéƒ½æ˜¯ç»å¯¹è·¯å¾„</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•ç‚¹çš„ä¾‹å­</p>
<p>å‡å¦‚ï¼Œæˆ‘æœ‰ä¸€ä¸ªæ–‡ä»¶çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>editor/
  - dist/
  - src/
      - task.js
</code></pre><p>ç„¶åæˆ‘ä»¬åœ¨task.jsæ–‡ä»¶ä¸­å†™å…¥ä¸€ä¸‹ä»£ç </p>
<pre><code>const path = require(&apos;path&apos;);
console.log(__dirname);
console.log(__filename);
console.log(process.cwd());
console.log(path.resolve(&apos;./&apos;));
</code></pre><p>åœ¨editorç›®å½•ä¸‹è¿è¡Œnode src/task.jsï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code>/Users/laihuamin/Documents/richEditor/editor/src
/Users/laihuamin/Documents/richEditor/editor/src/task.js
/Users/laihuamin/Documents/richEditor/editor
/Users/laihuamin/Documents/richEditor/editor
</code></pre><p>ç„¶åæˆ‘ä»¬æœ‰å¯ä»¥åœ¨srcç›®å½•ä¸‹è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œnode task.js,è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code>/Users/laihuamin/Documents/richEditor/editor/src
/Users/laihuamin/Documents/richEditor/editor/src/task.js
/Users/laihuamin/Documents/richEditor/editor/src
/Users/laihuamin/Documents/richEditor/editor/src
</code></pre><p>å¯¹æ¯”ä¸¤ä¸ªè¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å½’çº³ä¸€ä¸‹å‡ ç‚¹ï¼š</p>
<p>1.<strong>dirname:è¿”å›çš„æ˜¯è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„ä½ç½®<br>2.</strong>filename:ä½ è¿è¡Œå‘½ä»¤ä»£è¡¨çš„æ˜¯æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œä¸ç®¡ä½ è¿è¡Œä»€ä¹ˆå‘½ä»¤ï¼Œéƒ½æ˜¯æŒ‡å‘æ–‡ä»¶<br>3.process.cwd():ä½ è¿è¡Œnodeå‘½ä»¤æ‰€åœ¨æ–‡ä»¶å¤¹çš„ä½ç½®ï¼Œæ¯”å¦‚ä½ åœ¨srcç›®å½•ä¸‹è¿è¡Œï¼Œé‚£ä¹ˆå°±æ˜¯è¾“å‡ºåˆ°srcä¸ºæ­¢ï¼Œä¸‹é¢çš„åŒç†ã€‚</p>
<h2 id="path"><a href="#path" class="headerlink" title="path"></a>path</h2><p>è®²å®Œå‰é¢ä¸‰ä¸ªç»å¯¹è·¯å¾„ï¼Œæˆ‘å€’æ˜¯æŒºæƒ³æ¥èŠèŠpathè¿™ä¸ªæ¨¡å—çš„ï¼Œè¿™ä¸ªnodeæ¨¡å—åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰åº”ç”¨ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ï¼ŒæŒæ¡ä»–ï¼Œå¯¹æˆ‘ä»¬ä»¥åçš„å‘å±•æ›´æœ‰åˆ©ï¼Œä¸ç”¨æ¯æ¬¡çœ‹webpackçš„é…ç½®æ–‡ä»¶è¿˜è¦å»æŸ¥è¯¢ä¸€ä¸‹è¿™ä¸ªapiæ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œå¾ˆå½±å“æˆ‘ä»¬çš„æ•ˆç‡</p>
<p><a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fnodejs.org%252Fapi%252Fpath.html" target="_blank" rel="noopener">nodeJS/path</a></p>
<p>ä¸Šé¢é‚£ä¸ªç½‘ç«™æœ‰è¯¦ç»†çš„apiï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œä¸ç”¨éƒ½æŒæ¡å§ï¼Œæˆ‘å°±è®²å‡ ä¸ªæˆ‘é‡åˆ°è¿‡çš„ï¼Œæˆ‘è§‰å¾—webpackç­‰å·¥ç¨‹é…ç½®ä¸­ä¼šç”¨åˆ°çš„</p>
<h2 id="path-normalize"><a href="#path-normalize" class="headerlink" title="path.normalize"></a>path.normalize</h2><p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯æŠŠä¸è§„èŒƒçš„è·¯å¾„è§„èŒƒåŒ–ï¼Œæ¯”å¦‚çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.normalize(&apos;/foo/bar//baz/asdf/quux/..&apos;));
</code></pre><p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>/foo/bar/baz/asdf
</code></pre><h2 id="path-join"><a href="#path-join" class="headerlink" title="path.join"></a>path.join</h2><pre><code>const path = require(&apos;path&apos;);
console.log(path.join(&apos;src&apos;, &apos;task.js&apos;));

const path = require(&apos;path&apos;);
console.log(path.join(&apos;dist&apos;, &apos;task.js&apos;));

const path = require(&apos;path&apos;);
console.log(path.join(&apos;&apos;));
</code></pre><p>è¿™ä¹ˆä¸¤ä¸ªçš„è¾“å‡ºç»“æœæ˜¯ï¼š</p>
<pre><code>src/task.js
dist/task.js
.
</code></pre><p>ä»–çš„ä½œç”¨ä¹Ÿå°±æ˜¾è€Œæ˜“è§ï¼Œä»–æœ‰ä¸€ä¸‹å‡ æ¡è§„åˆ™ï¼š<br>1.ä¼ å…¥çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²çš„è·¯å¾„ç‰‡æ®µï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª</p>
<p>2.è¿”å›çš„æ˜¯ä¸€ä¸ªæ‹¼æ¥å¥½çš„è·¯å¾„ï¼Œä½†æ˜¯æ ¹æ®å¹³å°çš„ä¸åŒï¼Œä»–ä¼šå¯¹è·¯å¾„è¿›è¡Œä¸åŒçš„è§„èŒƒåŒ–ï¼Œä¸¾ä¸ªä¾‹å­ï¼ŒUnixç³»ç»Ÿæ˜¯â€/â€œï¼ŒWindowsç³»ç»Ÿæ˜¯â€\â€œï¼Œé‚£ä¹ˆä½ åœ¨ä¸¤ä¸ªç³»ç»Ÿä¸‹çœ‹åˆ°çš„è¿”å›ç»“æœå°±ä¸ä¸€æ ·ã€‚</p>
<p>3.å¦‚æœè¿”å›çš„è·¯å¾„å­—ç¬¦ä¸²é•¿åº¦ä¸ºé›¶ï¼Œé‚£ä¹ˆä»–ä¼šè¿”å›ä¸€ä¸ªâ€™.â€™ï¼Œä»£è¡¨å½“å‰çš„æ–‡ä»¶å¤¹ã€‚</p>
<p>4.å¦‚æœä¼ å…¥çš„å‚æ•°ä¸­æœ‰ä¸æ˜¯å­—ç¬¦ä¸²çš„ï¼Œé‚£å°±ç›´æ¥ä¼šæŠ¥é”™</p>
<h2 id="path-parse"><a href="#path-parse" class="headerlink" title="path.parse"></a>path.parse</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼Œåœ¨srcç›®å½•ä¸‹çš„task.jså†™å…¥</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.parse(&apos;/Users/laihuamin/Documents/richEditor/editor&apos;));
</code></pre><p>ç„¶åè¿è¡Œnode src/task.jsä¹‹å,è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code>{ 
  root: &apos;/&apos;,
  dir: &apos;/Users/laihuamin/Documents/richEditor&apos;,
  base: &apos;editor&apos;,
  ext: &apos;&apos;,
  name: &apos;editor&apos; 
}
</code></pre><p>ä»–è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥æŠŠè¿™ä¹ˆå‡ ä¸ªåè¯ç†Ÿæ‚‰ä¸€ä¸‹ï¼š</p>
<p><img src="https://pic3.zhimg.com/v2-b7c5d496b89fde98f097a4a6e2ba7d03_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-b7c5d496b89fde98f097a4a6e2ba7d03_hd.jpg" alt=""></p>
<p>è¿™ä¸ªè¡¨æ ¼åº”è¯¥å±•ç¤ºçš„å¾ˆå½¢è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æ¥è§£é‡Šä¸€ä¸‹è¿™äº›åè¯ï¼š<br>1.rootï¼šä»£è¡¨æ ¹ç›®å½•<br>2.dirï¼šä»£è¡¨æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹<br>3.baseï¼šä»£è¡¨æ•´ä¸€ä¸ªæ–‡ä»¶<br>4.nameï¼šä»£è¡¨æ–‡ä»¶å<br>5.ext: ä»£è¡¨æ–‡ä»¶çš„åç¼€å</p>
<p>é‚£æˆ‘ä»¬æ ¹æ®ä¸‹é¢çš„è§„åˆ™ï¼Œæ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæœ€å¥½è‡ªå·±è„‘å­åšä¸€é</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.parse(&apos;/Users/laihuamin/Documents/richEditor/editor/src/task.js&apos;));
</code></pre><p>è¾“å‡ºçš„ç»“æœï¼š</p>
<pre><code>{ 
  root: &apos;/&apos;,
  dir: &apos;/Users/laihuamin/Documents/richEditor/editor/src&apos;,
  base: &apos;task.js&apos;,
  ext: &apos;.js&apos;,
  name: &apos;task&apos; 
}
</code></pre><p>ä½ åšå¯¹äº†ä¹ˆï¼Ÿ0.0</p>
<h2 id="path-basename"><a href="#path-basename" class="headerlink" title="path.basename"></a>path.basename</h2><p>é‚£æœ‰äº†å‰é¢è¿™ä¸ªé“ºå«ï¼Œæƒ³å¿…è¿™ä¸ªæ¥å£çŒœä¹Ÿèƒ½çŒœçš„åˆ°äº†ã€‚ã€‚ã€‚ã€‚æˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.basename(&apos;/Users/laihuamin/Documents/richEditor/editor/src/task.js&apos;));
</code></pre><p>è¾“å‡ºçš„ç»“æœæ˜¯ï¼š</p>
<pre><code>task.js
</code></pre><p>æˆ‘ä»¬è¿˜æ˜¯ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯path,è¿˜æœ‰ä¸€ä¸ªæ˜¯extï¼ˆå¯é€‰å‚æ•°ï¼‰.</p>
<pre><code>const path = require(&apos;path&apos;)
console.log(path.basename(&apos;/Users/laihuamin/Documents/richEditor/editor/src/task.js&apos;, &apos;.js&apos;));
</code></pre><p>è¾“å‡ºç»“æœ:</p>
<pre><code>task
</code></pre><h2 id="path-dirname"><a href="#path-dirname" class="headerlink" title="path.dirname"></a>path.dirname</h2><p>è¿™ä¸ªæ¥å£æ¯”basenameè¿˜è¦ç®€å•ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œçœ‹ä¾‹å­ï¼Œçœ‹ç»“æœ</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.basename(&apos;/Users/laihuamin/Documents/richEditor/editor/src/task.js&apos;));
</code></pre><p>è¾“å‡ºçš„ç»“æœ:</p>
<pre><code>/Users/laihuamin/Documents/richEditor/editor/src
</code></pre><p>æ³¨æ„ä¸€ä¸‹ï¼Œæ¥æ”¶çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»å‹</p>
<h2 id="path-extname"><a href="#path-extname" class="headerlink" title="path.extname"></a>path.extname</h2><p>è¿™ä¸ªå°±æ˜¯å±•ç¤ºæ–‡ä»¶çš„æ‰©å±•åï¼Œæˆ‘ä»¬å¾—æ³¨æ„å‡ ç§æƒ…å†µ</p>
<pre><code>const path = require(&apos;path&apos;);
path.extname(&apos;index.html&apos;);
path.extname(&apos;index.coffee.md&apos;);
path.extname(&apos;index.&apos;);
path.extname(&apos;index&apos;);
path.extname(&apos;.index&apos;);
</code></pre><p>è¾“å‡ºçš„ç»“æœæ˜¯ï¼š</p>
<pre><code>.html
.md
.
&apos;&apos;
&apos;&apos;
</code></pre><p>è‡ªå·±æ³¨æ„ä¸€ä¸‹è¿™å‡ ä¸ªæƒ…å†µ</p>
<h2 id="path-resolve"><a href="#path-resolve" class="headerlink" title="path.resolve"></a>path.resolve</h2><p>æˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™å‡ ä¸ªä¾‹å­å…ˆæ¥ç†Ÿæ‚‰ä¸€ä¸‹ï¼š</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.resolve(&apos;/foo/bar&apos;, &apos;/bar/faa&apos;, &apos;..&apos;, &apos;a/../c&apos;));
</code></pre><p>è¾“å‡ºçš„ç»“æœæ˜¯</p>
<pre><code>/bar/c
</code></pre><p>ä»–å°±ç›¸å½“äºä¸€å †cdæ“ä½œï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çœ‹</p>
<pre><code>cd /foo/bar/    //è¿™æ˜¯ç¬¬ä¸€æ­¥, ç°åœ¨çš„ä½ç½®æ˜¯/foo/bar/
cd /bar/faa     //è¿™æ˜¯ç¬¬äºŒæ­¥ï¼Œè¿™é‡Œå’Œç¬¬ä¸€æ­¥æœ‰åŒºåˆ«ï¼Œä»–æ˜¯ä»/è¿›å…¥çš„ï¼Œä¹Ÿå°±æ—¶å€™æ ¹ç›®å½•ï¼Œç°åœ¨çš„ä½ç½®æ˜¯/bar/faa
cd ..       //ç¬¬ä¸‰æ­¥ï¼Œä»faaé€€å‡ºæ¥ï¼Œç°åœ¨çš„ä½ç½®æ˜¯ /bar
cd a/../c   //ç¬¬å››æ­¥ï¼Œè¿›å…¥aï¼Œç„¶ååœ¨æ¨å‡ºï¼Œåœ¨è¿›å…¥cï¼Œæœ€åä½ç½®æ˜¯/bar/c
</code></pre><p>ä½†æ˜¯è¿™ä¸ªæ“ä½œå’Œcdè¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œè¿™ä¸ªè·¯å¾„ä¸ä¸€å®šè¦å­˜åœ¨ï¼Œè€Œä¸”æœ€åçš„å¯ä»¥æ˜¯æ–‡ä»¶</p>
<h2 id="path-relative"><a href="#path-relative" class="headerlink" title="path.relative"></a>path.relative</h2><p>è¿™ä¸ªè¿”å›çš„æ˜¯fromåˆ°toçš„ç›¸å¯¹è·¯å¾„ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­å°±çŸ¥é“äº†.</p>
<pre><code>const path = require(&apos;path&apos;);
console.log(path.relative(&apos;src/bar/baz&apos;, &apos;src/aaa/bbb&apos;));
</code></pre><p>è¾“å‡ºçš„ç»“æœæ˜¯ï¼š</p>
<pre><code>../../aaa/bbb
</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™äº›æ¯”è¾ƒå®ç”¨çš„æ–¹æ³•ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œè‡ªå·±è¿˜æ˜¯è€è€å®å®å»çœ‹weektoolçš„webpackçš„é…ç½®æ–‡ä»¶äº†ï¼Œå–œæ¬¢çš„æœ‹å‹å¯ä»¥ç‚¹ä¸ªå–œæ¬¢ï¼Œæˆ–è€…å»æˆ‘çš„<a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Flaihuamin%252FJS-total" target="_blank" rel="noopener">github</a>ç‚¹ä¸ªstarä¹Ÿè¡Œï¼Œè°¢è°¢æ”¯æŒï¼Œä¸¾èµ·å°æ‰‹æŒ‡ç‚¹ä¸€ç‚¹å“¦ğŸ˜¯ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/02/Vueå®‰å…¨æƒé™æ§åˆ¶axiosæ‹¦æˆª/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/02/Vueå®‰å…¨æƒé™æ§åˆ¶axiosæ‹¦æˆª/" itemprop="url">Vueå®‰å…¨æƒé™æ§åˆ¶axiosæ‹¦æˆª</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-07-02T22:57:53+08:00">
                2018-07-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½•ä¸ºæƒé™æ§åˆ¶</p>
<pre><code>//è¯·æ±‚å¤±è´¥åçš„ç»Ÿä¸€æ‹¦æˆªï¼Œä»¥åŠajaxçš„åŸºæœ¬è®¾ç½®
import axios from &apos;axios&apos;;
import qs from &apos;qs&apos;;

function cleanRequest(req) {
  for (const i in req) {
    /* eslint guard-for-in: 0 */
    if (req[i] !== 0 &amp;&amp; !req[i]) {
      delete req[i];
    }
  }
}

axios.defaults.withCredentials = true;
axios.defaults.xsrfCookieName = null;
axios.defaults.headers.common[&apos;X-Requested-With&apos;] = &apos;XMLHttpRequest&apos;;
axios.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/x-www-form-urlencoded&apos;;
//ç³»ç»Ÿå¼¹å±‚
import Toast from &apos;mint-ui/lib/toast&apos;;
import &apos;mint-ui/lib/toast/style.css&apos;;

module.exports.install = function (Vue) {
  axios.defaults.baseURL=&quot;/&quot;;
  Vue.prototype.$http = axios;
  Vue.http = axios;

  axios.interceptors.request.use(
    function (request) {
      const params = request.params;
      if (params) {
        cleanRequest(params);
      }
      if (request.data) {
        cleanRequest(request.data);
        request.data=qs.stringify(Object.assign(request.data,Bus.movieConfig))
      }else{
        request.data=qs.stringify(Bus.movieConfig)
      }
      return request;
    },
    function (error) {
      return Promise.reject(error);
    }
  );

  // Add a response interceptor
  axios.interceptors.response.use(
    function (response) {
      return response;
    },
    function (error) {
      Toast(&apos;ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•!&apos;);
      // Do something with response error
      return Promise.reject(error);
    }
  );
};
</code></pre><p>æƒé™æ§åˆ¶å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªç»´åº¦:</p>
<ul>
<li>å‚ç›´ç»´åº¦: æ§åˆ¶ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›urlçš„æƒé™</li>
<li>æ°´å¹³ç»´åº¦: æ§åˆ¶ç”¨æˆ·è®¿é—®ç‰¹å®šurlï¼Œè·å–å“ªäº›æ•°æ®çš„æƒé™ï¼ˆe.g. æ™®é€šç”¨æˆ·ã€ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜è®¿é—®åŒä¸€urlï¼Œè·å–çš„æ•°æ®æ˜¯ä¸åŒçš„ï¼‰</li>
</ul>
<p>Webæƒé™æ§åˆ¶æ–¹æ¡ˆList</p>
<ul>
<li>å‰åç«¯ä¸åˆ†ç¦»ï¼šä»¥Javaä¸ºä¾‹ï¼Œåç«¯é€šè¿‡jspã€freemarkã€thmeleafç­‰æ¨¡æ¿æ¥æ¸²æŸ“ç›¸åº”æƒé™çš„æ•°æ®ï¼Œæ¸²æŸ“å®Œå‘ˆç°åœ¨æµè§ˆå™¨ç«¯</li>
<li>å‰åç«¯åˆ†ç¦»ï¼š<br>â–«SPAå•é¡µé¢åº”ç”¨ï¼Œè·¯ç”±ç”±å‰ç«¯æ§åˆ¶ï¼Œå‰ç«¯é€šè¿‡jsæ§åˆ¶hashè·¯ç”±çš„æƒé™<br>â–«SSRæœåŠ¡ç«¯æ¸²æŸ“ï¼ŒNodeä¸­é—´å±‚åšä»£ç†è·¯ç”±ï¼Œåˆ¤æ–­æƒé™æ¸²æŸ“ç‰¹å®šçš„è·¯ç”±è‡³æµè§ˆå™¨ç«¯</li>
</ul>
<p>SPAå‰ç«¯æƒé™æ§åˆ¶æ–¹æ¡ˆ</p>
<p>SPA: å•é¡µWebåº”ç”¨ï¼ˆsingle page web applicationï¼‰å°†æ‰€æœ‰webæ´»åŠ¨å±€é™äºä¸€ä¸ªhtmlé¡µé¢ä¸­ï¼Œåˆ©ç”¨jsé€šè¿‡hashæˆ–è€…æµè§ˆå™¨history apiæ¥å®ç°æ— åˆ·æ–°è·¯ç”±è·³è½¬ï¼Œå‰åç«¯é€šè¿‡ajaxæ•°æ®é€šä¿¡ï¼Œé¿å…äº†æµè§ˆå™¨çš„åˆ·æ–°é‡æ–°åŠ è½½ï¼Œä¸ºç”¨æˆ·æä¾›æµç¨‹çš„æ“ä½œä½“éªŒã€‚è¿™æ„å‘³ç€å‰ç«¯æ¥ç®¡äº†è·¯ç”±å±‚ï¼Œéœ€è¦é€šè¿‡è°ƒç”¨å‰ç«¯è‡ªèº«çš„MVCæ¨¡å—ï¼Œæ¥æ¸²æŸ“ä¸åŒçš„é¡µé¢ã€‚</p>
<blockquote>
<p>Base onï¼š</p>
</blockquote>
<ul>
<li>Vue å‰ç«¯MVVMæ¡†æ¶</li>
<li>Vuex çŠ¶æ€ç®¡ç†æœº</li>
<li>Vue-router è·¯ç”±</li>
<li>Axios HTTPè¯·æ±‚åº“</li>
</ul>
<p>1.ç™»é™†äº‹ä»¶Login</p>
<pre><code>// 1.è§¦å‘ç™»é™†äº‹ä»¶
dispatch(&apos;login&apos;)

// actions
commit(types.LOGIN_SUCCESS, res.data.data)
...
</code></pre><p>2.è·å–Tokenï¼Œç»Base64ç¼–ç åå­˜è‡³sessionStorage</p>
<pre><code>// mutations
const mutations = {
    [types.LOGIN_SUCCESS] (state, data) {
        state.authlock = false
    // 2.ç™»é™†æˆåŠŸå›è°ƒæ‹¿åˆ°token,ç»Base64 ç¼–ç åå­˜å…¥æœ¬åœ°sessionStorage
        let token = Base64.encode(data + &apos;:HIKDATAE&apos;)
        sessionStorage.setItem(&apos;userToken&apos;, token)
    // è·¯ç”±è·³è½¬è‡³ç›®æ ‡é¡µé¢
        router.push({name: &apos;xxx&apos;})
    },
    [types.LOGOUT_SUCCESS] (state) {
        state.authlock = true
    // ç™»å‡ºæˆåŠŸå›è°ƒ,ç§»é™¤æœ¬åœ°token
        sessionStorage.removeItem(&apos;userToken&apos;)
        router.push({name: &apos;Login&apos;})
    }
}
</code></pre><p>3.æ‰€æœ‰HTTP Header Authorization åŠ ä¸Šç¼–ç åçš„token(å‰åç«¯å¯çº¦å®šè§„åˆ™)</p>
<pre><code>// Axios è¯·æ±‚é’©å­ï¼ˆrequestï¼‰
axios.interceptors.request.use(req =&gt; {
    let token = sessionStorage.getItem(&apos;user&apos;)     
    if (token) {         
        // 3.token å­˜åœ¨,åˆ™åœ¨ä¹‹åæ‰€æœ‰è¯·æ±‚çš„httpè¯·æ±‚å¤´ Authorization å¸¦ä¸Šbase64ç¼–ç åçš„token,åå°æ‹¿åˆ°tokenåè¿›è¡ŒéªŒè¯æƒé™         
        req.headers.Authorization = `Basic ${token}`     
    }
    req.data = qs.stringify(req.data)     
    return req 
}, error =&gt; {
    return Promise.reject(error) 
})
</code></pre><p>æµè§ˆå™¨http header<br><img src="https://pic4.zhimg.com/v2-48ee52913451d66397f33a47f6af3374_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-48ee52913451d66397f33a47f6af3374_hd.jpg" alt=""></p>
<p>4.è¯·æ±‚æ‹¦æˆªï¼šåå°æ‹¿åˆ°tokenåå¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œæ ¡éªŒï¼Œè‹¥æ ¡éªŒå¤±è´¥è¿”å›401ï¼Œå‰ç«¯responseé’©å­é‡Œç»Ÿä¸€catch error è·³è½¬è‡³ç™»é™†é¡µé¢ã€‚</p>
<pre><code>// Axios è¯·æ±‚é’©å­ï¼ˆresponseï¼‰
axios.interceptors.response.use(res =&gt; {
    return res
}, error =&gt; {
    if (error.response) {
        switch (error.response.status) {
        // 4.æ‰€æœ‰æ¥å£responseæ ¡éªŒé’©å­,è‹¥tokenæ£€éªŒå¤±è´¥,åå°è¿”å› 401 error code, æ¸…é™¤tokenä¿¡æ¯å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢
            case 401:
                store.commit(types.LOGOUT)
                router.replace({
                    path: &apos;/login&apos;
        })
    }
    }
    return Promise.reject(error)
})
</code></pre><p>5.è·¯ç”±è·³è½¬æ‹¦æˆªï¼šä»»æ„è·¯ç”±è·³è½¬æ—¶ï¼Œåœ¨è·¯ç”±beforeEaché’©å­é‡Œæ ¡éªŒæœ¬åœ°æ˜¯å¦å­˜åœ¨tokenï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™è·³è½¬è‡³ç™»é™†é¡µé¢</p>
<pre><code>// è·¯ç”±é’©å­(æ¯ä¸ªè·¯ç”±è·³è½¬å‰è°ƒèµ·beforeEaché’©å­)
router.beforeEach((to, from, next) =&gt; {
  if (to.path === &apos;/login&apos;) {
    sessionStorage.removeItem(&apos;userToken&apos;)
  }
  let user = sessionStorage.getItem(&apos;userToken&apos;)
  if (!user &amp;&amp; to.path !== &apos;/login&apos;) {
    // è‹¥æœ¬åœ°tokenä¸å­˜åœ¨,åˆ™ä»»æ„è·¯ç”±è·³è½¬çš„æ—¶å€™,é‡å®šå‘è‡³login ç™»é™†é¡µé¢
    next({ path: &apos;/login&apos; })
  } else {
    next()
  }
})
</code></pre><p>6.ç™»å‡ºLogoutï¼šæ¸…æ¥šæœ¬åœ°sessionStorageçš„tokenä¿¡æ¯</p>
<pre><code>// mutations
const mutations = {
    ...
    [types.LOGOUT_SUCCESS] (state) {
        state.authlock = true
    // ç™»å‡ºæˆåŠŸå›è°ƒ,ç§»é™¤æœ¬åœ°token
        sessionStorage.removeItem(&apos;userToken&apos;)
    router.push({name: &apos;Login&apos;})
    }
}
</code></pre><p>æµç¨‹ç¤ºæ„å›¾å¦‚ä¸‹:<br><img src="https://pic2.zhimg.com/v2-064f7b05f15399ac9ff6aa03ee1cb710_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-064f7b05f15399ac9ff6aa03ee1cb710_hd.jpg" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/02/ES6-å®ç°è‡ªå·±çš„-Promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/02/ES6-å®ç°è‡ªå·±çš„-Promise/" itemprop="url">ES6å®ç°è‡ªå·±çš„ Promise</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-07-02T22:15:53+08:00">
                2018-07-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä¸€ã€JavaScriptå¼‚æ­¥ç¼–ç¨‹èƒŒæ™¯"><a href="#ä¸€ã€JavaScriptå¼‚æ­¥ç¼–ç¨‹èƒŒæ™¯" class="headerlink" title="ä¸€ã€JavaScriptå¼‚æ­¥ç¼–ç¨‹èƒŒæ™¯"></a>ä¸€ã€JavaScriptå¼‚æ­¥ç¼–ç¨‹èƒŒæ™¯</h2><p>ä»å»å¹´ES2015å‘å¸ƒè‡³ä»Šï¼Œå·²ç»è¿‡å»äº†ä¸€å¹´å¤šï¼ŒES2015å‘å¸ƒçš„æ–°çš„è¯­è¨€ç‰¹æ€§ä¸­æœ€ä¸ºæµè¡Œçš„ä¹Ÿå°±è«è¿‡äºPromiseäº†ï¼ŒPromiseä½¿å¾—å¦‚ä»ŠJavaScriptå¼‚æ­¥ç¼–ç¨‹å¦‚æ­¤è½»æ¾æƒ¬æ„ï¼Œç”šè‡³æ…¢æ…¢é—å¿˜äº†æ›¾ç»é‚£ä¸å ªå›é¦–çš„ç—›æ¥šã€‚å…¶å®ä»JavaScriptè¯ç”Ÿï¼ŒJavaScriptä¸­çš„å¼‚æ­¥ç¼–ç¨‹å°±å·²ç»å‡ºç°ï¼Œä¾‹å¦‚ç‚¹å‡»é¼ æ ‡ã€æ•²å‡»é”®ç›˜è¿™äº›äº‹ä»¶çš„å¤„ç†å‡½æ•°éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæ—¶é—´åˆ°äº†2009å¹´ï¼ŒNode.jsæ¨ªç©ºå‡ºä¸–ï¼Œåœ¨æ•´ä¸ªNode.jsçš„å®ç°ä¸­ï¼Œå°†å›è°ƒæ¨¡å¼çš„å¼‚æ­¥ç¼–ç¨‹æœºåˆ¶å‘æŒ¥çš„æ·‹æ¼“å°½è‡´ï¼ŒNodeçš„æµè¡Œä¹Ÿæ˜¯çš„è¶Šæ¥è¶Šå¤šçš„JavaScripterå¼€å§‹äº†å¼‚æ­¥ç¼–ç¨‹ï¼Œä½†æ˜¯å›è°ƒæ¨¡å¼çš„å‰¯ä½œç”¨ä¹Ÿæ…¢æ…¢å±•ç°åœ¨äººä»¬çœ¼å‰ï¼Œé”™è¯¯å¤„ç†ä¸å¤Ÿä¼˜é›…ä»¥åŠåµŒå¥—å›è°ƒå¸¦æ¥çš„â€œå›è°ƒåœ°ç‹±â€ã€‚è¿™äº›å‰¯ä½œç”¨ä½¿å¾—äººä»¬ä»å›è°ƒæ¨¡å¼çš„æ¸©æŸ”ä¹¡ä¸­æ…¢æ…¢æ¸…é†’è¿‡æ¥ï¼Œå¼€å§‹å¯»æ‰¾æ›´ä¸ºä¼˜é›…çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ã€å¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚æ—¶é—´åˆ°äº†2015å¹´ï¼ŒPromiseæ‹¯æ•‘é‚£äº›è‹¦è‹¦æ¢ç´¢çš„å…ˆé©±ã€‚è¡Œä½¿å®ƒå†å²ä½¿å‘½çš„æ—¶ä»£ä¼¼ä¹å·²ç»åˆ°æ¥ã€‚</p>
<p>æ¯ä¸ªäº‹ç‰©çš„è¯ç”Ÿæœ‰ä»–çš„å†å²ä½¿å‘½ï¼Œæ›´æœ‰å…¶å†å²æˆå› ï¼Œä¿ƒè¿›å…¶è¢«é‚£äº›æ¢ç´¢çš„å…ˆé©±ä»¬æ‰€å‘ç°ã€‚äº†è§£nodejsæˆ–è€…ç†Ÿæ‚‰æµè§ˆå™¨çš„äººéƒ½çŸ¥é“ï¼ŒJavaScriptå¼•æ“æ˜¯åŸºäºäº‹ä»¶å¾ªç¯æˆ–å•çº¿ç¨‹è¿™ä¸¤ä¸ªç‰¹æ€§çš„ã€‚æ›´ä¸ºç”šè€…åœ¨æµè§ˆå™¨ä¸­ï¼Œæ›´æ–°UI(ä¹Ÿå°±æ˜¯æµè§ˆå™¨é‡ç»˜ã€é‡æ‹é¡µé¢å¸ƒå±€)å’Œæ‰§è¡ŒJavaScriptä»£ç ä¹Ÿåœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸­ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œä¸€ä¸ªçº¿ç¨‹å°±ç›¸å½“äºåªæœ‰ä¸€æ¡é©¬è·¯ï¼Œå¦‚æœä¸€è¾†é©¬è½¦æŠ›é”šåœ¨è·¯ä¸Šäº†é˜»å¡äº†é©¬è·¯ï¼Œé‚£ä¹ˆåˆ«çš„é©¬è½¦ä¹Ÿå°±æ‹¥å µåœ¨äº†é‚£å„¿ï¼Œè¿™ä¸ªå•çº¿ç¨‹å®¹æ˜“è¢«é˜»å¡æ˜¯ä¸€ä¸ªé“ç†ï¼Œå•çº¿ç¨‹ä¹Ÿåªèƒ½å…è®¸æŸä¸€æ—¶é—´ç‚¹åªèƒ½å¤Ÿæ‰§è¡Œä¸€æ®µä»£ç ã€‚åŒæ—¶ï¼ŒJavaScriptæ²¡æœ‰æƒ³å®ƒçš„å“¥å“¥å§å§ä»¬é‚£ä¹ˆè´¢å¤§æ°”ç²—ï¼ŒåƒJavaæˆ–è€…C++ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸å¤Ÿï¼Œé‚£ä¹ˆå†åŠ ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·å°±èƒ½å¤ŸåŒæ—¶æ‰§è¡Œå¤šæ®µä»£ç äº†ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šå¸¦æ¥çš„éšæ‚£å°±æ˜¯çŠ¶æ€ä¸å®¹æ˜“ç»´æŠ¤ï¼ŒJavaScripté€‰æ‹©äº†å•çº¿ç¨‹éé˜»å¡å¼çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„æ–¹å¼ï¼Œå°±åƒä¸Šé¢çš„é©¬è½¦æŠ›é”šåœ¨äº†è·¯ä¸Šï¼Œé‚£ä¹ˆæŠŠé©¬è½¦æ¨åˆ°è·¯è¾¹çš„ç»´ä¿®ç«™ï¼Œè®©å…¶ä»–é©¬è½¦å…ˆè¿‡å»ï¼Œç­‰é©¬è½¦ä¿®å¥½äº†å†å›åˆ°é©¬è·¯ä¸Šç»§ç»­è¡Œé©¶ï¼Œè¿™å°±æ˜¯å•çº¿ç¨‹éé˜»å¡æ–¹å¼ã€‚æ­£å¦‚Promiseçš„å·¥ä½œæ–¹å¼ä¸€æ ·ï¼Œé€šè¿‡Promiseå»å‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯•ç«Ÿè¯·æ±‚æœ‰ç½‘ç»œå¼€é”€ï¼Œä¸å¯èƒ½é©¬ä¸Šå°±è¿”å›è¯·æ±‚ç»“æœçš„ï¼Œè¿™ä¸ªæ—¶å€™Promiseå°±å¤„äºpendingçŠ¶æ€ï¼Œä½†æ˜¯å…¶å¹¶ä¸ä¼šé˜»å¡å…¶ä»–ä»£ç çš„æ‰§è¡Œï¼Œå½“è¯·æ±‚è¿”å›æ—¶ï¼Œä¿®æ”¹PromiseçŠ¶æ€ä¸ºfulfilledæˆ–è€…rejectedï¼ˆå¤±è´¥è¯·æ±‚ï¼‰ã€‚åŒæ—¶æ‰§è¡Œç»‘å®šåˆ°è¿™ä¸¤ä¸ªçŠ¶æ€ä¸Šé¢çš„â€œå¤„ç†å‡½æ•°â€ã€‚è¿™å°±æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯Promiseå…¢å…¢ä¸šä¸šçš„å·¥ä½œæ–¹å¼ï¼Œåœ¨ä¸‹é¢ä¸€ä¸ªéƒ¨åˆ†å°†è¯¦ç»†è®¨è®ºPromiseã€‚</p>
<h2 id="äºŒã€PromiseåŸºç¡€"><a href="#äºŒã€PromiseåŸºç¡€" class="headerlink" title="äºŒã€PromiseåŸºç¡€"></a>äºŒã€PromiseåŸºç¡€</h2><p>æ€ä¹ˆä¸€å¥è¯è§£é‡ŠPromiseå‘¢ï¼ŸPromiseå¯ä»¥ä»£æŒ‡é‚£äº›å°šæœªå®Œæˆçš„ä¸€äº›æ“ä½œï¼Œä½†æ˜¯å…¶åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ä¼šè¿”å›æŸä¸€ç‰¹å®šçš„ç»“æœã€‚</p>
<p>å½“åˆ›å»ºä¸€ä¸ªPromiseå®ä¾‹åï¼Œå…¶ä»£è¡¨ä¸€ä¸ªæœªçŸ¥çš„å€¼ï¼Œåœ¨å°†æ¥çš„æŸä¸ªæ—¶é—´ä¼šè¿”å›ä¸€ä¸ªæˆåŠŸçš„è¿”å›å€¼ï¼Œæˆ–è€…å¤±è´¥çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¿™äº›è¿”å›å€¼æ·»åŠ å¤„ç†å‡½æ•°ï¼Œå½“å€¼è¿”å›æ—¶ï¼Œå¤„ç†å‡½æ•°è¢«è°ƒç”¨ã€‚Promiseæ€»æ˜¯å¤„äºä¸‹é¢ä¸‰ç§çŠ¶æ€ä¹‹ä¸€ï¼š</p>
<ul>
<li>pendingï¼š Promiseçš„åˆå§‹çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æœªè¢«fulfilledæˆ–è€…rejectedçš„çŠ¶æ€ã€‚</li>
<li>fulfilledï¼š æ„å‘³ç€promiseä»£æŒ‡çš„æ“ä½œå·²ç»æˆåŠŸå®Œæˆã€‚</li>
<li>rejectedï¼šæ„å‘³ç€promiseä»£æŒ‡çš„æ“ä½œç”±äºæŸäº›åŸå› å¤±è´¥ã€‚</li>
</ul>
<p>ä¸€ä¸ªå¤„äºpendingçŠ¶æ€çš„promiseå¯èƒ½ç”±äºæŸä¸ªæˆåŠŸè¿”å›å€¼è€Œå‘å±•ä¸ºfulfilledçŠ¶æ€ï¼Œä¹Ÿæœ‰å¯èƒ½å› ä¸ºæŸäº›é”™è¯¯è€Œè¿›å…¥rejectedçŠ¶æ€ï¼Œæ— è®ºæ˜¯è¿›å…¥fulfilledçŠ¶æ€æˆ–è€…rejectedçŠ¶æ€ï¼Œç»‘å®šåˆ°è¿™ä¸¤ç§çŠ¶æ€ä¸Šé¢çš„å¤„ç†å‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚å¹¶ä¸”è¿›å…¥fulfilledæˆ–è€…rejectedçŠ¶æ€ä¹Ÿå°±ä¸èƒ½å†è¿”å›pendingçŠ¶æ€äº†ã€‚<br><img src="https://pic4.zhimg.com/v2-cf3e4ae1a35caad7c2d8d7bdd8c763d2_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-cf3e4ae1a35caad7c2d8d7bdd8c763d2_hd.jpg" alt=""></p>
<h2 id="ä¸‰ã€è¾¹å­¦è¾¹å†™"><a href="#ä¸‰ã€è¾¹å­¦è¾¹å†™" class="headerlink" title="ä¸‰ã€è¾¹å­¦è¾¹å†™"></a>ä¸‰ã€è¾¹å­¦è¾¹å†™</h2><p>ä¸Šé¢è¯´äº†é‚£ä¹ˆå¤šï¼Œå…¶å®éƒ½æ˜¯é“ºå«ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å®ç°è‡ªå·±çš„Promiseå¯¹è±¡ã€‚go go goï¼ï¼ï¼</p>
<h2 id="ç¬¬ä¸€æ­¥ï¼šPromiseæ„é€ å‡½æ•°"><a href="#ç¬¬ä¸€æ­¥ï¼šPromiseæ„é€ å‡½æ•°" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šPromiseæ„é€ å‡½æ•°"></a>ç¬¬ä¸€æ­¥ï¼šPromiseæ„é€ å‡½æ•°</h2><p>Promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼Œpendingã€fulfilledã€rejectedã€‚</p>
<pre><code>const PENDING = &apos;PENDING&apos; // Promise çš„ åˆå§‹çŠ¶æ€
const FULFILLED = &apos;FULFILLED&apos; // Promise æˆåŠŸè¿”å›åçš„çŠ¶æ€
const REJECTED = &apos;REJECTED&apos; // Promise å¤±è´¥åçš„çŠ¶æ€
</code></pre><p>æœ‰äº†ä¸‰ç§çŠ¶æ€åï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆåˆ›å»ºä¸€ä¸ªPromiseå®ä¾‹å‘¢ï¼Ÿ</p>
<blockquote>
<p>const promise = new Promise(executor) // åˆ›å»ºPromiseçš„è¯­æ³•</p>
</blockquote>
<p>é€šè¿‡ä¸Šé¢ç”Ÿæˆpromiseè¯­æ³•æˆ‘ä»¬çŸ¥é“ï¼ŒPromiseå®ä¾‹æ˜¯è°ƒç”¨Promiseæ„é€ å‡½æ•°é€šè¿‡newæ“ä½œç¬¦ç”Ÿæˆçš„ã€‚è¿™ä¸ªæ„é€ å‡½æ•°æˆ‘ä»¬å¯ä»¥å…ˆè¿™æ ·å†™ï¼š</p>
<pre><code>class Promise {
    constructor(executor) {
        this.status = PENDING // åˆ›å»ºä¸€ä¸ªpromiseæ—¶ï¼Œé¦–å…ˆè¿›è¡ŒçŠ¶æ€åˆå§‹åŒ–ã€‚pending
        this.result = undefined // resultå±æ€§ç”¨æ¥ç¼“å­˜promiseçš„è¿”å›ç»“æœï¼Œå¯ä»¥æ˜¯æˆåŠŸçš„è¿”å›ç»“æœï¼Œæˆ–å¤±è´¥çš„è¿”å›ç»“æœ
    }
}
</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢æ„é€ å‡½æ•°æ¥å—çš„å‚æ•°executorã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ¥å—å…¶ä»–ä¸¤ä¸ªå‡½æ•°ï¼ˆresolveå’Œrejectï¼‰ä½œä¸ºå‚æ•°ï¼Œå½“resolveå‡½æ•°è°ƒç”¨åï¼Œpromiseçš„çŠ¶æ€è½¬åŒ–ä¸ºfulfilledï¼Œå¹¶ä¸”æ‰§è¡ŒæˆåŠŸè¿”å›çš„å¤„ç†å‡½æ•°ï¼ˆä¸ç”¨ç€æ€¥åé¢ä¼šè¯´åˆ°æ€ä¹ˆæ·»åŠ å¤„ç†å‡½æ•°ï¼‰ã€‚å½“rejectå‡½æ•°è°ƒç”¨åï¼ŒpromiseçŠ¶æ€è½¬åŒ–ä¸ºrejectedï¼Œå¹¶ä¸”æ‰§è¡Œå¤±è´¥è¿”å›çš„å¤„ç†å‡½æ•°ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code>class Promise {
    constructor(executor) {
        this.status = PENDING 
        this.result = undefined
        executor(data =&gt; resolveProvider(this, data), err =&gt; rejectProvider(this, err))
    }
}

function resolveProvider(promise, data) {
    if (promise.status !== PENDING) return false
    promise.status = FULFILLED
}
function rejectProvider(promise, data) {
    if (promise.status !== PENDING) return false
    promise.status = FULFILLED
}
</code></pre><p>Dont Repeat Yourseltï¼ï¼ï¼æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢ä»£ç åé¢ä¸¤ä¸ªå‡½æ•°åŸºæœ¬ç›¸åŒï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ•´åˆæˆä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ç»“åˆé«˜é˜¶å‡½æ•°çš„ä½¿ç”¨ã€‚</p>
<pre><code>const statusProvider = (promise, status) =&gt; data =&gt; {
    if (promise.status !== PENDING) return false
    promise.status = status
    promise.result = data
}
class Promise {
    constructor(executor) {
        this.status = PENDING 
        this.result = undefined
        executor(statusProvider(this, FULFILLED), statusProvider(this, REJECTED))
    }
}
</code></pre><p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç å°±çœ‹ä¸Šå»ç®€æ´å¤šäº†ã€‚</p>
<h2 id="ç¬¬äºŒæ­¥ï¼šä¸ºPromiseæ·»åŠ å¤„ç†å‡½æ•°"><a href="#ç¬¬äºŒæ­¥ï¼šä¸ºPromiseæ·»åŠ å¤„ç†å‡½æ•°" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šä¸ºPromiseæ·»åŠ å¤„ç†å‡½æ•°"></a>ç¬¬äºŒæ­¥ï¼šä¸ºPromiseæ·»åŠ å¤„ç†å‡½æ•°</h2><p>å…¶å®é€šè¿‡ <code>new Promise(executor)</code>å·²ç»å¯ä»¥ç”Ÿæˆä¸€ä¸ªPromiseå®ä¾‹äº†ï¼Œç”šè‡³æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ é€’åˆ°executorä¸­çš„resolveå’Œrejectæ–¹æ³•æ¥æ”¹å˜promiseçŠ¶æ€ï¼Œä½†æ˜¯ï¼ç°åœ¨çš„promiseä¾ç„¶æ²¡å•¥åµç”¨ï¼ï¼ï¼å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰ç»™å®ƒæ·»åŠ æˆåŠŸå’Œå¤±è´¥è¿”å›çš„å¤„ç†å‡½æ•°ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç»™æˆ‘ä»¬çš„promiseå¢åŠ ä¸¤ä¸ªå±æ€§ï¼ŒsuccessListenerå’ŒfailureListenerç”¨æ¥åˆ†åˆ«ç¼“å­˜æˆåŠŸå¤„ç†å‡½æ•°å’Œå¤±è´¥å¤„ç†å‡½æ•°ã€‚</p>
<pre><code>class Promise {
    constructor(executor) {
        this.status = PENDING
         this.successListener = []
         this.failureListener = []
        this.result = undefined
        executor(statusProvider(this, FULFILLED), statusProvider(this, REJECTED))
    }
}
</code></pre><p>æ€ä¹ˆæ·»åŠ å¤„ç†å‡½æ•°å‘¢ï¼ŸECMASCRIPTæ ‡å‡†ä¸­è¯´åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡promiseåŸå‹ä¸Šé¢çš„thenæ–¹æ³•ä¸ºpromiseæ·»åŠ æˆåŠŸå¤„ç†å‡½æ•°å’Œå¤±è´¥å¤„ç†å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡catchæ–¹æ³•ä¸ºpromiseæ·»åŠ å¤±è´¥å¤„ç†å‡½æ•°ã€‚</p>
<pre><code>const statusProvider = (promise, status) =&gt; data =&gt; {
    if (promise.status !== PENDING) return false
    promise.status = status
    promise.result = data
    switch(status) {
        case FULFILLED: return promise.successListener.forEach(fn =&gt; fn(data))
        case REJECTED: return promise.failurelistener.forEach(fn =&gt; fn(data))
    }
}
class Promise {
    constructor(executor) {
        this.status = PENDING
        this.successListener = []
        this.failurelistener = []
        this.result = undefined
        executor(statusProvider(this, FULFILLED), statusProvider(this, REJECTED))
    }
    /**
     * PromiseåŸå‹ä¸Šé¢çš„æ–¹æ³•
     */
    then(...args) {
        switch (this.status) {
            case PENDING: {
                this.successListener.push(args[0])
                this.failurelistener.push(args[1])
                break
            }
            case FULFILLED: {
                args[0](this.result)
                break
            }
            case REJECTED: {
                args[1](this.result)
            }
        }
    }
    catch(arg) {
        return this.then(undefined, arg)
    }
}
</code></pre><p>æˆ‘ä»¬ç°åœ¨çš„PromiseåŸºæœ¬åˆå…·é›å½¢äº†ã€‚ç”šè‡³å¯ä»¥è¿ç”¨åˆ°ä¸€äº›ç®€å•çš„åœºæ™¯ä¸­äº†ã€‚ä¸¾ä¸ªä¾‹å­ã€‚</p>
<pre><code>/*åˆ›å»ºä¸€ä¸ªå»¶æ—¶resolveçš„pormise*/
new Promise((resolve, reject) =&gt; {setTimeout(() =&gt; resolve(5), 2000)}).then(data =&gt; console.log(data)) // 5
/*åˆ›å»ºä¸€ä¸ªåŠæ—¶resolveçš„promise*/
new Promise((resolve, reject) =&gt; resolve(5)).then(data =&gt; console.log(data)) // 5
/*é“¾å¼è°ƒç”¨thenæ–¹æ³•è¿˜ä¸èƒ½å¤Ÿä½¿ç”¨ï¼*/
new Promise(resolve=&gt; resolve(5)).then(data =&gt; data).then(data =&gt; console.log(data))
// Uncaught TypeError: Cannot read property &apos;then&apos; of undefined
</code></pre><h2 id="ç¬¬ä¸‰æ­¥ï¼šPromiseçš„é“¾å¼è°ƒç”¨"><a href="#ç¬¬ä¸‰æ­¥ï¼šPromiseçš„é“¾å¼è°ƒç”¨" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šPromiseçš„é“¾å¼è°ƒç”¨"></a>ç¬¬ä¸‰æ­¥ï¼šPromiseçš„é“¾å¼è°ƒç”¨</h2><p>Promiseéœ€è¦å®ç°é“¾å¼è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦å†æ¬¡å›é¡¾ä¸‹thenæ–¹æ³•çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>thenæ–¹æ³•ä¸ºpormiseæ·»åŠ æˆåŠŸå’Œå¤±è´¥çš„å¤„ç†å‡½æ•°ï¼ŒåŒæ—¶thenæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡ï¼Œè¿™ä¸ªæ–°çš„promiseå¯¹è±¡resolveå¤„ç†å‡½æ•°çš„è¿”å›å€¼ï¼Œæˆ–è€…å½“æ²¡æœ‰æä¾›å¤„ç†å‡½æ•°æ—¶ç›´æ¥resolveåŸå§‹çš„å€¼ã€‚</p>
</blockquote>
<p>å¯ä»¥çœ‹å‡ºï¼Œpromiseèƒ½å¤Ÿé“¾å¼è°ƒç”¨å½’åŠŸäºthenæ–¹æ³•è¿”å›ä¸€ä¸ªå…¨æ–°çš„promiseï¼Œå¹¶ä¸”resolveå¤„ç†å‡½æ•°çš„è¿”å›å€¼ï¼Œå½“ç„¶ï¼Œå¦‚æœthenæ–¹æ³•çš„å¤„ç†å‡½æ•°æœ¬èº«å°±è¿”å›ä¸€ä¸ªpromiseï¼Œé‚£ä¹ˆä¹…ä¸ç”¨æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨ç”Ÿæˆä¸€ä¸ªpromiseäº†ã€‚äº†è§£äº†è¿™äº›ï¼Œå°±å¼€å§‹åŠ¨æ‰‹å†™ä»£ç äº†ã€‚</p>
<pre><code>const isPromise = object =&gt; object &amp;&amp; object.then &amp;&amp; typeof object.then === &apos;function&apos;
const noop = () =&gt; {}

const statusProvider = (promise, status) =&gt; data =&gt; {
    // åŒä¸Šé¢ä»£ç 
}

class Promise {
    constructor(executor) {
        // åŒä¸Šé¢ä»£ç 
    }
    then(...args) {
        const child = new this.constructor(noop)

        const handler = fn =&gt; data =&gt; {
            if (typeof fn === &apos;function&apos;) {
                const result = fn(data)
                if (isPromise(result)) {
                    Object.assign(child, result)
                } else {
                    statusProvider(child, FULFILLED)(result)
                }   
            } else if(!fn) {
                statusProvider(child, this.status)(data)
            }
        }
        switch (this.status) {
            case PENDING: {
                this.successListener.push(handler(args[0]))
                this.failurelistener.push(handler(args[1]))
                break
            }
            case FULFILLED: {
                handler(args[0])(this.result)
                break
            }
            case REJECTED: {
                handler(args[1])(this.result)
                break
            }
        }
        return child
    }
    catch(arg) {
        return this.then(undefined, arg)
    }
}
</code></pre><p>é¦–å…ˆæˆ‘ä»¬å†™äº†ä¸€ä¸ªisPromiseæ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯promiseã€‚å°±æ˜¯åˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰ä¸€ä¸ª<code>then</code>æ–¹æ³•ï¼Œå…è´£å£°æ˜ä¸ºäº†å®ç°ä¸Šçš„ç®€å•ï¼Œæˆ‘ä»¬ä¸åŒºåˆ†thenableå’Œpromiseçš„åŒºåˆ«ï¼Œä½†æ˜¯æˆ‘ä»¬åº”è¯¥æ˜¯çŸ¥é“ã€‚æ‰€æœ‰çš„promiseéƒ½æ˜¯thenableçš„ï¼Œè€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„thenableå¯¹è±¡éƒ½æ˜¯promiseã€‚ï¼ˆthenableå¯¹è±¡æ˜¯æŒ‡å¸¦æœ‰ä¸€ä¸ªthenæ–¹æ³•çš„å¯¹è±¡ï¼Œè¯¥thenæ–¹æ³•å…¶å®å°±æ˜¯ä¸€ä¸ªexecutorã€‚ï¼‰isPromiseçš„ä½œç”¨å°±æ˜¯ç”¨äºåˆ¤æ–­thenæ–¹æ³•è¿”å›å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªpromiseï¼Œå¦‚æœæ˜¯promiseï¼Œå°±ç›´æ¥è¿”å›è¯¥promiseï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±æ–°ç”Ÿæˆä¸€ä¸ªpromiseå¹¶è¿”å›è¯¥promiseã€‚</p>
<p>ç”±äºéœ€è¦é“¾å¼è°ƒç”¨ï¼Œæˆ‘ä»¬å¯¹successListenerå’ŒfailureListenerä¸­å¤„ç†å‡½æ•°è¿›è¡Œäº†é‡å†™ï¼Œå¹¶ä¸æ˜¯ç›´æ¥pushè¿›å»thenæ–¹æ³•æ¥å—çš„å‚æ•°å‡½æ•°äº†ï¼Œå› ä¸ºthenæ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªpromiseï¼Œæ‰€ä»¥å½“thenæ–¹æ³•é‡Œé¢çš„å¤„ç†å‡½æ•°è¢«æ‰§è¡Œçš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹thenæ–¹æ³•è¿”å›çš„è¿™ä¸ªpromiseè¿›è¡Œå¤„ç†ï¼Œè¦ä¹ˆresolveï¼Œè¦ä¹ˆrejectæ‰ã€‚å½“ç„¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯éœ€è¦resolveæ‰çš„ï¼Œåªæœ‰å½“thenæ–¹æ³•æ²¡æœ‰æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°å‡½æ•°ï¼ŒåŒæ—¶è°ƒç”¨thenæ–¹æ³•çš„promiseå°±æ˜¯rejectedçš„æ—¶å€™ï¼Œæ‰éœ€è¦æŠŠthenæ–¹æ³•è¿”å›çš„pormiseè¿›è¡Œrejectå¤„ç†ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨<code>statusProvider(child, REJECTED)(data)</code>.</p>
<p>toy Promiseå®ç°çš„å®Œæ•´ä»£ç ï¼š</p>
<pre><code>const PENDING = &apos;PENDING&apos; // Promise çš„ åˆå§‹çŠ¶æ€
const FULFILLED = &apos;FULFILLED&apos; // Promise æˆåŠŸè¿”å›åçš„çŠ¶æ€
const REJECTED = &apos;REJECTED&apos; // Promise å¤±è´¥åçš„çŠ¶æ€

const isPromise = object =&gt; object &amp;&amp; object.then &amp;&amp; typeof object.then === &apos;function&apos;
const noop = () =&gt; {}

const statusProvider = (promise, status) =&gt; data =&gt; {
    if (promise.status !== PENDING) return false
    promise.status = status
    promise.result = data
    switch(status) {
        case FULFILLED: return promise.successListener.forEach(fn =&gt; fn(data))
        case REJECTED: return promise.failurelistener.forEach(fn =&gt; fn(data))
    }
}

class Promise {
    constructor(executor) {
        this.status = PENDING
        this.successListener = []
        this.failurelistener = []
        this.result = undefined 
        executor(statusProvider(this, FULFILLED), statusProvider(this, REJECTED))
    }
    /**
     * PromiseåŸå‹ä¸Šé¢çš„æ–¹æ³•
     */
    then(...args) {
        const child = new this.constructor(noop)

        const handler = fn =&gt; data =&gt; {
            if (typeof fn === &apos;function&apos;) {
                const result = fn(data)
                if (isPromise(result)) {
                    Object.assign(child, result)
                } else {
                    statusProvider(child, FULFILLED)(result)
                }   
            } else if(!fn) {
                statusProvider(child, this.status)(data)
            }
        }
        switch (this.status) {
            case PENDING: {
                this.successListener.push(handler(args[0]))
                this.failurelistener.push(handler(args[1]))
                break
            }
            case FULFILLED: {
                handler(args[0])(this.result)
                break
            }
            case REJECTED: {
                handler(args[1])(this.result)
                break
            }
        }
        return child
    }
    catch(arg) {
        return this.then(undefined, arg)
    }
}
</code></pre><h2 id="å››ã€æ€ä¹ˆè®©æˆ‘ä»¬çš„toy-Promiseå˜å¼ºå¥"><a href="#å››ã€æ€ä¹ˆè®©æˆ‘ä»¬çš„toy-Promiseå˜å¼ºå¥" class="headerlink" title="å››ã€æ€ä¹ˆè®©æˆ‘ä»¬çš„toy Promiseå˜å¼ºå¥"></a>å››ã€æ€ä¹ˆè®©æˆ‘ä»¬çš„toy Promiseå˜å¼ºå¥</h2><ol>
<li>åœ¨ECMAScriptæ ‡å‡†ä¸­ï¼ŒPromiseæ„é€ å‡½æ•°ä¸Šé¢è¿˜æä¾›äº†ä¸€äº›é™æ€æ–¹æ³•ï¼Œæ¯”å¦‚<code>Promise.resolve</code>ã€<code>Promise.reject</code>ã€<code>Promsie.all</code>ã€<code>Promise.race</code>ã€‚å½“æˆ‘ä»¬æœ‰äº†ä¸Šé¢çš„åŸºç¡€å®ç°åï¼Œä¸ºæˆ‘ä»¬çš„toy Promiseæ·»åŠ ä¸Šé¢è¿™äº›æ–°çš„åŠŸèƒ½ä¸€å®šèƒ½è®©å…¶æ›´åŠ å®ç”¨ã€‚</li>
<li>åœ¨æˆ‘ä»¬çš„åŸºæœ¬å®ç°ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åŒºåˆ†thenableå¯¹è±¡ï¼Œå…¶å®<code>Promise.resolve</code>å’Œ<code>then</code>æ–¹æ³•éƒ½å¯ä»¥æ¥å—ä¸€ä¸ªthenableå¯¹è±¡ï¼Œå¹¶æŠŠè¯¥thenableå¯¹è±¡è½¬åŒ–ä¸ºä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå¦‚æœæƒ³è®©æˆ‘ä»¬çš„toy Promiseç”¨äºç”Ÿäº§çš„è¯ï¼Œè¿™ä¹Ÿæ˜¯è¦è€ƒè™‘çš„ã€‚</li>
<li>ä¸ºäº†è®©æˆ‘ä»¬çš„toy Promiseå˜å¾—æ›´å¼ºå£®ï¼Œæˆ‘ä»¬éœ€è¦æ‹¥æœ‰å¼ºå¥çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ¯”å¦‚éªŒè¯executorå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€thenæ–¹æ³•çš„å‚æ•°åªèƒ½æ˜¯å‡½æ•°æˆ–è€…undefinedæˆ–nullï¼Œåˆæ¯”å¦‚executorå’Œthenæ–¹æ³•ä¸­æŠ›å‡ºçš„é”™è¯¯å¹¶ä¸èƒ½å¤Ÿè¢«window.onerrorç›‘æµ‹åˆ°ï¼Œè€Œåªèƒ½å¤Ÿé€šè¿‡é”™è¯¯å¤„ç†å‡½æ•°æ¥å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯éœ€è¦è€ƒè™‘çš„å› ç´ ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬çš„Promise polyfillæ˜¯è€ƒè™‘æ”¯æŒå¤šå¹³å°ï¼Œé‚£ä¹ˆé¦–è¦è€ƒè™‘çš„å°±æ˜¯æµè§ˆå™¨ç¯å¢ƒæˆ–Node.jsç¯å¢ƒï¼Œå…¶å®åœ¨è¿™ä¸¤ä¸ªå¹³å°ï¼ŒåŸç”ŸPromiseéƒ½æ˜¯æ”¯æŒä¸¤ä¸ªäº‹ä»¶çš„ã€‚å°±æ‹¿æµè§ˆå™¨ç«¯ä¸¾ä¾‹ï¼š</li>
</ol>
<ul>
<li><code>unhandledrejection</code>: åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹promiseè¿”å›çš„é”™è¯¯è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨windowå¯¹è±¡ä¸Šé¢è§¦å‘è¯¥äº‹ä»¶ã€‚</li>
<li><code>rejectionhandled</code>:å¦‚æœåœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯åï¼Œæˆ‘ä»¬æ‰å»å¯¹promiseè¿”å›çš„é”™è¯¯è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨windowå¯¹è±¡ä¸Šé¢ç›‘å¬åˆ°æ­¤äº‹ä»¶ã€‚</li>
</ul>
<p>å…³äºè¿™ä¸¤ä¸ªäº‹ä»¶ä»¥åŠnode.jså¹³å°ä¸Šé¢ç±»ä¼¼çš„äº‹ä»¶è¯·å‚è€ƒNicholas C. Zakasæ–°ä¹¦</p>
<p>Promiseèƒ½å¤Ÿå¾ˆæ£’çš„å¤„ç†å¼‚æ­¥ç¼–ç¨‹ï¼Œè¦æƒ³å­¦å¥½å®ƒæˆ‘è®¤ä¸ºæœ€å¥½çš„æ–¹æ³•å°±æ˜¯äº²è‡ªåŠ¨æ‰‹å»å®ç°ä¸€ä¸ªè‡ªå·±çš„Promiseã€‚</p>
<p>å®Œæ•´codeï¼š</p>
<pre><code>/**
 * 2016.09.19
 */
const PENDING = &apos;PENDING&apos; // Promise çš„åˆå§‹çŠ¶æ€
const FULFILLED = &apos;FULFILLED&apos; // Promise æˆåŠŸè¿”å›åçš„çŠ¶æ€
const REJECTED = &apos;REJECTED&apos; // Promise å¤±è´¥åçš„çŠ¶æ€

const isThenable = data =&gt; data &amp;&amp; data.then &amp;&amp; typeof data.then === &apos;function&apos;
const isPromise = object =&gt; isThenable(object) &amp;&amp; (&apos;catch&apos; in object) &amp;&amp; typeof object.catch === &apos;function&apos;
const noop = () =&gt; {}
const range = n =&gt; n === 0 ? [] : [n, ...range(n - 1)]

// resolve function
const statusProvider = (promise, status) =&gt; data =&gt; {
    if (promise.status !== PENDING) return false
    promise.status = status
    promise.result = data
    promise.listeners[status].forEach(fn =&gt; fn(data))
}

class APromise {
    constructor(executor) {
        if (typeof executor !== &apos;function&apos;) {
            throw new TypeError(`Promise resolver ${executor.toString()} is not a function`)
        }
        this.status = PENDING
        this.listeners = {
            FULFILLED: [],
            REJECTED: []
        }
        this.result = undefined

        try {
            executor(statusProvider(this, FULFILLED), statusProvider(this, REJECTED))
        } catch (e) {
            statusProvider(this, REJECTED)(e)
        }
    }
    // prototype method
    then(...args) {
        const child = new this.constructor(noop)

        const handler = fn =&gt; data =&gt; {
            if (typeof fn === &apos;function&apos;) {
                try {
                    const result = fn(data)
                    if (isThenable(result)) {
                        isPromise(result) ? Object.assign(child, result) : Object.assign(child, new this.constructor(result.then))
                    } else {
                        statusProvider(child, FULFILLED)(result)
                    }
                } catch (e) {
                    statusProvider(child, REJECTED)(e)
                }
            } else if (!fn) {
                statusProvider(child, this.status)(data)
            }
        }
        switch (this.status) {
            case PENDING: {
                this.listeners[FULFILLED].push(handler(args[0]))
                this.listeners[REJECTED].push(handler(args[1]))
                break
            }
            case FULFILLED: {
                handler(args[0])(this.result)
                break
            }
            case REJECTED: {
                handler(args[1])(this.result)
                break
            }
        }
        return child
    }

    catch(arg) {
        return this.then(undefined, arg)
    }
}

APromise.resolve = data =&gt; {
    if (isPromise(data)) return data
    return isThenable(data) ? new APromise(data.then) : new APromise((resolve, reject) =&gt; resolve(data))
}

APromise.reject = err =&gt; new APromise((resolve, reject) =&gt; reject(err))

APromise.all = promises =&gt; {
    const length = promises.length
    const result = new APromise(noop)
    let count = 0
    const values = range(length)

    promises.forEach((p, i) =&gt; {
        p.then(data =&gt; {
            values[i] = data
            count++
            if (count === length) statusProvider(result, FULFILLED)(values)
        }, statusProvider(result, REJECTED))
    })
    return result
}

APromise.race = promises =&gt; {
    const result = new APromise(noop)
    promises.forEach((p, i) =&gt; {
        p.then(statusProvider(result, FULFILLED), statusProvider(result, REJECTED))
    })
    return result
}

export default APromise
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/24/v-for-å¾ªç¯-indexçš„ä¼ å€¼é—®é¢˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/24/v-for-å¾ªç¯-indexçš„ä¼ å€¼é—®é¢˜/" itemprop="url">v-for å¾ªç¯ indexçš„ä¼ å€¼é—®é¢˜</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-06-24T23:02:54+08:00">
                2018-06-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>&lt;el-submenu :index=&quot;index&quot; v-for=&quot;(item,index) in menuList&quot;&gt;

    &lt;el-menu-item :index=&quot;index&quot; 
       v-for=&quot;(subItem,subindex) in item.subMenuList&quot;&gt;
        {{index}}-{{subItem.subMenuName}}&lt;/el-menu-item&gt;

&lt;/el-submenu&gt;
</code></pre><p>å‘ç°å­ç»„ä»¶è·å–åˆ°çš„indexä¸€ç›´éƒ½æ˜¯undefinedã€‚</p>
<p>ä¿®æ”¹åŠæ³•ï¼š</p>
<pre><code>&lt;el-menu-item :index=&quot;&apos;&apos;+index&quot; 
     v-for=&quot;(subItem,subindex) in item.subMenuList&quot;&gt;
  {{index}}-{{subItem.subMenuName}}
&lt;/el-menu-item&gt;
</code></pre><p>å°† :index çš„åˆ¶æ”¹ä¸ºâ€™â€™+indexï¼Œä¸€å®šæ˜¯å•å¼•å·â€™â€™ ï¼Œå­ç»„ä»¶è·å–çš„åˆ°çš„å°±å˜æˆå­—ç¬¦ä¸²â€0,â€â€1â€â€¦..</p>
<p>å°†å­—ç¬¦ä¸²â€0â€å˜æˆæ•´æ•°   +â€0â€ å³å¯ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/21/ç§»åŠ¨ç«¯è®¾ç½®äº†overflow-hiddenå’Œborder-radiusï¼Œå­å…ƒç´ è¶…å‡ºéƒ¨åˆ†ä¸éšè—é—®é¢˜ï¼Ÿ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/21/ç§»åŠ¨ç«¯è®¾ç½®äº†overflow-hiddenå’Œborder-radiusï¼Œå­å…ƒç´ è¶…å‡ºéƒ¨åˆ†ä¸éšè—é—®é¢˜ï¼Ÿ/" itemprop="url">ç§»åŠ¨ç«¯è®¾ç½®äº†overflow:hiddenå’Œborder-radiusï¼Œå­å…ƒç´ è¶…å‡ºéƒ¨åˆ†ä¸éšè—é—®é¢˜ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-06-21T14:41:09+08:00">
                2018-06-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;&lt;/title&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;
        &lt;link rel=&quot;stylesheet&quot;type=&quot;text/css&quot; href=&quot;css/SB.css&quot; /&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            .main {
                width: 300px;
                height: 100px;
                border: 1px solid red;
                border-radius: 15px;
                overflow: hidden;
                /*transform:rotate(0deg); */
            }

            .con {
                display: block;
                overflow: scroll;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                white-space: nowrap;
                font-size: 0px;
            }

            .item {
                width: 100px;
                height: 100px;
                background: green;
                display: inline-block;
                position: relative;
            }

            .item:nth-child(2n) {
                background: red;
            }
            .item p{
                width: 50px;
                height: 20px;
                color: white;
                text-align: center;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                top: 0px;
                background: blue;
                font-size: 12px;
            }
        &lt;/style&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;div class=&quot;main&quot;&gt;
            &lt;div class=&quot;con&quot;&gt;
                &lt;div class=&quot;item&quot;&gt;
                    &lt;p&gt;å¿«ç‚¹&lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&quot;item&quot;&gt;
                    &lt;p&gt;å¿«ç‚¹&lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&quot;item&quot;&gt;
                    &lt;p&gt;å¿«ç‚¹&lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&quot;item&quot;&gt;
                    &lt;p&gt;å¿«ç‚¹&lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&quot;item&quot;&gt;
                    &lt;p&gt;å¿«ç‚¹&lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;

&lt;/html&gt;
å¤åˆ¶ä»£ç 
</code></pre><h3 id="PC"><a href="#PC" class="headerlink" title="PC"></a>PC</h3><p><img src="https://user-gold-cdn.xitu.io/2018/5/14/1635d69655dafdb2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt=""></p>
<h3 id="ç§»åŠ¨ç«¯"><a href="#ç§»åŠ¨ç«¯" class="headerlink" title="ç§»åŠ¨ç«¯"></a>ç§»åŠ¨ç«¯</h3><p><img src="https://user-gold-cdn.xitu.io/2018/5/14/1635d6a28737a214?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt=""><br>è§£å†³åŠæ³•ï¼š</p>
<pre><code>.main {
                width: 300px;
                height: 100px;
                border: 1px solid red;
                border-radius: 15px;
                overflow: hidden;
                transform:rotate(0deg);  /*transform: scale(1);ä¹Ÿå¯ä»¥*/
            }
å¤åˆ¶ä»£ç 
</code></pre><p><img src="https://user-gold-cdn.xitu.io/2018/5/14/1635d6b547a6dd86?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/03/JavaScriptçš„äº‹ä»¶å¾ªç¯/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/03/JavaScriptçš„äº‹ä»¶å¾ªç¯/" itemprop="url">JavaScriptçš„äº‹ä»¶å¾ªç¯</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-06-03T11:15:38+08:00">
                2018-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Node-js-äº‹ä»¶å¾ªç¯ä¸€-æµ…æ"><a href="#Node-js-äº‹ä»¶å¾ªç¯ä¸€-æµ…æ" class="headerlink" title="Node.js äº‹ä»¶å¾ªç¯ä¸€: æµ…æ"></a>Node.js äº‹ä»¶å¾ªç¯ä¸€: æµ…æ</h2><blockquote>
<p>ç†è§£äº‹ä»¶å¾ªç¯ç³»åˆ—ç¬¬ä¸€æ­¥ æµ…æå’Œæ€»è§ˆ</p>
</blockquote>
<p>å¤šæ•°çš„ç½‘ç«™ä¸éœ€è¦å¤§é‡è®¡ç®—ï¼Œç¨‹åºèŠ±è´¹çš„æ—¶é—´ä¸»è¦é›†ä¸­åœ¨ç£ç›˜ I/O å’Œç½‘ç»œ I/O ä¸Šé¢</p>
<p>SSDè¯»å–å¾ˆå¿«ï¼Œä½†å’ŒCPUå¤„ç†æŒ‡ä»¤çš„é€Ÿåº¦æ¯”èµ·æ¥ä¹Ÿä¸åœ¨ä¸€ä¸ªæ•°é‡çº§ä¸Šï¼Œè€Œä¸”ç½‘ç»œä¸Šä¸€ä¸ªæ•°æ®åŒ…æ¥å›çš„æ—¶é—´æ›´æ…¢ï¼š</p>
<p><img src="https://pic1.zhimg.com/v2-67a42368c7dffa3348730760c9c0b907_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-67a42368c7dffa3348730760c9c0b907_hd.jpg" alt=""></p>
<p>ä¸€ä¸ªæ•°æ®åŒ…æ¥å›çš„å»¶è¿Ÿå¹³å‡320ms(æˆ‘ç½‘é€Ÿæ…¢ï¼Œpingå›½å†…ç½‘ç«™ä¼šæ›´å¿«)ï¼Œè¿™æ®µæ—¶é—´å†…ä¸€ä¸ªæ™®é€š cpu æ‰§è¡Œå‡ åƒä¸‡ä¸ªå‘¨æœŸåº”è¯¥æ²¡é—®é¢˜</p>
<p>å› æ­¤å¼‚æ­¥IOå°±è¦å‘æŒ¥ä½œç”¨äº†ï¼Œæ¯”å¦‚ç”¨å¤šçº¿ç¨‹ï¼Œå¦‚æœç”¨ Java å»è¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé˜»å¡çš„æ“ä½œï¼Œåœ¨ç­‰å¾…æ•°æ®è¿”å›çš„è¿‡ç¨‹ä¸­ä»€ä¹ˆä¹Ÿå¹²ä¸äº†ï¼Œå› æ­¤å°±å¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†æ–‡ä»¶è¯»å–ï¼Œè¯»å–æ“ä½œç»“æŸåå†å»é€šçŸ¥ä¸»çº¿ç¨‹ã€‚</p>
<p>è¿™æ ·è™½ç„¶è¡Œå¾—é€šï¼Œä½†æ˜¯ä»£ç å†™èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚åƒ Node.js V8 è¿™ç§æ— æ³•å¼€ä¸€ä¸ªçº¿ç¨‹çš„æ€ä¹ˆåŠï¼Ÿ</p>
<p>å…ˆçœ‹ä¸‹é¢å‡½æ•°æ‰§è¡Œè¿‡ç¨‹</p>
<h2 id="æ ˆ-Stack"><a href="#æ ˆ-Stack" class="headerlink" title="æ ˆ Stack"></a>æ ˆ Stack</h2><p>å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„åœ°å€ã€å‚æ•°ã€å±€éƒ¨å˜é‡éƒ½ä¼šå‹å…¥åˆ°ä¸€ä¸ª stack ä¸­</p>
<pre><code>function fire() {
    const result = sumSqrt(3, 4)
    console.log(result);
}
function sumSqrt(x, y) {
    const s1 = square(x)
    const s2 = square(y)
    const sum = s1 + s2;
    return Math.sqrt(sum)
}
function square(x) {
    return x * x;
}

fire()
</code></pre><blockquote>
<p>ä¸‹é¢çš„å›¾éƒ½æ˜¯ç”¨ keynote åšçš„ <a href="https://link.zhihu.com/?target=https%3A//github.com/ccforward/cc/blob/master/Blog/pic/event-loop.key" target="_blank" rel="noopener">keynoteåœ°å€</a></p>
</blockquote>
<p>å‡½æ•° <code>fire</code> é¦–å…ˆè¢«è°ƒç”¨</p>
<p><img src="https://pic3.zhimg.com/v2-a3840ed51ad7ccaedb915e05b087e1e4_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-a3840ed51ad7ccaedb915e05b087e1e4_hd.jpg" alt=""></p>
<p><code>fire</code> è°ƒç”¨ <code>sumSqrt</code> å‡½æ•° å‚æ•°ä¸º3å’Œ4</p>
<p><img src="https://pic4.zhimg.com/v2-5871549477044a0e7a657f9a16e9367c_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-5871549477044a0e7a657f9a16e9367c_hd.jpg" alt=""></p>
<p>ä¹‹åè°ƒç”¨ <code>square</code> å‚æ•°ä¸º x, x==3</p>
<p><img src="https://pic2.zhimg.com/v2-ced7e64c06861509c593cdb0cfbc594e_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-ced7e64c06861509c593cdb0cfbc594e_hd.jpg" alt=""></p>
<p>å½“ <code>square</code> æ‰§è¡Œç»“æŸè¿”å›æ—¶ï¼Œä» stack ä¸­å¼¹å‡ºï¼Œå¹¶å°†è¿”å›å€¼èµ‹å€¼ç»™ s1<br>s1åŠ å…¥åˆ° sumSqrt çš„ stack frame ä¸­</p>
<p><img src="https://pic2.zhimg.com/v2-0f214a42ee6c2226c343edb7431116be_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-0f214a42ee6c2226c343edb7431116be_hd.jpg" alt=""></p>
<p>ä»¥åŒæ ·çš„æ–¹å¼è°ƒç”¨ä¸‹ä¸€ä¸ª <code>square</code> å‡½æ•°</p>
<p><img src="https://pic4.zhimg.com/v2-6488db685f7ba396d9bb72b80daf0465_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-6488db685f7ba396d9bb72b80daf0465_hd.jpg" alt=""></p>
<p><img src="https://pic1.zhimg.com/v2-4900e4ce2e398d085ceb6f2ea31ad6d9_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-4900e4ce2e398d085ceb6f2ea31ad6d9_hd.jpg" alt=""></p>
<p>åœ¨ä¸‹ä¸€è¡Œçš„è¡¨è¾¾å¼ä¸­è®¡ç®—å‡º s1+s2 å¹¶èµ‹å€¼ç»™ sum</p>
<p><img src="https://pic3.zhimg.com/v2-0045b1427a3fd41aa31cbac4271b6200_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-0045b1427a3fd41aa31cbac4271b6200_hd.jpg" alt=""></p>
<p>ä¹‹åè°ƒç”¨ <code>Math.sqrt</code> å‚æ•°ä¸ºsum</p>
<p><img src="https://pic4.zhimg.com/v2-89dc079ce6308a32fbf78c29b67c4985_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-89dc079ce6308a32fbf78c29b67c4985_hd.jpg" alt=""></p>
<p>ç°åœ¨å°±å‰©ä¸‹ <code>sumSqrt</code> å‡½æ•°è¿”å›è®¡ç®—ç»“æœäº†</p>
<p><img src="https://pic2.zhimg.com/v2-3fe1e6705f665c11f3c350bdd4f643c9_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-3fe1e6705f665c11f3c350bdd4f643c9_hd.jpg" alt=""></p>
<p>è¿”å›å€¼èµ‹å€¼ç»™ result</p>
<p><img src="https://pic4.zhimg.com/v2-d55914f97f05518c2f31b10909efb4f4_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-d55914f97f05518c2f31b10909efb4f4_hd.jpg" alt=""></p>
<p>åœ¨ console ä¸­æ‰“å°å‡º result</p>
<p><img src="https://pic3.zhimg.com/v2-99d7b0ece63e888549b258944fe0e1e4_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-99d7b0ece63e888549b258944fe0e1e4_hd.jpg" alt=""></p>
<p>æœ€ç»ˆ <code>fire</code> æ²¡æœ‰ä»»ä½•è¿”å›å€¼ ä»stackä¸­å¼¹å‡º stackä¹Ÿæ¸…ç©ºäº†</p>
<p><img src="https://pic4.zhimg.com/v2-bd4e4983cbba11fe080913f2a1d0ef43_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-bd4e4983cbba11fe080913f2a1d0ef43_hd.jpg" alt=""></p>
<p>å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•åæœ¬åœ°å˜é‡ä¼šä» stack ä¸­å¼¹å‡ºï¼Œè¿™åªæœ‰åœ¨ä½¿ç”¨ numbers string boolean è¿™ç§åŸºæœ¬æ•°æ®ç±»å‹æ—¶æ‰ä¼šå‘ç”Ÿã€‚è€Œå¯¹è±¡ã€æ•°ç»„çš„å€¼æ˜¯å­˜åœ¨äº heap(å †) ä¸­çš„ï¼Œstack åªå­˜æ”¾äº†ä»–ä»¬å¯¹åº”çš„æŒ‡é’ˆã€‚</p>
<p>å½“å‡½æ•°ä¹‹è¡Œç»“æŸä» stack ä¸­å¼¹å‡ºæ¥æ—¶ï¼Œåªæœ‰å¯¹è±¡çš„æŒ‡é’ˆè¢«å¼¹å‡ºï¼Œè€ŒçœŸæ­£çš„å€¼ä¾ç„¶å­˜åœ¨ heap ä¸­ï¼Œç„¶åç”±åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨çš„æ¸…ç†å›æ”¶ã€‚</p>
<h2 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h2><p>é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥äº†è§£å‡½æ•°çš„æ‰§è¡Œé¡ºåº</p>
<pre><code>&apos;use strict&apos;

const express = require(&apos;express&apos;)
const superagent = require(&apos;superagent&apos;)
const app = express()

app.get(&apos;/&apos;, getArticle)

function getArticle(req, res) {
    fetchArticle(req, res)
    print()
}

const aids = [4564824, 4506868, 4767667, 4856099, 7456996];

function fetchArticle(req, res) {
    const aid = aids[Math.floor(Math.random() * aids.length)]
    superagent.get(`http://news-at.zhihu.com/api/4/news/${aid}`)
        .end((err, res) =&gt; {
            if(err) {
                console.log(&apos;error ......&apos;);
                return res.status(500).send(&apos;an error ......&apos;)
            }
            const article = res.body
            res.send(article)
            console.log(&apos;Got an article&apos;)
        })

    console.log(&apos;Now is fetching an article&apos;)
}

function print(){
    console.log(&apos;Print something&apos;)
}


app.listen(&apos;5000&apos;)
</code></pre><p>è¯·æ±‚ <code>http://localhost:5000/</code> åæ‰“å°å‡º</p>
<pre><code>Now is fetching an article

Print something

Got an article
</code></pre><p>è™½ç„¶ V8 æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†åº•å±‚çš„ C++ API å´ä¸æ˜¯ã€‚è¿™æ„å‘³ç€å½“æˆ‘ä»¬æ‰§è¡Œä¸€äº›éé˜»å¡çš„æ“ä½œï¼ŒNodeä¼šè°ƒç”¨ä¸€äº›ä»£ç ï¼Œä¸å¼•æ“é‡Œçš„jsä»£ç åŒæ—¶æ‰§è¡Œã€‚ä¸€æ—¦è¿™ä¸ªéšè—çš„çº¿ç¨‹æ”¶åˆ°äº†ç­‰å¾…çš„è¿”å›å€¼æˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œä¹‹å‰æä¾›çš„å›è°ƒå‡½æ•°å°±ä¼šæ‰§è¡Œã€‚</p>
<p>ä¸Šé¢çš„è¯´çš„Nodeè°ƒç”¨çš„ä¸€äº›ä»£ç å…¶å®å°±æ˜¯ <a href="https://link.zhihu.com/?target=https%3A//github.com/libuv/libuv" target="_blank" rel="noopener">libuv</a>ï¼Œä¸€ä¸ªå¼€æºçš„è·¨å¹³å°çš„å¼‚æ­¥ I/O ã€‚æœ€åˆå°±æ˜¯ä¸º Node.js å¼€å‘çš„ï¼Œç°åœ¨<a href="https://link.zhihu.com/?target=https%3A//github.com/libuv/libuv/wiki/Projects-that-use-libuv" target="_blank" rel="noopener">å¾ˆå¤šé¡¹ç›®</a>éƒ½åœ¨ç”¨</p>
<h2 id="ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»»åŠ¡é˜Ÿåˆ—"></a>ä»»åŠ¡é˜Ÿåˆ—</h2><p>javascript æ˜¯å•çº¿ç¨‹äº‹ä»¶é©±åŠ¨çš„è¯­è¨€ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç»™æ—¶é—´æ·»åŠ ç›‘å¬å™¨ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ï¼Œç›‘å¬å™¨å°±èƒ½æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p>
<p>å½“æˆ‘ä»¬å»è°ƒç”¨ <code>setTimeout`</code>http.get<code></code>fs.readFile`, Node.js ä¼šæŠŠè¿™äº›å®šæ—¶å™¨ã€httpã€IOæ“ä½œå‘é€ç»™å¦ä¸€ä¸ªçº¿ç¨‹ä»¥ä¿è¯V8ç»§ç»­æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ã€‚</p>
<p>ç„¶è€Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹å’Œä¸€ä¸ª call-stack ï¼Œè¿™æ ·å½“ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„æ“ä½œè¿˜åœ¨æ‰§è¡Œæ—¶ï¼Œæœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚requestè¿‡æ¥ï¼Œé‚£è¿™æ—¶ä»–çš„å›è°ƒå°±éœ€è¦ç­‰stackå˜ç©ºæ‰èƒ½æ‰§è¡Œã€‚</p>
<p>å›è°ƒå‡½æ•°æ­£åœ¨ç­‰å¾…è½®åˆ°è‡ªå·±æ‰§è¡Œæ‰€æ’çš„é˜Ÿå°±è¢«ç§°ä¸ºä»»åŠ¡é˜Ÿåˆ—(æˆ–è€…äº‹ä»¶é˜Ÿåˆ—ã€æ¶ˆæ¯é˜Ÿåˆ—)ã€‚æ¯å½“ä¸»çº¿ç¨‹å®Œæˆå‰ä¸€ä¸ªä»»åŠ¡ï¼Œå›è°ƒå‡½æ•°å°±ä¼šåœ¨ä¸€ä¸ªæ— é™å¾ªç¯åœˆé‡Œè¢«è°ƒç”¨ï¼Œå› æ­¤è¿™ä¸ªåœˆè¢«ç§°ä¸ºäº‹ä»¶å¾ªç¯ã€‚</p>
<p>æˆ‘ä»¬å‰é¢é‚£ä¸ªè·å–æ–‡ç« çš„ä¾‹å­çš„æ‰§è¡Œé¡ºåºå°±ä¼šå¦‚ä¸‹ï¼š</p>
<ol>
<li>express ç»™ request äº‹ä»¶æ³¨å†Œäº†ä¸€ä¸ª handlerï¼Œå¹¶ä¸”å½“è¯·æ±‚åˆ°è¾¾è·¯å¾„ â€˜/â€˜ æ—¶æ¥è§¦å‘handler</li>
<li>è°ƒè¿‡å„ä¸ªå‡½æ•°å¹¶ä¸”åœ¨ç«¯å£ 5000 ä¸Šå¯åŠ¨ç›‘å¬</li>
<li>stack ä¸ºç©ºï¼Œç­‰å¾… <code>request</code> äº‹ä»¶è§¦å‘</li>
<li>æ ¹æ®ä¼ å…¥çš„è¯·æ±‚ï¼Œäº‹ä»¶è§¦å‘ï¼Œexpress è°ƒç”¨ä¹‹å‰æä¾›çš„å‡½æ•° <code>getArticle</code></li>
<li><code>getArticle</code> å‹å…¥(push) stack</li>
<li><code>fetchArticle</code> è¢«è°ƒç”¨ åŒæ—¶å‹å…¥ stack</li>
<li><code>Math.floor</code> å’Œ <code>Math.random</code> è¢«è°ƒç”¨å‹å…¥ stack ç„¶åå† å¼¹å‡º(pop), ä» aids é‡Œé¢å–å‡ºçš„ä¸€ä¸ªå€¼è¢«èµ‹å€¼ç»™å˜é‡ aid</li>
<li><code>superagent.get</code> è¢«æ‰§è¡Œï¼Œå‚æ•°ä¸º <code>&#39;http://news-at.zhihu.com/api/4/news/${aid}&#39;</code> ,å¹¶ä¸”å›è°ƒå‡½æ•°æ³¨å†Œç»™äº† <code>end</code> äº‹ä»¶</li>
<li>åˆ° <code>http://news-at.zhihu.com/api/4/news/${aid}</code> çš„HTTPè¯·æ±‚è¢«å‘é€åˆ°åå°çº¿ç¨‹ï¼Œç„¶åå‡½æ•°ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</li>
<li><code>&#39;Now is fetching an article&#39;</code> æ‰“å°åœ¨ console ä¸­ã€‚ å‡½æ•° <code>fetchArticle</code> è¿”å›</li>
<li><code>print</code> å‡½æ•°è¢«è°ƒç”¨, <code>&#39;Print something&#39;</code> æ‰“å°åœ¨ console ä¸­</li>
<li>å‡½æ•° <code>getArticle</code> è¿”å›ï¼Œå¹¶ä» stack ä¸­å¼¹å‡ºï¼Œ stack ä¸ºç©º</li>
<li>ç­‰å¾… <code>http://news-at.zhihu.com/api/4/news/${aid}</code> å‘é€ç›¸åº”ä¿¡æ¯</li>
<li>å“åº”ä¿¡æ¯åˆ°è¾¾ï¼Œ<code>end</code> äº‹ä»¶è¢«è§¦å‘</li>
<li>æ³¨å†Œç»™ <code>end</code> äº‹ä»¶çš„åŒ¿åå›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å’Œä»–é—­åŒ…ä¸­çš„æ‰€æœ‰å˜é‡å‹å…¥ stackï¼Œè¿™æ„å‘³ç€è¿™ä¸ªåŒ¿åå‡½æ•°å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹ <code>express</code>, <code>superagent</code>, <code>app</code>, <code>aids</code>, <code>req</code>, <code>res</code>, <code>aid</code> çš„å€¼ä»¥åŠä¹‹å‰æ‰€æœ‰å·²ç»å®šä¹‰çš„å‡½æ•°</li>
<li>å‡½æ•° <code>res.send()</code> ä¼´éšç€ 200 æˆ– 500 çš„çŠ¶æ€ç è¢«æ‰§è¡Œï¼Œä½†åŒæ—¶åˆè¢«æ”¾å…¥åˆ°åå°çº¿ç¨‹ä¸­ï¼Œå› æ­¤ å“åº”æµ ä¸ä¼šé˜»å¡æˆ‘ä»¬å‡½æ•°çš„æ‰§è¡Œã€‚åŒ¿åå‡½æ•°ä¹Ÿè¢« pop å‡º stackã€‚</li>
</ol>
<h2 id="Microtasks-Macrotasks"><a href="#Microtasks-Macrotasks" class="headerlink" title="Microtasks Macrotasks"></a>Microtasks Macrotasks</h2><p>ä»»åŠ¡é˜Ÿåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œè¿˜æœ‰ microtasks å’Œ macrotasks</p>
<p>microtasks:</p>
<ul>
<li>process.nextTick</li>
<li>promise</li>
<li>Object.observe</li>
</ul>
<p>macrotasks:</p>
<ul>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate</li>
<li>I/O</li>
</ul>
<p>è¿™ä¸¤ä¸ªçš„è¯¦ç»†åŒºåˆ«ä¸‹ä¸€ç¯‡å†å†™ï¼Œå…ˆçœ‹ä¸€æ®µä»£ç </p>
<pre><code>console.log(&apos;start&apos;)

const interval = setInterval(() =&gt; {  
  console.log(&apos;setInterval&apos;)
}, 0)

setTimeout(() =&gt; {  
  console.log(&apos;setTimeout 1&apos;)
  Promise.resolve()
      .then(() =&gt; {
        console.log(&apos;promise 3&apos;)
      })
      .then(() =&gt; {
        console.log(&apos;promise 4&apos;)
      })
      .then(() =&gt; {
        setTimeout(() =&gt; {
          console.log(&apos;setTimeout 2&apos;)
          Promise.resolve()
              .then(() =&gt; {
                console.log(&apos;promise 5&apos;)
              })
              .then(() =&gt; {
                console.log(&apos;promise 6&apos;)
              })
              .then(() =&gt; {
                clearInterval(interval)
              })
        }, 0)
      })
}, 0)

Promise.resolve()
    .then(() =&gt; {  
        console.log(&apos;promise 1&apos;)
    })
    .then(() =&gt; {
        console.log(&apos;promise 2&apos;)
    })
</code></pre><p>ç†è§£äº†nodeçš„äº‹ä»¶å¾ªç¯è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“å¾—å‡ºç­”æ¡ˆçš„ï¼š</p>
<pre><code>start
promise 1
promise 2
setInterval
setTimeout 1
promise 3
promise 4
setInterval
setTimeout 2
promise 5
promise 6
</code></pre><p>æ ¹æ® <a href="https://link.zhihu.com/?target=https%3A//html.spec.whatwg.org/multipage/webappapis.html%23task-queue" target="_blank" rel="noopener">WHATVG</a> çš„è¯´æ˜ï¼Œåœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„å‘¨æœŸ(cycle)ä¸­ä¸€ä¸ª (macro)task åº”è¯¥ä» macrotask é˜Ÿåˆ—å¼€å§‹æ‰§è¡Œã€‚å½“è¿™ä¸ª macrotask ç»“æŸåï¼Œæ‰€æœ‰çš„ microtasks å°†åœ¨åŒä¸€ä¸ª cycle ä¸­æ‰§è¡Œã€‚åœ¨ microtasks æ‰§è¡Œæ—¶è¿˜å¯ä»¥åŠ å…¥æ›´å¤šçš„ microtaskï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªçš„æ‰§è¡Œï¼Œç›´åˆ° microtask é˜Ÿåˆ—æ¸…ç©ºã€‚</p>
<p>è§„èŒƒç†è§£èµ·æ¥æœ‰ç‚¹æ™¦æ¶©ï¼Œæ¥çœ‹ä¸‹ä¸Šé¢çš„ä¾‹å­</p>
<h2 id="Cycle-1"><a href="#Cycle-1" class="headerlink" title="Cycle 1"></a>Cycle 1</h2><p>1)<code>setInterval</code> è¢«åˆ—ä¸º task</p>
<p>2)<code>setTimeout 1</code> è¢«åˆ—ä¸º task</p>
<p>3)<code>Promise.resolve 1</code> ä¸­ä¸¤ä¸ª <code>then</code> è¢«åˆ—ä¸º microtask</p>
<p>4) stack æ¸…ç©º microtasks æ‰§è¡Œ</p>
<p>ä»»åŠ¡é˜Ÿåˆ—ï¼š <code>setInterval`</code>setTimeout 1`</p>
<h2 id="Cycle-2"><a href="#Cycle-2" class="headerlink" title="Cycle 2"></a>Cycle 2</h2><p>5) microtasks é˜Ÿåˆ—æ¸…ç©º <code>setInteval</code> çš„å›è°ƒå¯ä»¥æ‰§è¡Œã€‚å¦ä¸€ä¸ª <code>setInterval</code> è¢«åˆ—ä¸º task , ä½äº <code>setTimeout 1</code>åé¢</p>
<p>ä»»åŠ¡é˜Ÿåˆ—ï¼š <code>setTimeout 1`</code>setInterval`</p>
<h2 id="Cycle-3"><a href="#Cycle-3" class="headerlink" title="Cycle 3"></a>Cycle 3</h2><p>6) microtask é˜Ÿåˆ—æ¸…ç©ºï¼Œ<code>setTimeout 1</code> çš„å›è°ƒå¯ä»¥æ‰§è¡Œï¼Œ<code>promise 3</code> å’Œ <code>promise 4</code> è¢«åˆ—ä¸º microtasks</p>
<p>7)<code>promise 3</code> å’Œ <code>promise 4</code> æ‰§è¡Œã€‚ <code>setTimeout 2</code> è¢«åˆ—ä¸º task</p>
<p>ä»»åŠ¡é˜Ÿåˆ— <code>setInterval`</code>setTimeout 2`</p>
<h2 id="Cycle-4"><a href="#Cycle-4" class="headerlink" title="Cycle 4"></a>Cycle 4</h2><p>8) microtask é˜Ÿåˆ—æ¸…ç©º <code>setInteval</code> çš„å›è°ƒå¯ä»¥æ‰§è¡Œã€‚ç„¶åå¦ä¸€ä¸ª <code>setInterval</code> è¢«åˆ—ä¸º task ï¼Œä½äº <code>setTimeout 2</code> åé¢</p>
<p>ä»»åŠ¡é˜Ÿåˆ—ï¼š <code>setTimeout 2`</code>setInterval`</p>
<p>9)<code>setTimeout 2</code> çš„å›è°ƒæ‰§è¡Œï¼Œ <code>promise 5</code> å’Œ <code>promise 6</code> è¢«åˆ—ä¸º microtasks</p>
<p>ç°åœ¨ <code>promise 5</code> å’Œ <code>promise 6</code> çš„å›è°ƒåº”è¯¥æ‰§è¡Œï¼Œå¹¶ä¸” clear æ‰ <code>interval</code>ã€‚ ä½†æœ‰çš„æ—¶å€™ä¸çŸ¥é“ä¸ºä»€ä¹ˆ <code>setInterval</code> è¿˜ä¼šåœ¨æ‰§è¡Œä¸€éï¼Œå˜æˆä¸‹é¢ç»“æœ</p>
<pre><code>...
setTimeout 2
setInterval
promise 5
promise 6
</code></pre><p>ä½†æ˜¯æŠŠä¸Šé¢çš„ä»£ç æ”¾å…¥ chrome console ä¸­æ‰§è¡Œå´æ²¡æœ‰é—®é¢˜ã€‚è¿™ä¸€ç‚¹è¿˜è¦å†æ ¹æ®ä¸åŒçš„ nodeç‰ˆæœ¬ æŸ¥ä¸€ä¸‹ã€‚</p>
<h2 id="å…³äº-macrotask-å’Œ-microtask"><a href="#å…³äº-macrotask-å’Œ-microtask" class="headerlink" title="å…³äº macrotask å’Œ microtask"></a>å…³äº macrotask å’Œ microtask</h2><p>ç”¨ä¾‹å­ç®€å•ç†è§£äº†ä¸‹ macrotask å’Œ microtask</p>
<p>è¿™é‡Œå†è¯¦ç»†çš„æ€»ç»“ä¸‹ä¸¤è€…çš„åŒºåˆ«å’Œä½¿ç”¨</p>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä¸€ä¸ªäº‹ä»¶å¾ªç¯(EventLoop)ä¸­ä¼šæœ‰ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡(Task)ï¼Œè€Œè¿™ä¸ªä»»åŠ¡å°±æ˜¯ä» macrotask é˜Ÿåˆ—ä¸­æ¥çš„ã€‚åœ¨<a href="https://link.zhihu.com/?target=https%3A//html.spec.whatwg.org/multipage/webappapis.html%23task-queue" target="_blank" rel="noopener">whatwgè§„èŒƒ</a>ä¸­æœ‰ queue å°±æ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“è¿™ä¸ª macrotask æ‰§è¡Œç»“æŸåæ‰€æœ‰å¯ç”¨çš„ microtask å°†ä¼šåœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œï¼Œå½“è¿™äº› microtask æ‰§è¡Œç»“æŸåè¿˜èƒ½ç»§ç»­æ·»åŠ  microtask ä¸€ç›´åˆ°çœŸä¸ª microtask é˜Ÿåˆ—æ‰§è¡Œç»“æŸã€‚</p>
<h2 id="æ€ä¹ˆç”¨"><a href="#æ€ä¹ˆç”¨" class="headerlink" title="æ€ä¹ˆç”¨"></a>æ€ä¹ˆç”¨</h2><p>åŸºæœ¬æ¥è¯´ï¼Œå½“æˆ‘ä»¬æƒ³ä»¥åŒæ­¥çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡æ—¶å€™å°±ç”¨ microtaskï¼ˆæ¯”å¦‚æˆ‘ä»¬éœ€è¦ç›´æ¥åœ¨æŸæ®µä»£ç åå°±å»æ‰§è¡ŒæŸä¸ªä»»åŠ¡ï¼Œå°±åƒPromiseä¸€æ ·ï¼‰ã€‚</p>
<p>å…¶ä»–æƒ…å†µå°±ç›´æ¥ç”¨ macrotaskã€‚</p>
<h2 id="ä¸¤è€…çš„å…·ä½“å®ç°"><a href="#ä¸¤è€…çš„å…·ä½“å®ç°" class="headerlink" title="ä¸¤è€…çš„å…·ä½“å®ç°"></a>ä¸¤è€…çš„å…·ä½“å®ç°</h2><ul>
<li>macrotasks: setTimeout setInterval setImmediate I/O UIæ¸²æŸ“</li>
<li>microtasks: Promise process.nextTick Object.observe MutationObserver</li>
</ul>
<h2 id="ä»è§„èŒƒä¸­ç†è§£"><a href="#ä»è§„èŒƒä¸­ç†è§£" class="headerlink" title="ä»è§„èŒƒä¸­ç†è§£"></a>ä»è§„èŒƒä¸­ç†è§£</h2><p>whatwgè§„èŒƒï¼š<a href="https://link.zhihu.com/?target=https%3A//html.spec.whatwg.org/multipage/webappapis.html%23task-queue" target="_blank" rel="noopener">https://html.spec.whatwg.org/multipage/webappapis.html#task-queue</a></p>
<ul>
<li>ä¸€ä¸ªäº‹ä»¶å¾ªç¯(event loop)ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—(task queue) task queue å°±æ˜¯ macrotask queue</li>
<li>æ¯ä¸€ä¸ª event loop éƒ½æœ‰ä¸€ä¸ª microtask queue</li>
<li>task queue == macrotask queue != microtask queue</li>
<li>ä¸€ä¸ªä»»åŠ¡ task å¯ä»¥æ”¾å…¥ macrotask queue ä¹Ÿå¯ä»¥æ”¾å…¥ microtask queue ä¸­</li>
<li>å½“ä¸€ä¸ª task è¢«æ”¾å…¥é˜Ÿåˆ— queue(macroæˆ–micro) é‚£è¿™ä¸ª task å°±å¯ä»¥è¢«ç«‹å³æ‰§è¡Œäº†</li>
</ul>
<p>å†æ¥å›é¡¾ä¸‹äº‹ä»¶å¾ªç¯å¦‚ä½•æ‰§è¡Œä¸€ä¸ªä»»åŠ¡çš„æµç¨‹</p>
<p>å½“æ‰§è¡Œæ ˆ(call stack)ä¸ºç©ºçš„æ—¶å€™ï¼Œå¼€å§‹ä¾æ¬¡æ‰§è¡Œï¼š</p>
<ol>
<li>æŠŠæœ€æ—©çš„ä»»åŠ¡(task A)æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å¦‚æœ task A ä¸ºnull (é‚£ä»»åŠ¡é˜Ÿåˆ—å°±æ˜¯ç©º)ï¼Œç›´æ¥è·³åˆ°ç¬¬6æ­¥</li>
<li>å°† currently running task è®¾ç½®ä¸º task A</li>
<li>æ‰§è¡Œ task A (ä¹Ÿå°±æ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°)</li>
<li>å°† currently running task è®¾ç½®ä¸º null å¹¶ç§»å‡º task A</li>
<li>æ‰§è¡Œ microtask é˜Ÿåˆ—</li>
</ol>
<ul>
<li>a: åœ¨ microtask ä¸­é€‰å‡ºæœ€æ—©çš„ä»»åŠ¡ task X</li>
<li>b: å¦‚æœ task X ä¸ºnull (é‚£ microtask é˜Ÿåˆ—å°±æ˜¯ç©º)ï¼Œç›´æ¥è·³åˆ° g</li>
<li>c: å°† currently running task è®¾ç½®ä¸º task X</li>
<li>d: æ‰§è¡Œ task X</li>
<li>e: å°† currently running task è®¾ç½®ä¸º null å¹¶ç§»å‡º task X</li>
<li>f: åœ¨ microtask ä¸­é€‰å‡ºæœ€æ—©çš„ä»»åŠ¡ , è·³åˆ° b</li>
<li>g: ç»“æŸ microtask é˜Ÿåˆ—</li>
</ul>
<ol>
<li>è·³åˆ°ç¬¬ä¸€æ­¥</li>
</ol>
<p>ä¸Šé¢å°±ç®—æ˜¯ä¸€ä¸ªç®€å•çš„ event-loop æ‰§è¡Œæ¨¡å‹</p>
<p>å†ç®€å•ç‚¹å¯ä»¥æ€»ç»“ä¸ºï¼š</p>
<ol>
<li>åœ¨ macrotask é˜Ÿåˆ—ä¸­æ‰§è¡Œæœ€æ—©çš„é‚£ä¸ª task ï¼Œç„¶åç§»å‡º</li>
<li>æ‰§è¡Œ microtask é˜Ÿåˆ—ä¸­æ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡ï¼Œç„¶åç§»å‡º</li>
<li>ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ª macrotask ä¸­çš„ä»»åŠ¡ (å†è·³åˆ°ç¬¬2æ­¥)</li>
</ol>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul>
<li>å½“ä¸€ä¸ªtask(åœ¨ macrotask é˜Ÿåˆ—ä¸­)æ­£å¤„äºæ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿå¯èƒ½ä¼šæœ‰æ–°çš„äº‹ä»¶è¢«æ³¨å†Œï¼Œé‚£å°±ä¼šæœ‰æ–°çš„ task è¢«åˆ›å»ºã€‚æ¯”å¦‚ä¸‹é¢ä¸¤ä¸ª</li>
</ul>
<ol>
<li>promiseA.then() çš„å›è°ƒå°±æ˜¯ä¸€ä¸ª task</li>
</ol>
<ul>
<li>promiseA æ˜¯ resolvedæˆ–rejected: é‚£è¿™ä¸ª task å°±ä¼šæ”¾å…¥å½“å‰äº‹ä»¶å¾ªç¯å›åˆçš„ microtask queue</li>
<li>promiseA æ˜¯ pending: è¿™ä¸ª task å°±ä¼šæ”¾å…¥ äº‹ä»¶å¾ªç¯çš„æœªæ¥çš„æŸä¸ª(å¯èƒ½ä¸‹ä¸€ä¸ª)å›åˆçš„ microtask queue ä¸­</li>
<li><p>setTimeout çš„å›è°ƒä¹Ÿæ˜¯ä¸ª task ï¼Œå®ƒä¼šè¢«æ”¾å…¥ macrotask queue å³ä½¿æ˜¯ 0ms çš„æƒ…å†µ</p>
</li>
<li><p>microtask queue ä¸­çš„ task ä¼šåœ¨äº‹ä»¶å¾ªç¯çš„å½“å‰å›åˆä¸­æ‰§è¡Œï¼Œå› æ­¤ macrotask queue ä¸­çš„ task å°±åªèƒ½ç­‰åˆ°äº‹ä»¶å¾ªç¯çš„ä¸‹ä¸€ä¸ªå›åˆä¸­æ‰§è¡Œäº†</p>
</li>
<li>click ajax setTimeout çš„å›è°ƒæ˜¯éƒ½æ˜¯ task, åŒæ—¶ï¼ŒåŒ…è£¹åœ¨ä¸€ä¸ª script æ ‡ç­¾ä¸­çš„jsä»£ç ä¹Ÿæ˜¯ä¸€ä¸ª task ç¡®åˆ‡è¯´æ˜¯ macrotaskã€‚</li>
</ul>
<p>ä¸¤è€…çš„å…·ä½“å®ç°</p>
<ul>
<li>macrotasks: setTimeout ï¼ŒsetIntervalï¼Œ setImmediateï¼Œ I/O ï¼ŒUIæ¸²æŸ“ï¼ŒrequestAnimationFrame</li>
<li>microtasks: Promiseï¼Œ process.nextTickï¼Œ Object.observeï¼Œ MutationObserver</li>
</ul>
<p>å†ç®€å•ç‚¹å¯ä»¥æ€»ç»“ä¸ºï¼š<br><img src="https://pic1.zhimg.com/v2-e92a4f5f686d115832b63b9b9e3ac2cd_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-e92a4f5f686d115832b63b9b9e3ac2cd_hd.jpg" alt=""></p>
<ol>
<li>åœ¨ macrotask é˜Ÿåˆ—ä¸­æ‰§è¡Œæœ€æ—©çš„é‚£ä¸ª task ï¼Œç„¶åç§»å‡º</li>
<li>å†æ‰§è¡Œ microtask é˜Ÿåˆ—ä¸­æ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡ï¼Œç„¶åç§»å‡º</li>
<li>ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ª macrotask ä¸­çš„ä»»åŠ¡ (å†è·³åˆ°ç¬¬2æ­¥)</li>
</ol>
<p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä¸€å…±æœ‰Promiseã€MutationObserverä»¥åŠsetTimeoutä¸‰ç§å°è¯•å¾—åˆ°timerFuncçš„æ–¹æ³•ã€‚<br>ä¼˜å…ˆä½¿ç”¨Promiseï¼Œåœ¨Promiseä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä½¿ç”¨MutationObserverï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„å›è°ƒå‡½æ•°éƒ½ä¼šåœ¨microtaskä¸­æ‰§è¡Œï¼Œå®ƒä»¬ä¼šæ¯”setTimeoutæ›´æ—©æ‰§è¡Œï¼Œæ‰€ä»¥ä¼˜å…ˆä½¿ç”¨ã€‚<br>å¦‚æœä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½ä¸æ”¯æŒçš„ç¯å¢ƒåˆ™ä¼šä½¿ç”¨setTimeoutï¼Œåœ¨taskå°¾éƒ¨æ¨å…¥è¿™ä¸ªå‡½æ•°ï¼Œç­‰å¾…è°ƒç”¨æ‰§è¡Œã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ä¼˜å…ˆä½¿ç”¨microtaskï¼Ÿæˆ‘åœ¨é¡¾è½¶çµåœ¨çŸ¥ä¹çš„å›ç­”ä¸­å­¦ä¹ åˆ°ï¼š</p>
<blockquote>
<p>JS çš„ event loop æ‰§è¡Œæ—¶ä¼šåŒºåˆ† task å’Œ microtaskï¼Œå¼•æ“åœ¨æ¯ä¸ª task æ‰§è¡Œå®Œæ¯•ï¼Œä»é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ª task æ¥æ‰§è¡Œä¹‹å‰ï¼Œä¼šå…ˆæ‰§è¡Œå®Œæ‰€æœ‰ microtask é˜Ÿåˆ—ä¸­çš„ microtaskã€‚<br>setTimeout å›è°ƒä¼šè¢«åˆ†é…åˆ°ä¸€ä¸ªæ–°çš„ task ä¸­æ‰§è¡Œï¼Œè€Œ Promise çš„ resolverã€ MutationObserver çš„å›è°ƒéƒ½ä¼šè¢«å®‰æ’åˆ°ä¸€ä¸ªæ–°çš„ microtask ä¸­æ‰§è¡Œï¼Œä¼šæ¯” setTimeout äº§ç”Ÿçš„ task å…ˆæ‰§è¡Œã€‚<br>è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ microtaskï¼Œä¼˜å…ˆä½¿ç”¨ Promiseï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒï¼Œå†å°è¯• MutationObserverã€‚<br>å®åœ¨ä¸è¡Œï¼Œåªèƒ½ç”¨ setTimeout åˆ›å»º task äº†ã€‚<br>ä¸ºå•¥è¦ç”¨ microtaskï¼Ÿ<br>æ ¹æ® HTML Standardï¼Œåœ¨æ¯ä¸ª task è¿è¡Œå®Œä»¥åï¼ŒUI éƒ½ä¼šé‡æ¸²æŸ“ï¼Œé‚£ä¹ˆåœ¨ microtask ä¸­å°±å®Œæˆæ•°æ®æ›´æ–°ï¼Œå½“å‰ task ç»“æŸå°±å¯ä»¥å¾—åˆ°æœ€æ–°çš„ UI äº†ã€‚<br>åä¹‹å¦‚æœæ–°å»ºä¸€ä¸ª task æ¥åšæ•°æ®æ›´æ–°ï¼Œé‚£ä¹ˆæ¸²æŸ“å°±ä¼šè¿›è¡Œä¸¤æ¬¡ã€‚</p>
</blockquote>
<p>é¦–å…ˆæ˜¯Promiseï¼Œ(Promise.resolve()).then()å¯ä»¥åœ¨microtaskä¸­åŠ å…¥å®ƒçš„å›è°ƒï¼Œ</p>
<p>MutationObserveræ–°å»ºä¸€ä¸ªtextNodeçš„DOMå¯¹è±¡ï¼Œç”¨MutationObserverç»‘å®šè¯¥DOMå¹¶æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œåœ¨DOMå˜åŒ–çš„æ—¶å€™åˆ™ä¼šè§¦å‘å›è°ƒ,è¯¥å›è°ƒä¼šè¿›å…¥microtaskï¼Œå³textNode.data = String(counter)æ—¶ä¾¿ä¼šåŠ å…¥è¯¥å›è°ƒã€‚</p>
<p>setTimeoutæ˜¯æœ€åçš„ä¸€ç§å¤‡é€‰æ–¹æ¡ˆï¼Œå¹¶ä¸”é»˜è®¤æœ‰4mså»¶æ—¶ï¼ŒsetTimeoutå»¶æ—¶0ä¸ä¼šè€è€å®å®ç«‹å³æ‰§è¡Œï¼š</p>
<pre><code>setTimeout(function(){
    console.log(&quot;æˆ‘ä¸æ˜¯ç«‹å³æ‰§è¡Œçš„,ä¸€èˆ¬æˆ‘ä¼šå»¶æ—¶4ms,å“ˆå“ˆ&quot;);
},0);
</code></pre><p>å®ƒä¼šå°†å›è°ƒå‡½æ•°åŠ å…¥taskä¸­ï¼Œç­‰åˆ°æ‰§è¡Œã€‚<br><img src="https://pic2.zhimg.com/v2-59cf9f88d7daac690d39edfb9fffc8b8_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-59cf9f88d7daac690d39edfb9fffc8b8_hd.jpg" alt=""></p>
<pre><code>setTimeout(function(){console.log(4)},0);
new Promise(function(resolve){
    console.log(1)
    for( var i=0 ; i&lt;10000 ; i++ ){
        i==9999 &amp;&amp; resolve()
    }
    console.log(2)
}).then(function(){
    console.log(5)
});
console.log(3);
ç»“æœæ˜¯ï¼š
1,2,3,5,4
</code></pre><p>å†çœ‹è¿™ä¸ªï¼Œä¸¤ä¸ªè‡ªæ‰§è¡ŒåŒæ—¶æ‰§è¡Œï¼š</p>
<pre><code>&lt;script&gt;
(function test() {
  setTimeout(function () {
    console.log(4)
  }, 0);
  new Promise(function executor (resolve) {
    console.log(1);
    for(var i = 0; i &lt; 10000; i++) {
      i == 9999 &amp;&amp; resolve();
    }
    console.log(2);
  }).then(function() {
    console.log(5);
  });
  console.log(3);
})()

(function test2() {
  setTimeout(function () {
    console.log(42)
  }, 0);
  new Promise(function executor (resolve) {
    console.log(12);
    for(var i = 0; i &lt; 10000; i++) {
      i == 9999 &amp;&amp; resolve();
    }
    console.log(22);
  }).then(function() {
    console.log(52);
  });
  console.log(32);
})()
&lt;/script&gt;
</code></pre><p><img src="https://pic2.zhimg.com/v2-cd18c572eb05069895ede7e34388bb8d_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-cd18c572eb05069895ede7e34388bb8d_hd.jpg" alt=""><img src="https://pic3.zhimg.com/v2-afcb6fa6fb862818359f757107b769ab_b.jpg" alt=""><br>æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸€ä¸ª main thread ã€<a href="https://link.zhihu.com/?target=http%3A//www.baidu.com/link%3Furl%3DCV-egCVH8yK1w-ilUqGsztryG8s2mbuhAliIC_L1n_-BSZ_KJ16tAfaNkmbcRtU8" target="_blank" rel="noopener">ä¸»çº¿ç¨‹</a>ã€‘ ï¼Œä½†å¹¶ä¸æ„å‘³ç€å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªè‡ªæ‰§è¡Œåå†æ‰§è¡Œç¬¬äºŒä¸ªï¼Œå› ä¸ºä¸¤ä¸ªè‡ªæ‰§è¡Œä¸­çš„<code>setTimeout</code>è¿›å…¥çš„æ˜¯åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ç­‰å¾…ï¼Œå› æ­¤ä»–ä¿©åœ¨æœ€ååˆ†åˆ«è¾“å‡ºäº†äº† 4 å’Œ 42ã€‚</p>
<p>å½“ä¸€ä¸ªç¨‹åºæœ‰ï¼šsetTimeoutï¼Œ setInterval ï¼ŒsetImmediateï¼Œ I/Oï¼Œ UIæ¸²æŸ“ï¼ŒPromise ï¼Œprocess.nextTickï¼Œ Object.observeï¼Œ MutationObserverçš„æ—¶å€™ï¼š</p>
<p>1.å…ˆæ‰§è¡Œ macrotasksï¼šI/O -ã€‹ UIæ¸²æŸ“</p>
<p>2.å†æ‰§è¡Œ microtasks ï¼šprocess.nextTick -ã€‹ Promise -ã€‹MutationObserver -&gt;Object.observe</p>
<p>3.å†æŠŠsetTimeout setInterval setImmediate å¡å…¥ä¸€ä¸ªæ–°çš„macrotasksï¼Œä¾æ¬¡ï¼š</p>
<p>setTimeout ï¼ŒsetInterval â€“ã€‹setImmediate</p>
<p>ç»¼ä¸Šï¼ŒnextTickçš„ç›®çš„å°±æ˜¯äº§ç”Ÿä¸€ä¸ªå›è°ƒå‡½æ•°åŠ å…¥taskæˆ–è€…microtaskä¸­ï¼Œå½“å‰æ ˆæ‰§è¡Œå®Œä»¥åï¼ˆå¯èƒ½ä¸­é—´è¿˜æœ‰åˆ«çš„æ’åœ¨å‰é¢çš„å‡½æ•°ï¼‰è°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼Œèµ·åˆ°äº†å¼‚æ­¥è§¦å‘ï¼ˆå³ä¸‹ä¸€ä¸ªtickæ—¶è§¦å‘ï¼‰çš„ç›®çš„ã€‚</p>
<pre><code>setImmediate(function(){
    console.log(1);
},0);
setTimeout(function(){
    console.log(2);
},0);
new Promise(function(resolve){
    console.log(3);
    resolve();
    console.log(4);
}).then(function(){
    console.log(5);
});
console.log(6);
process.nextTick(function(){
    console.log(7);
});
console.log(8);
ç»“æœæ˜¯ï¼š3 4 6 8 7 5 2 1 
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/01/ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€.../">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/01/ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€.../" itemprop="url">ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€....</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-06-01T18:35:10+08:00">
                2018-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€â€¦"><a href="#ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€â€¦" class="headerlink" title="ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€â€¦"></a><a href="https://zhuanlan.zhihu.com/p/30621272" target="_blank" rel="noopener">ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€â€¦</a></h2><p>æˆ‘ä»¬åœ¨é¢è¯•çš„æ—¶å€™æˆ–è®¸ç»å¸¸ä¼šè¢«é—®åˆ°ï¼š</p>
<blockquote>
<p>ä»ä½ åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€åˆ°ç½‘é¡µå†…å®¹å®Œå…¨è¢«å±•ç¤ºçš„è¿™æ®µæ—¶é—´å†…ï¼Œéƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p>
</blockquote>
<p>ç¡®å®æ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œä½†é—®é¢˜çš„ç­”æ¡ˆå¹¶ä¸æ˜¯å”¯ä¸€çš„ï¼Œæˆ–è®¸åœ¨ä¸‰äº”å¹´å‰ï¼Œè¿™ä¸ªé—®é¢˜è¿˜ä¼šæœ‰ä¸€ä¸ªã€Œç›¸å¯¹ã€æ ‡å‡†çš„ç­”æ¡ˆã€‚</p>
<ol>
<li>æµè§ˆå™¨åœ¨æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚æ—¶ï¼Œä¼šå¼€å¯ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œé¦–å…ˆè¦åˆ¤æ–­ç”¨æˆ·è¾“å…¥æ˜¯å¦ä¸ºåˆæ³•æˆ–åˆç†çš„ URL åœ°å€ï¼Œæ˜¯å¦ä¸º HTTP åè®®è¯·æ±‚ï¼Œå¦‚æœæ˜¯é‚£å°±è¿›å…¥ä¸‹ä¸€æ­¥</li>
<li>æµè§ˆå™¨çš„æµè§ˆå™¨å¼•æ“å°†å¯¹æ­¤ URL è¿›è¡Œåˆ†æåŠ è½½</li>
<li>é€šè¿‡ DNS è§£æåŸŸåè·å–è¯¥ç½‘ç«™åœ°å€å¯¹åº”çš„ IP åœ°å€ï¼ŒæŸ¥è¯¢å®Œæˆåè¿åŒæµè§ˆå™¨çš„ Cookieã€ userAgent ç­‰ä¿¡æ¯å‘ç½‘ç«™ç›®çš„ IP å‘å‡º GET è¯·æ±‚ã€‚</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯ç»å…¸çš„ã€Œä¸‰æ¬¡æ¡æ‰‹ã€ï¼ŒHTTP åè®®ä¼šè¯ï¼Œæµè§ˆå™¨å®¢æˆ·ç«¯å‘ Web æœåŠ¡å™¨å‘é€æŠ¥æ–‡ï¼Œè¿›è¡Œé€šè®¯å’Œæ•°æ®ä¼ è¾“ã€‚</li>
<li>è¿›å…¥ç½‘ç«™çš„åç«¯æœåŠ¡ï¼Œå¦‚ Tomcatã€Apache ç­‰ï¼Œè¿˜æœ‰è¿‘å‡ å¹´æµè¡Œçš„ Node.js æœåŠ¡å™¨ï¼Œè¿™äº›æœåŠ¡å™¨ä¸Šéƒ¨ç½²ç€åº”ç”¨ä»£ç ï¼Œè¯­è¨€æœ‰å¾ˆå¤šï¼Œå¦‚ Javaã€ PHPã€ C++ã€ C# å’Œ Javascript ç­‰ã€‚</li>
<li>æœåŠ¡å™¨æ ¹æ® URL æ‰§è¡Œç›¸åº”çš„åç«¯åº”ç”¨é€»è¾‘ï¼Œæ•´ç†æ•°æ®ç»„è£…æˆä¸€ä¸ªå®Œæ•´çš„ HTML æ•°æ®è¿”å›ç»™æµè§ˆå™¨ï¼ŒæœŸé—´ä¼šä½¿ç”¨åˆ°ã€ŒæœåŠ¡å™¨ç¼“å­˜ã€æˆ–ã€Œæ•°æ®åº“ã€å†…çš„å†…å®¹ã€‚</li>
<li>æµè§ˆå™¨æ¥æ”¶åˆ°è¿”å›ä¿¡æ¯åå…ˆåˆ¤è¯»æ­¤ HTML æ–‡ä»¶æ˜¯å¦å­˜åœ¨æœ¬åœ°ç¼“å­˜ï¼Œå¦‚æœä¸å­˜åœ¨æˆ–ä¸å¯ç”¨ï¼Œåˆ™ä¸‹è½½æ­¤ HTML æ–‡ä»¶ï¼ˆ200çŠ¶æ€ç ï¼‰ï¼Œå¦‚æœå¯ç”¨ï¼ˆæœªè¿‡æœŸï¼‰ï¼Œåˆ™èµ°æµè§ˆå™¨ç¼“å­˜ï¼ˆ304è¿”å›ç ï¼‰ã€‚ã€Œå¼ºç¼“å­˜ï¼ˆ200è¿”å›ç ï¼‰ä¸åœ¨è€ƒè™‘èŒƒå›´ã€</li>
<li>æµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“åœ¨æ‹¿åˆ° HTML æ–‡ä»¶åï¼Œä¾¿å¼€å§‹è§£ææ„å»º DOM æ•°ï¼Œå¹¶æ ¹æ® HTML ä¸­çš„æ ‡è®°è¯·æ±‚ä¸‹è½½æŒ‡å®šçš„ MIME ç±»å‹æ–‡ä»¶ï¼ˆå¦‚ CSSã€ JavaScript è„šæœ¬ç­‰ï¼‰ï¼ŒåŒæ—¶ä½¿ç”¨&amp;è®¾ç½®ç¼“å­˜ç­‰å†…å®¹ã€‚</li>
<li>æ¸²æŸ“å¼•æ“æ ¹æ® CSS æ ·å¼è§„åˆ™å°† DOM æ ‘æ‰©å……ä¸ºæ¸²æŸ“æ ‘ï¼Œç„¶åè¿›è¡Œé‡æ’ã€é‡ç»˜ã€‚</li>
<li>å¦‚æœå«æœ‰ JS æ–‡ä»¶å°†ä¼šæ‰§è¡Œï¼Œè¿›è¡Œ Dom æ“ä½œã€ç¼“å­˜è¯»å­˜ã€æ—¶é—´ç»‘å®šç­‰æ“ä½œã€‚æœ€ç»ˆé¡µé¢å°†è¢«å±•ç¤ºåœ¨æµè§ˆå™¨ä¸Šã€‚</li>
</ol>
<p>æ­¤ç­”æ¡ˆç²¾ç®€çš„æ¦‚æ‹¬äº†ã€Œåç«¯ä¸ºä¸»çš„ MVC æ¨¡å¼ã€åŠæ—©æœŸ Web åº”ç”¨çš„æµè§ˆå™¨ç›¸åº”çš„å…¨è¿‡ç¨‹ã€‚é‚£ï¼Œå‰ç«¯æŠ€æœ¯å‘å±•åˆ°ç°åœ¨ï¼Œã€Œå‰åç«¯åˆ†ç¦»ã€ã€Œä¸­é—´ä»¶ç›´å‡ºã€å’Œã€ŒMNV*æ¨¡å¼ã€ä¹Ÿå·²é—®ä¸–ï¼Œå†è°ˆåŠæ­¤é—®é¢˜ï¼Œç­”æ¡ˆä¼šæœ‰ä¸åŒã€‚</p>
<p>å°±ä»¥ã€Œå‰åç«¯åˆ†ç¦»ã€ä¸ºä¾‹ï¼Œåœ¨ä¸Šæ–¹ç­”æ¡ˆçš„ç¬¬4æ­¥åï¼Œç´§æ¥ç€å°±ä¸ä¼šç›´æ¥è¿›å…¥åç«¯æœåŠ¡å™¨äº†ã€‚è€Œä¼šè¢« HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¦‚ Ngnixï¼Œä»£æ›¿ã€‚</p>
<ul>
<li>å‰ç½®æ­¥éª¤1ã€2ã€3ã€4</li>
<li>Ngnix åœ¨æ¥æ”¶åˆ° HTTPï¼ˆ80ç«¯å£ï¼‰æˆ– HTTPSï¼ˆ443ç«¯å£ï¼‰åï¼Œæ ¹æ® URL åšæœåŠ¡å™¨åˆ†å‘ï¼Œåˆ†å‘ï¼ˆrewriteï¼‰åˆ°åç«¯æœåŠ¡å™¨æˆ–é™æ€èµ„æºæœåŠ¡å™¨ï¼Œé¦–é¡µè¯·æ±‚åŸºæœ¬æ˜¯é™æ€æœåŠ¡å™¨ï¼Œè¿”å›ä¸€ä¸ªé™æ€çš„ HTML æ–‡ä»¶</li>
<li>æ­¥éª¤7ã€8ã€9</li>
<li>æ‰§è¡Œ JS è„šæœ¬ï¼Œå¼‚æ­¥ ajaxã€ fetch å‘èµ· POSTã€ GET è¯·æ±‚ï¼Œé‡æ–°è¿›å…¥ Ngnix åˆ†å‘ï¼Œæ­¤æ¬¡åˆ†å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œæ­¥éª¤5ã€6ï¼Œç„¶åè¿”å›ä¸€ä¸ª xml æˆ– json æ ¼å¼çš„ä¿¡æ¯ï¼Œä¸€èˆ¬å«æœ‰ codeï¼ˆè¿”å›ç ï¼‰ã€resultï¼ˆä¾èµ–ä¿¡æ¯ï¼‰</li>
<li>æœ€åæ ¹æ®è¿”å›ç æ‰§è¡Œä¸åŒçš„ js é€»è¾‘ï¼Œå¢åˆ æ”¹é¡µé¢å…ƒç´ ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå‘ç”Ÿé‡æ’æˆ–é‡æ±‡ã€‚é¦–é¡µåŠ è½½ç»“æŸã€‚</li>
</ul>
<p>ä»¥ä¸Šæ­¥éª¤å¯ä»¥å‘ç°ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šè§¦å‘é‡ç»˜ä¸¤æ¬¡ï¼Œææ˜“å‘ç”Ÿã€Œç™½å±ã€æˆ–ã€Œé¡µé¢æŠ–åŠ¨ã€ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€Œä¸­é—´ä»¶ç›´å‡ºã€çš„æ¨¡å¼åº”è¿è€Œç”Ÿã€‚å¦å¤–ä¸ºäº†æ‰©å……å¤§å‰ç«¯çš„é˜µè¥ï¼Œå¸çº³ IOS å’Œ Androidï¼ŒGoogleåˆè®¾è®¡äº†ã€ŒMNV*æ¨¡å¼ã€ï¼Œå…¸å‹ä»£è¡¨å°±æ˜¯ ReactNativeï¼Œä½†æ­¤æ¨¡å¼å·²ç»è„±ç¦»äº†æµè§ˆå™¨çš„èŒƒç•´ï¼Œæ­¤å¤„å°±ä¸å†åšæ‰©å±•ã€‚</p>
<p>ä»¥ä¸Šè®¨è®ºçš„æ¸²æŸ“è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°äº†è¾ƒå¤šçš„æµè§ˆå™¨åŠŸèƒ½ï¼Œå¦‚ç”¨æˆ·åœ°å€æ è¾“å…¥æ¡†ã€ç½‘ç»œè¯·æ±‚ã€æµè§ˆå™¨æ–‡æ¡£è§£æã€æ¸²æŸ“å¼•æ“æ¸²æŸ“ç½‘é¡µã€ JavaScript å¼•æ“æ‰§è¡Œjsè„šæœ¬ã€å®¢æˆ·ç«¯å­˜å‚¨ç­‰ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸‹æµè§ˆå™¨çš„åŸºæœ¬ç»“æ„ç»„æˆã€‚</p>
<h2 id="æµè§ˆå™¨çš„ç»“æ„ç»„æˆ"><a href="#æµè§ˆå™¨çš„ç»“æ„ç»„æˆ" class="headerlink" title="æµè§ˆå™¨çš„ç»“æ„ç»„æˆ"></a>æµè§ˆå™¨çš„ç»“æ„ç»„æˆ</h2><p>æµè§ˆå™¨ä¸€èˆ¬ç”±ä¸ƒä¸ªæ¨¡å—ç»„æˆï¼ŒUser Interfaceï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ã€Browser engineï¼ˆæµè§ˆå™¨å¼•æ“ï¼‰ã€Rendering engineï¼ˆæ¸²æŸ“å¼•æ“ï¼‰ã€Networkingï¼ˆç½‘ç»œï¼‰ã€JavaScript Interpreterï¼ˆjsè§£é‡Šå™¨ï¼‰ã€UI Backendï¼ˆUI åç«¯ï¼‰ã€Date Persistenceï¼ˆæ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼‰ å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://pic1.zhimg.com/v2-47101c25a44a21a25f3123a88c623b15_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-47101c25a44a21a25f3123a88c623b15_hd.jpg" alt=""></p>
<ul>
<li>ç”¨æˆ·ç•Œé¢ï¼åŒ…æ‹¬åœ°å€æ ã€åé€€/å‰è¿›æŒ‰é’®ã€ä¹¦ç­¾ç›®å½•ç­‰ï¼Œä¹Ÿå°±æ˜¯ä½ æ‰€çœ‹åˆ°çš„é™¤äº†é¡µé¢æ˜¾ç¤ºçª—å£ä¹‹å¤–çš„å…¶ä»–éƒ¨åˆ†</li>
<li>æµè§ˆå™¨å¼•æ“ï¼å¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢å’Œæ¸²æŸ“å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤æˆ–åœ¨å®¢æˆ·ç«¯æœ¬åœ°ç¼“å­˜ä¸­è¯»å†™æ•°æ®ç­‰ï¼Œæ˜¯æµè§ˆå™¨ä¸­å„ä¸ªéƒ¨åˆ†ä¹‹é—´ç›¸äº’é€šä¿¡çš„æ ¸å¿ƒ</li>
<li>æ¸²æŸ“å¼•æ“ï¼è§£æDOMæ–‡æ¡£å’ŒCSSè§„åˆ™å¹¶å°†å†…å®¹æ’ç‰ˆåˆ°æµè§ˆå™¨ä¸­æ˜¾ç¤ºæœ‰æ ·å¼çš„ç•Œé¢ï¼Œä¹Ÿæœ‰äººç§°ä¹‹ä¸ºæ’ç‰ˆå¼•æ“ï¼Œæˆ‘ä»¬å¸¸è¯´çš„æµè§ˆå™¨å†…æ ¸ä¸»è¦æŒ‡çš„å°±æ˜¯æ¸²æŸ“å¼•æ“</li>
<li>ç½‘ç»œï¼ç”¨æ¥å®Œæˆç½‘ç»œè°ƒç”¨æˆ–èµ„æºä¸‹è½½çš„æ¨¡å—</li>
<li>UI åç«¯ï¼ç”¨æ¥ç»˜åˆ¶åŸºæœ¬çš„æµè§ˆå™¨çª—å£å†…æ§ä»¶ï¼Œå¦‚è¾“å…¥æ¡†ã€æŒ‰é’®ã€å•é€‰æŒ‰é’®ç­‰ï¼Œæ ¹æ®æµè§ˆå™¨ä¸åŒç»˜åˆ¶çš„æ•ˆæœä¹Ÿä¸åŒ</li>
<li>JSè§£é‡Šå™¨ï¼ç”¨æ¥è§£é‡Šæ‰§è¡ŒJSè„šæœ¬çš„æ¨¡å—ï¼Œå¦‚ V8 å¼•æ“</li>
<li>æ•°æ®å­˜å‚¨ï¼æµè§ˆå™¨åœ¨ç¡¬ç›˜ä¸­ä¿å­˜ cookieã€localStorageç­‰å„ç§æ•°æ®ï¼Œå¯é€šè¿‡æµè§ˆå™¨å¼•æ“æä¾›çš„APIè¿›è¡Œè°ƒç”¨</li>
</ul>
<p>ä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹ç†è§£æ¸²æŸ“å¼•æ“çš„å·¥ä½œåŸç†ï¼Œçµæ´»åº”ç”¨æ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œåœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ä¼šç»å¸¸æ¶‰åŠåˆ°è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå°¤å…¶æ˜¯åœ¨åšé¡¹ç›®æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œç†è§£æµè§ˆå™¨æ¸²æŸ“å¼•æ“å°¤ä¸ºé‡è¦ã€‚è€Œå…¶ä»–éƒ¨åˆ†åˆ™æ˜¯ç”±å„ç§æµè§ˆå™¨è‡ªè¡Œç®¡ç†çš„ï¼Œå¼€å‘è€…èƒ½æ§åˆ¶çš„åœ°æ–¹è¾ƒå°‘ã€‚ä»Šå¤©æˆ‘ä»¬å°±å›´ç»•è¿™ä¸¤ä¸ªé‡ç‚¹å…¶ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€Œæµè§ˆå™¨æ¸²æŸ“å¼•æ“ã€è¿›è¡Œå±•å¼€</p>
<h2 id="æµè§ˆå™¨æ¸²æŸ“å¼•æ“"><a href="#æµè§ˆå™¨æ¸²æŸ“å¼•æ“" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“å¼•æ“"></a>æµè§ˆå™¨æ¸²æŸ“å¼•æ“</h2><p>æµè§ˆå™¨æ¸²æŸ“å¼•æ“æ˜¯ç”±å„å¤§æµè§ˆå™¨å‚å•†ä¾ç…§ W3C æ ‡å‡†è‡ªè¡Œå®ç°çš„ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºã€Œæµè§ˆå™¨å†…æ ¸ã€ã€‚</p>
<p>ç›®å‰ï¼Œå¸‚é¢ä¸Šä½¿ç”¨çš„ä¸»æµæµè§ˆå™¨å†…æ ¸æœ‰5ç±»ï¼šTridentã€Geckoã€Prestoã€Webkitã€Blinkã€‚</p>
<p>Tridentï¼šä¿—ç§° IE å†…æ ¸ï¼Œä¹Ÿè¢«å«åš MSHTML å¼•æ“ï¼Œç›®å‰åœ¨ä½¿ç”¨çš„æµè§ˆå™¨ä¸º IE11-ï¼Œä»¥åŠå„ç§å›½äº§å¤šæ ¸æµè§ˆå™¨ä¸­çš„IEå…¼å®¹æ¨¡å¼ã€‚å¦å¤–Edge æµè§ˆå™¨ä¸å†ä½¿ç”¨ MSHTML å¼•æ“ï¼Œè€Œæ˜¯ä½¿ç”¨ç±»å…¨æ–°çš„å¼•æ“ EdgeHTMLã€‚</p>
<p>Geckoï¼šä¿—ç§° Firefox å†…æ ¸ï¼ŒNetscape6å¼€å§‹é‡‡ç”¨çš„å†…æ ¸ï¼Œåæ¥çš„Mozilla FireFox(ç«ç‹æµè§ˆå™¨) ä¹Ÿé‡‡ç”¨äº†è¯¥å†…æ ¸ï¼ŒGeckoçš„ç‰¹ç‚¹æ˜¯ä»£ç å®Œå…¨å…¬å¼€ï¼Œå› æ­¤ï¼Œå…¶å¯å¼€å‘ç¨‹åº¦å¾ˆé«˜ï¼Œå…¨ä¸–ç•Œçš„ç¨‹åºå‘˜éƒ½å¯ä»¥ä¸ºå…¶ç¼–å†™ä»£ç ï¼Œå¢åŠ åŠŸèƒ½ã€‚å› ä¸ºè¿™æ˜¯ä¸ªå¼€æºå†…æ ¸ï¼Œå› æ­¤å—åˆ°è®¸å¤šäººçš„é’çï¼ŒGeckoå†…æ ¸çš„æµè§ˆå™¨ä¹Ÿå¾ˆå¤šï¼Œè¿™ä¹Ÿæ˜¯Geckoå†…æ ¸è™½ç„¶å¹´è½»ä½†å¸‚åœºå æœ‰ç‡èƒ½å¤Ÿè¿…é€Ÿæé«˜çš„é‡è¦åŸå› ã€‚</p>
<p>Prestoï¼šOpera å‰å†…æ ¸ï¼Œä¸ºå•¥è¯´æ˜¯å‰å†…æ ¸å‘¢ï¼Ÿå› ä¸º Opera12.17 ä»¥åä¾¿æ‹¥æŠ±äº† Google Chrome çš„ Blink å†…æ ¸ï¼Œæ­¤å†…æ ¸å°±æ²¡äº†å¯„æ‰˜</p>
<p>Webkitï¼šSafari å†…æ ¸ä¹Ÿæ˜¯ Chrome å†…æ ¸åŸå‹ï¼Œä¸»è¦æ˜¯ Safari æµè§ˆå™¨åœ¨ä½¿ç”¨çš„å†…æ ¸ï¼Œä¹Ÿæ˜¯ç‰¹æ€§ä¸Šè¡¨ç°è¾ƒå¥½çš„æµè§ˆå™¨å†…æ ¸ã€‚ä¹Ÿè¢«å¤§é‡ä½¿ç”¨åœ¨ç§»åŠ¨ç«¯æµè§ˆå™¨ä¸Šã€‚</p>
<p>Blinkï¼š ç”±Googleå’ŒOpera Softwareå¼€å‘çš„æµè§ˆå™¨æ’ç‰ˆå¼•æ“ï¼Œåœ¨Chromeï¼ˆ28åŠå¾€åç‰ˆæœ¬ï¼‰ã€Operaï¼ˆ15åŠå¾€åç‰ˆæœ¬ï¼‰å’ŒYandexæµè§ˆå™¨ ä¸­ä½¿ç”¨ã€‚Blink å…¶å®æ˜¯ WebKit çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæ·»åŠ äº†ä¸€äº›ä¼˜åŒ–çš„æ–°ç‰¹æ€§ï¼Œä¾‹å¦‚è·¨è¿›ç¨‹çš„ iframeï¼Œå°† DOM ç§»å…¥ JavaScript ä¸­æ¥æé«˜ JavaScript å¯¹ DOM çš„è®¿é—®é€Ÿåº¦ç­‰ï¼Œç›®å‰è¾ƒå¤šçš„ç§»åŠ¨ç«¯åº”ç”¨å†…åµŒçš„æµè§ˆå™¨å†…æ ¸ä¹Ÿæ¸æ¸å¼€å§‹é‡‡ç”¨ Blinkã€‚</p>
<h2 id="æ¸²æŸ“å¼•æ“çš„å·¥ä½œæµç¨‹"><a href="#æ¸²æŸ“å¼•æ“çš„å·¥ä½œæµç¨‹" class="headerlink" title="æ¸²æŸ“å¼•æ“çš„å·¥ä½œæµç¨‹"></a>æ¸²æŸ“å¼•æ“çš„å·¥ä½œæµç¨‹</h2><p>æµè§ˆå™¨æ¸²æŸ“å¼•æ“é‡è¦çš„å·¥ä½œå°±æ˜¯å°† HTML å’Œ CSS æ–‡æ¡£è§£æç»„åˆæœ€ç»ˆæ¸²æŸ“åˆ°æµè§ˆå™¨çª—å£ä¸Šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¸²æŸ“å¼•æ“åœ¨æ¥å—åˆ° HTML æ–‡ä»¶åä¸»è¦è¿›è¡Œäº†ä»¥ä¸‹æ“ä½œï¼šè§£æ HTML æ„å»º DOM æ ‘ -&gt; æ„å»ºæ¸²æŸ“æ ‘ -&gt; æ¸²æŸ“æ ‘å¸ƒå±€ -&gt; æ¸²æŸ“æ ‘ç»˜åˆ¶ã€‚</p>
<p><img src="https://pic2.zhimg.com/v2-898d192f36fcc9c8843ec9d89f112bde_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-898d192f36fcc9c8843ec9d89f112bde_hd.jpg" alt=""></p>
<p>è§£æ HTML æ„å»º DOM æ ‘æ—¶æ¸²æŸ“å¼•æ“ä¼šå°† HTML æ–‡ä»¶çš„ä¾¿ç­¾å…ƒç´ è§£ææˆå¤šä¸ª DOM å…ƒç´ å¯¹è±¡èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†è¿™äº›å¯¹è±¡æ ¹æ®çˆ¶å­å…³ç³»ç»„æˆä¸€ä¸ªæ ‘ç»“æ„ã€‚åŒæ—¶ CSS æ–‡ä»¶è¢«è§£ææˆ CSSè§„åˆ™è¡¨ï¼Œç„¶åå°†æ¯æ¡ CSS è§„åˆ™æŒ‰ç…§ã€Œä»å³å‘å·¦ã€çš„æ–¹å¼åœ¨ DOM æ ‘ä¸Šè¿›è¡Œé€†å‘åŒ¹é…ï¼Œç”Ÿæˆä¸€ä¸ªå…·æœ‰æ ·å¼è§„åˆ™æè¿°çš„ DOM æ¸²æŸ“æ ‘ã€‚æ¥ä¸‹æ¥å°±æ˜¯å°†æ¸²æŸ“æ ‘è¿›è¡Œå¸ƒå±€ã€ç»˜åˆ¶çš„è¿‡ç¨‹ã€‚é¦–å…ˆæ ¹æ® DOM æ¸²æŸ“æ ‘ä¸Šçš„æ ·å¼è§„åˆ™ï¼Œå¯¹ DOM å…ƒç´ è¿›è¡Œå¤§å°å’Œä½ç½®çš„å®šä½ï¼Œå…³é”®å±æ€§å¦‚<code>position;width;margin;padding;top;border;...</code>ï¼Œæ¥ä¸‹æ¥åœ¨æ ¹æ®å…ƒç´ æ ·å¼è§„åˆ™ä¸­çš„<code>color;background;shadow;...</code>è§„åˆ™è¿›è¡Œ DOM çš„ç»˜åˆ¶ã€‚</p>
<p>å¦å¤–ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é€æ­¥å®Œæˆçš„ï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæ¸²æŸ“å¼•æ“å°†ä¼šå°½å¯èƒ½æ—©çš„å°†å†…å®¹å‘ˆç°åˆ°å±å¹•ä¸Šï¼Œå¹¶ä¸ä¼šç­‰åˆ°æ‰€æœ‰çš„htmléƒ½è§£æå®Œæˆä¹‹åå†å»æ„å»ºå’Œå¸ƒå±€renderæ ‘ã€‚å®ƒæ˜¯è§£æå®Œä¸€éƒ¨åˆ†å†…å®¹å°±æ˜¾ç¤ºä¸€éƒ¨åˆ†å†…å®¹ï¼ŒåŒæ—¶ï¼Œå¯èƒ½è¿˜åœ¨é€šè¿‡ç½‘ç»œä¸‹è½½å…¶ä½™å†…å®¹ã€‚</p>
<p>å†è€…ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æµè§ˆå™¨æ¸²æŸ“å®Œé¦–å±é¡µé¢åï¼Œå¦‚æœå¯¹ DOM è¿›è¡Œæ“ä½œä¼šå¼•èµ·æµè§ˆå™¨å¼•æ“å¯¹ DOM æ¸²æŸ“æ ‘çš„é‡æ–°å¸ƒå±€å’Œé‡æ–°ç»˜åˆ¶ï¼Œæˆ‘ä»¬å«åšã€Œé‡æ’ã€å’Œã€Œé‡ç»˜ã€ï¼Œç”±äºé‡æ’å’Œé‡ç»˜æ˜¯å‰åä¾èµ–çš„å…³ç³»ï¼Œæ‰€ä»¥é‡ç»˜å‘ç”Ÿæ—¶æœªå¿…ä¼šè§¦å‘æ¸²æŸ“å¼•æ“çš„é‡æ’ï¼Œä½†æ˜¯å¦‚æœå‘ç”Ÿäº†é‡æ’å°±å¿…ç„¶ä¼šè§¦å‘é‡ç»˜æ“ä½œï¼Œè¿™æ ·å¸¦æ¥çš„æ€§èƒ½æŸå®³å°±æ˜¯å·¨å¤§çš„ã€‚å› æ­¤æˆ‘ä»¬åœ¨åšæ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™åº”è¯¥éµå¾ªã€Œé¿å…é‡æ’ï¼›å‡å°‘é‡ç»˜ã€çš„åŸåˆ™ã€‚</p>
<h2 id="ä¸åŒæµè§ˆå™¨å†…æ ¸é—´çš„å·®å¼‚"><a href="#ä¸åŒæµè§ˆå™¨å†…æ ¸é—´çš„å·®å¼‚" class="headerlink" title="ä¸åŒæµè§ˆå™¨å†…æ ¸é—´çš„å·®å¼‚"></a>ä¸åŒæµè§ˆå™¨å†…æ ¸é—´çš„å·®å¼‚</h2><p>åœ¨ä¸åŒçš„æµè§ˆå™¨å†…æ ¸ä¸‹ï¼Œ æµè§ˆå™¨é¡µé¢æ¸²æŸ“çš„æµç¨‹ç•¥æœ‰ä¸åŒ</p>
<p><img src="https://pic2.zhimg.com/v2-d29985fb1443ee3dc499a2b974f52c0e_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-d29985fb1443ee3dc499a2b974f52c0e_hd.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/v2-17090b8745e504fd6877dfa6f5950422_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-17090b8745e504fd6877dfa6f5950422_hd.jpg" alt=""></p>
<p>ä¸Šé¢ä¸¤å¹…å›¾åˆ†åˆ«æ˜¯ Webkit å’Œ Geoko å†…æ ¸æ¸²æŸ“ DOM çš„å·¥ä½œæµç¨‹ï¼Œå¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œä¸¤è€…æµç¨‹çš„åŒºåˆ«ä¸»è¦åœ¨äº CSS æ ·å¼è¡¨çš„è§£ææ—¶æœºï¼ŒWebkit å†…æ ¸ä¸‹ï¼ŒHTML å’Œ CSS æ–‡ä»¶çš„è§£ææ˜¯åŒæ­¥çš„ï¼Œè€Œ Geoko å†…æ ¸ä¸‹ï¼ŒCSS æ–‡ä»¶éœ€è¦ç­‰åˆ° HTML æ–‡ä»¶è§£ææˆå†…å®¹ Sink åæ‰è¿›è¡Œè§£æã€‚</p>
<p>å¦å¤–ä¸¤è€…çš„ä¸åŒè¿˜æœ‰æè¿°æœ¯è¯­ï¼Œé™¤æ­¤ä¹‹å¤–ä¸¤è€…çš„æµç¨‹å°±åŸºæœ¬ç›¸åŒäº†ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸‰ä¸ªéƒ¨åˆ†å°±æ˜¯ ã€ŒHTML çš„è§£æã€ã€ŒCSS çš„è§£æã€ã€Œæ¸²æŸ“æ ‘çš„ç”Ÿæˆã€ã€‚è¿™ä¸‰ä¸ªéƒ¨åˆ†çš„åŸç†å†…å®¹å°±æ¯”è¾ƒæ·±ï¼Œæ¶‰åŠåˆ°ã€Œè¯æ³•åˆ†æã€ã€Œè¯­æ³•åˆ†æã€ã€Œè½¬æ¢ã€ã€Œè§£é‡Šã€ç­‰æ•°æ®ç»“æ„çš„å†…å®¹ï¼Œæ¯”è¾ƒæ¯ç‡¥ï¼Œä¸€èˆ¬æˆ‘ä»¬äº†è§£åˆ°è¿™é‡Œå°±å¤Ÿäº†ï¼Œä¸è¿‡æƒ³æ·±å…¥äº†è§£çš„åŒå­¦å¯ä»¥é˜…è¯»æ­¤ç¯‡è¯‘æ–‡ï¼Œ<a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttp%253A%252F%252Fblog.csdn.net%252Fu010794365%252Farticle%252Fdetails%252F77982768" target="_blank" rel="noopener">æµè§ˆå™¨çš„å·¥ä½œåŸç†</a>ï¼Œé‡Œé¢è¯¦ç»†çš„è§£é‡Šäº†ä»¥ä¸Šä¸‰ä¸ªéƒ¨åˆ†çš„æµç¨‹å’Œå…³ç³»ã€‚æ­¤å¤„å°±ä¸å†å¤šåšèµ˜è¿°äº†ã€‚</p>
<h2 id="å…³äº-CSS-è§„åˆ™çš„åŒ¹é…"><a href="#å…³äº-CSS-è§„åˆ™çš„åŒ¹é…" class="headerlink" title="å…³äº CSS è§„åˆ™çš„åŒ¹é…"></a>å…³äº CSS è§„åˆ™çš„åŒ¹é…</h2><p>ä¸Šé¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œ CSS è§„åˆ™æ˜¯æŒ‰ç…§ã€Œä»å³å‘å·¦ã€çš„æ–¹å¼åœ¨ DOM æ ‘ä¸Šè¿›è¡Œé€†å‘åŒ¹é…çš„ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªå…·æœ‰æ ·å¼è§„åˆ™æè¿°çš„ DOM æ¸²æŸ“æ ‘ã€‚</p>
<p>ä½†æ˜¯ä½ çŸ¥é“ä¸ºä»€ä¹ˆè¦ã€Œä»å³å‘å·¦ã€åšé€†å‘åŒ¹é…ç ï¼Ÿ</p>
<p>æˆ‘ä»¬é‡æ–°å›åˆ°ã€webkit å†…æ ¸å·¥ä½œæµç¨‹ã€‘å›¾</p>
<p><img src="https://pic2.zhimg.com/v2-d29985fb1443ee3dc499a2b974f52c0e_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-d29985fb1443ee3dc499a2b974f52c0e_hd.jpg" alt=""></p>
<p>CSS è§„åˆ™åŒ¹é…æ˜¯å‘ç”Ÿåœ¨webkitå¼•æ“çš„ã€ŒAttachmentã€è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨è¦ä¸ºæ¯ä¸ª DOM Tree ä¸­çš„å…ƒç´ æ‰©å…… CSS æ ·å¼è§„åˆ™ï¼ˆåŒ¹é… Style Rulesï¼‰ã€‚å¯¹äºæ¯ä¸ª DOM å…ƒç´ ï¼Œå¿…é¡»åœ¨æ‰€æœ‰ Style Rules ä¸­æ‰¾åˆ°ç¬¦åˆçš„ selector å¹¶å°†å¯¹åº”çš„è§„åˆ™è¿›è¡Œåˆå¹¶ã€‚é€‰æ‹©å™¨çš„ã€Œè§£æã€å®é™…æ˜¯åœ¨è¿™é‡Œæ‰§è¡Œçš„ï¼Œåœ¨éå† DOM Tree æ—¶ï¼Œä» Style Rules ä¸­å»å¯»æ‰¾å¯¹åº”çš„ selectorã€‚</p>
<p>æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæœ€ç®€å•çš„æ —å­ï¼š</p>
<pre><code>&lt;template&gt;
&lt;div&gt;
  &lt;div class=&quot;t&quot;&gt;
    &lt;span&gt;test&lt;/span&gt;
    &lt;p&gt;test&lt;/p&gt;
  &lt;div&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;style&gt;
div{ color: #000; }
div .t span{ color: red; }
div .t p{color: blue; }
&lt;/style&gt;
</code></pre><p>æ­¤å¤„æˆ‘ä»¬æœ‰ä¸€ä¸ª html å…ƒç´  å’Œä¸€ä¸ª style å…ƒç´ ï¼Œä¸¤è€…éœ€è¦åšéå†åŒ¹é…</p>
<p><img src="https://pic1.zhimg.com/v2-727bdb01745d4f9692a5f7a8678e62e2_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-727bdb01745d4f9692a5f7a8678e62e2_hd.jpg" alt=""></p>
<p>æ­¤å¤„ä¼šæœ‰ 4*3 ä¸ªåŒ¹é…é¡¹ï¼Œå¦‚æœåšæ­£å‘åŒ¹é…ï¼Œåœ¨é‡åˆ° <code>&lt;span&gt;</code> æ ‡ç­¾åŒ¹é… <code>div .t p{ color: red; }</code>åˆ°åŒ¹é…é¡¹æ—¶ï¼Œæ˜¾ç„¶æ—¶ä¸é€šè¿‡åˆ°ï¼Œè®¡ç®—æœºé¦–å…ˆè¦æ‰¾åˆ°<code>&lt;span&gt;</code> æ ‡ç­¾åˆ°çˆ¶æ ‡ç­¾å’Œç¥–çˆ¶æ ‡ç­¾ï¼Œåˆ¤æ–­ä»–ä»¬æ˜¯å¦æ»¡è¶³<code>div .t</code>çš„è§„åˆ™ï¼Œç„¶ååœ¨åŒ¹é…<code>&lt;span&gt;</code>æ˜¯å¦ä¸º<code>p</code>æ ‡ç­¾ï¼Œæ­¤å¤„åŒ¹é…ä¸æˆåŠŸï¼Œæ­¤å¤„å°±äº§ç”Ÿäº†ä¸‰æ¬¡æµªè´¹ã€‚</p>
<p>å¦‚æœæ—¶é€†å‘åŒ¹é…ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡å¯¹æ¯”<code>&lt;span&gt;</code>æ˜¯å¦ä¸º<code>p</code>æ ‡ç­¾ä¾¿å¯æ’é™¤æ­¤è§„åˆ™ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<p>å¦‚æœå°† HTML ç»“æ„å˜å¤æ‚ï¼ŒCSS è§„åˆ™è¡¨å˜åºå¤§ï¼Œé‚£ä¹ˆï¼Œã€Œé€†å‘åŒ¹é…ã€çš„ä¼˜åŠ¿å°±è¿œå¤§äºã€Œæ­£å‘åŒ¹é…ã€äº†ï¼Œå› ä¸ºåŒ¹é…çš„æƒ…å†µè¿œè¿œä½äºä¸åŒ¹é…çš„æƒ…å†µã€‚åŒæ—¶å¦‚æœåœ¨é€‰æ‹©å™¨ç»“å°¾åŠ ä¸Šé€šé…ç¬¦ã€Œ*ã€ï¼Œé‚£ä¹ˆã€Œé€†å‘åŒ¹é…ã€çš„ä¼˜åŠ¿å°±å¤§æ‰“æŠ˜æ‰£ï¼Œè¿™ä¹Ÿå°±æ˜¯å¾ˆå¤šä¼˜åŒ–åŸåˆ™æåˆ°çš„å°½é‡é¿å…åœ¨é€‰æ‹©å™¨æœ«å°¾æ·»åŠ é€šé…ç¬¦çš„åŸå› ã€‚</p>
<p>æé™äº†æƒ³ï¼Œå¦‚æœæˆ‘ä»¬çš„æ ·å¼è¡¨ä¸å­˜åœ¨åµŒå¥—å…³ç³»ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>&lt;template&gt;
&lt;div&gt;
  &lt;div&gt;
    &lt;span class=&quot;div_t_span&quot;&gt;test&lt;/span&gt;
    &lt;p class=&quot;div_t_p&quot;&gt;test&lt;/p&gt;
  &lt;div&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;style&gt;
div{ color: #000; }
.div_t_span{ color: red; }
.div_t_p{color: blue; }
&lt;/style
</code></pre><p>é‚£ä¹ˆå¼•æ“çš„ã€ŒAttachmentã€è¿‡ç¨‹å°†å¾—åˆ°æå¤§çš„ç²¾ç®€ï¼Œæ•ˆç‡ä¹Ÿæ˜¯å¯æƒ³è€ŒçŸ¥çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆã€Œå¾®ä¿¡å°ç¨‹åºã€æ ·å¼è¡¨ä¸å»ºè®®ä½¿ç”¨å…³ç³»è¡Œå†™æ³•çš„åŸå› ã€‚</p>
<h2 id="ç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–"><a href="#ç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–"></a>ç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–</h2><p>ç”±ä»¥ä¸Šä»‹ç»ï¼Œæˆ‘ä»¬å¤§è‡´å¯ä»¥åœ¨æ¡ˆä¾‹ä¸­çœ‹åˆ°åŒæµè§ˆå™¨æ¸²æŸ“å¼•æ“ç›¸å…³çš„å¯è¡Œä¼˜åŒ–ç‚¹ã€‚</p>
<p>å¤§è‡´ä¸ºä»¥ä¸‹å‡ ç§</p>
<ol>
<li>å‡å°‘ JS åŠ è½½å¯¹ Dom æ¸²æŸ“çš„å½±å“ï¼šå°† JS æ–‡ä»¶æ”¾åœ¨ HTML æ–‡æ¡£ååŠ è½½ï¼Œæˆ–è€…ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼åŠ è½½ JS ä»£ç </li>
<li>é¿å…é‡æ’ï¼Œå‡å°‘é‡ç»˜ï¼šåœ¨åšcssåŠ¨ç”»çš„æ—¶å€™å‡å°‘ä½¿ç”¨ widthã€ marginã€ paddingç­‰å½±å“ CSS å¸ƒå±€å¯¹è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ CSS3 çš„ transform ä»£æ›¿</li>
<li>å‡å°‘ä½¿ç”¨å…³ç³»å‹æ ·å¼è¡¨çš„å†™æ³•ï¼šç›´æ¥ä½¿ç”¨å”¯ä¸€çš„ç±»åå³å¯æœ€å¤§é™åº¦çš„æå‡æ¸²æŸ“æ•ˆç‡</li>
<li>å‡å°‘ DOM çš„å±‚çº§ï¼šå‡å°‘æ— æ„ä¹‰çš„dom å±‚çº§å¯ä»¥å‡å°‘ æ¸²æŸ“å¼•æ“ Attachment è¿‡ç¨‹ä¸­çš„åŒ¹é…è®¡ç®—é‡</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/tx.jpg"
                alt="ææ–Œ" />
            
              <p class="site-author-name" itemprop="name">ææ–Œ</p>
              <p class="site-description motion-element" itemprop="description">æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">48</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="3120217729@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ–Œ</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
<script type="text/javascript" src="/js/src/clicklove.js"></script>

