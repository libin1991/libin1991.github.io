<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="LuckDay">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="LuckDay">
<meta property="og:description" content="Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LuckDay">
<meta name="twitter:description" content="Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/7/"/>





  <title>LuckDay - æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband">
    	<div class="eevee"><div class="body"><div class="head"><div class="ears"><div class="ear"><div class="lobe"></div></div><div class="ear"><div class="lobe"></div></div></div><div class="face"><div class="eyes"><div class="eye"><div class="eyelid"></div></div><div class="eye"><div class="eyelid"></div></div></div><div class="nose"></div><div class="mouth"></div></div></div><div class="chest"><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div><div class="fur"><div class="patch"></div></div></div><div class="legs"><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div><div class="leg"><div class="inner-leg"></div></div></div><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail"><div class="tail -end"></div></div></div></div></div></div></div></div>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    	<div class="sky">
	<div class="clouds_one"></div>
	<div class="clouds_two"></div>
	<div class="clouds_three"></div>
</div>
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LuckDay</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/02/vueæ–‡ä»¶çš„ä¸€ä¸ªå°ç»†èŠ‚/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/vueæ–‡ä»¶çš„ä¸€ä¸ªå°ç»†èŠ‚/" itemprop="url">.vueæ–‡ä»¶çš„ä¸€ä¸ªå°ç»†èŠ‚</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-02T23:06:11+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>top.vue</p>
<pre><code>&lt;template&gt;
    &lt;div class=&quot;ds&quot;&gt;
        &lt;div class=&quot;left&quot;&gt;
            &lt;p&gt;SX&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;right&quot;&gt;
            &lt;p&gt;SB&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    console.log(&quot;-------------------------&quot;);     //åªæ‰§è¡Œä¸€æ¬¡


    export default {
        props: [],
        data() {
            return {}
        },
        components: {

        },
        methods: {

        },
        created() {

        },
        mounted() {
            console.log(&quot;$$$$$$$$$$$$$$$$$$$$$$$&quot;)ï¼›  //æ‰§è¡Œå¤šæ¬¡
        }
    };
&lt;/script&gt;

&lt;style lang=&quot;scss&quot; scoped=&quot;scoped&quot;&gt;
    .guize {
        box-sizing: border-box;
        padding: 0 0.4rem;
        margin-top: -0.3rem;
        width: 100%;
        height: 1.2rem;
        font-size: 0.24rem;
        color: white;
        position: relative;
        .left {
            color: #abc4ed;
            float: left;
            transform:scale(0.85);
            transform-origin:0 0; 
            p {
                font-size: 0.24rem;
                line-height: 2;
            }
        }
        .right {
            float: left;
            width: 1.6rem;
            height: 0.44rem;
            line-height: 0.44rem;
            border: 1px solid white;
            color: white;
            border-radius: 0.24rem;
            text-align: center;
            position: absolute;
            right: 0.4rem;
            bottom: 0.04rem;
        }
    }
&lt;/style&gt;
</code></pre><p><img src="https://pic3.zhimg.com/v2-57add9333368254c8b108fdd00160585_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-57add9333368254c8b108fdd00160585_hd.jpg" alt=""><img src="https://pic4.zhimg.com/v2-2ac46bc7c3c82fdde73c1f53cf8e39d5_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-2ac46bc7c3c82fdde73c1f53cf8e39d5_hd.jpg" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/02/JS-ç»§æ‰¿/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/JS-ç»§æ‰¿/" itemprop="url">JS ç»§æ‰¿</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-02T22:49:01+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ ES 6 ä¹‹å‰æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæ‰€ä»¥ä¸èƒ½åƒ Java ä¸­ä¸€ä¸ª extends å…³é”®å­—å°±æå®šäº†ç»§æ‰¿å…³ç³»ï¼Œéœ€è¦ä¸€äº› tricks æ¥å®ç°ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
<h2 id="ä¸€-åŸå‹é“¾ç»§æ‰¿ï¼š"><a href="#ä¸€-åŸå‹é“¾ç»§æ‰¿ï¼š" class="headerlink" title="(ä¸€) åŸå‹é“¾ç»§æ‰¿ï¼š"></a>(ä¸€) åŸå‹é“¾ç»§æ‰¿ï¼š</h2><pre><code>function Parent(name) { 
    this.name = name;
}
Parent.prototype.sayName = function() {
    console.log(&apos;parent name:&apos;, this.name);
}
function Child(name) {
    this.name = name;
}

Child.prototype = new Parent(&apos;father&apos;);
Child.prototype.constructor = Child;

Child.prototype.sayName = function() {
    console.log(&apos;child name:&apos;, this.name);
}

var child = new Child(&apos;son&apos;);
child.sayName();    // child name: son
</code></pre><p>åªè¦æ˜¯åŸå‹é“¾ä¸­å‡ºç°è¿‡çš„åŸå‹ï¼Œéƒ½å¯ä»¥è¯´æ˜¯è¯¥åŸå‹é“¾æ´¾ç”Ÿçš„å®ä¾‹çš„åŸå‹ã€‚</p>
<p>è¿™ç§æ–¹æ³•å­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š</p>
<ol>
<li>å­ç±»å‹æ— æ³•ç»™è¶…ç±»å‹ä¼ é€’å‚æ•°ï¼Œåœ¨é¢å‘å¯¹è±¡çš„ç»§æ‰¿ä¸­ï¼Œæˆ‘ä»¬æ€»å¸Œæœ›é€šè¿‡ var child = new Child(â€˜sonâ€™, â€˜fatherâ€™); è®©å­ç±»å»è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨æ¥å®Œæˆç»§æ‰¿ã€‚è€Œä¸æ˜¯é€šè¿‡åƒè¿™æ · new Parent(â€˜fatherâ€™) å»è°ƒç”¨çˆ¶ç±»ã€‚</li>
<li>Child.prototype.sayName å¿…é¡»å†™åœ¨ Child.prototype = new Parent(â€˜fatherâ€™); ä¹‹åï¼Œä¸ç„¶å°±ä¼šè¢«è¦†ç›–æ‰ã€‚</li>
</ol>
<h2 id="äºŒ-ç±»å¼ç»§æ‰¿ï¼š"><a href="#äºŒ-ç±»å¼ç»§æ‰¿ï¼š" class="headerlink" title="(äºŒ) ç±»å¼ç»§æ‰¿ï¼š"></a>(äºŒ) ç±»å¼ç»§æ‰¿ï¼š</h2><pre><code>function Parent(name) { 
    this.name = name;
}
Parent.prototype.sayName = function() {
    console.log(&apos;parent name:&apos;, this.name);
}
Parent.prototype.doSomthing = function() {
    console.log(&apos;parent do something!&apos;);
}
function Child(name, parentName) {
    Parent.call(this, parentName);
    this.name = name;
}

Child.prototype.sayName = function() {
    console.log(&apos;child name:&apos;, this.name);
}

var child = new Child(&apos;son&apos;);
child.sayName();      // child name: son
child.doSomthing();   // TypeError: child.doSomthing is not a function
</code></pre><p>ç›¸å½“äº Parent è¿™ä¸ªå‡½æ•°åœ¨ Child å‡½æ•°ä¸­æ‰§è¡Œäº†ä¸€éï¼Œå¹¶ä¸”å°†æ‰€æœ‰ä¸ this ç»‘å®šçš„å˜é‡éƒ½åˆ‡æ¢åˆ°äº† Child ä¸Šï¼Œè¿™æ ·å°±å…‹æœäº†ç¬¬ä¸€ç§æ–¹å¼å¸¦æ¥çš„é—®é¢˜ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ²¡æœ‰åŸå‹ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ª Child å®ä¾‹å¯¹è±¡æ—¶å€™éƒ½éœ€è¦æ‰§è¡Œä¸€é Parent å‡½æ•°ï¼Œæ— æ³•å¤ç”¨ä¸€äº›å…¬ç”¨å‡½æ•°ã€‚</li>
</ol>
<h2 id="ä¸‰-ç»„åˆå¼ç»§æ‰¿ï¼šå‰ä¸¤ç§æ–¹å¼çš„ç»“åˆ"><a href="#ä¸‰-ç»„åˆå¼ç»§æ‰¿ï¼šå‰ä¸¤ç§æ–¹å¼çš„ç»“åˆ" class="headerlink" title="(ä¸‰) ç»„åˆå¼ç»§æ‰¿ï¼šå‰ä¸¤ç§æ–¹å¼çš„ç»“åˆ"></a>(ä¸‰) ç»„åˆå¼ç»§æ‰¿ï¼šå‰ä¸¤ç§æ–¹å¼çš„ç»“åˆ</h2><pre><code>function Parent(name) { 
    this.name = name;
}

Parent.prototype.sayName = function() {
    console.log(&apos;parent name:&apos;, this.name);
}
Parent.prototype.doSomething = function() {
    console.log(&apos;parent do something!&apos;);
}
function Child(name, parentName) {
    Parent.call(this, parentName);
    this.name = name;
}

Child.prototype.sayName = function() {
    console.log(&apos;child name:&apos;, this.name);
}

Child.prototype = new Parent();      
Child.prototype.construtor = Child;

var child = new Child(&apos;son&apos;);
child.sayName();       // child name: son
child.doSomething();   // parent do something!
</code></pre><p>ç»„åˆå¼ç»§æ‰¿æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§ç»§æ‰¿æ–¹æ³•ï¼Œå…¶èƒŒåçš„æ€è·¯æ˜¯ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œè€Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ã€‚</p>
<p>è¿™æ ·ï¼Œæ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å®ç°äº†å‡½æ•°å¤ç”¨ï¼Œåˆä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰å®ƒè‡ªå·±çš„å±æ€§ã€‚</p>
<p>ç»„åˆå¼ç»§æ‰¿æ˜¯ JS æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ï¼Œä½†ç»„åˆç»§æ‰¿ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ï¼šä¸€æ¬¡æ˜¯åˆ›å»ºå­ç±»å‹çš„æ—¶å€™ï¼Œå¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨ã€‚</p>
<pre><code>function Parent(name) { 
    this.name = name;
}
Parent.prototype.sayName = function() {
    console.log(&apos;parent name:&apos;, this.name);
}
Parent.prototype.doSomething = function() {
    console.log(&apos;parent do something!&apos;);
}
function Child(name, parentName) {
    Parent.call(this, parentName);      // ç¬¬äºŒæ¬¡è°ƒç”¨
    this.name = name;
}

Child.prototype.sayName = function() {
    console.log(&apos;child name:&apos;, this.name);
}

Child.prototype = new Parent();         // ç¬¬ä¸€æ¬¡è°ƒç”¨
Child.prototype.construtor = Child;

var child = new Child(&apos;son&apos;);
child.sayName();      
child.doSomething();   
</code></pre><p>æ˜¾ç„¶ä»ä¸Šè¿°çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ„é€ å‡½æ•°æ˜¾ç„¶æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨æ„é€ å‡½æ•°æ—¶å€™ä¸éœ€è¦å‡½æ•°å†…éƒ¨çš„é‚£äº›å®ä¾‹å±æ€§ï¼Œè¿™ä¹ˆå†™åªæ˜¯æƒ³è·å¾—å…¶åŸå‹ä¸Šçš„æ–¹æ³•ç½¢äº†ï¼Œæ‰€ä»¥è¿™æ—¶å€™ä½ å¯èƒ½ä¼šè¿™æ ·å†™ï¼š</p>
<pre><code>Child.prototype = Parent.prototype;
</code></pre><p>è¿™æ ·å†™æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œä½ è¿™æ ·å†™çš„è¯ç›¸å½“äºæ˜¯å­ç±»å’Œçˆ¶ç±»éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶å€™å¦‚æœä½ æ·»åŠ äº†æ–°çš„æ–¹æ³•ç»™ Child ä½†å®é™…ä¸Š Parent å¹¶ä¸éœ€è¦ï¼Œç›¸å½“äºå¼ºè¡Œç»™ Parent æ·»åŠ äº†ä¸€ä¸ªæœªçŸ¥çš„æ–¹æ³•ã€‚</li>
<li>å…¶æ¬¡ï¼Œä»”ç»†æƒ³æƒ³ï¼Œè¿™æ ·ä½“ç°ä¸å‡ºç»§æ‰¿çš„å¤šæ€æ€§ï¼Œæ¯”å¦‚æ­¤æ—¶å­ç±»æƒ³è¦é‡å†™çˆ¶ç±»çš„ getName çš„æ–¹æ³•ï¼Œé‚£ä¹ˆçˆ¶ç±»çš„æ–¹æ³•ä¹Ÿå°±ä¼šéšä¹‹ä¿®æ”¹ï¼Œè¿™æ˜¾ç„¶è¿èƒŒäº†å¤šæ€æ€§ã€‚</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œå…¶å®æ˜¯ä¸ç®¡æ„é€ å‡½æ•°é‡Œé¢çš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½•ä¸ new ä¸€ä¸ªç©ºå‡½æ•°ï¼Œå°†å…¶ prototype æŒ‡å‘ Parent.prototypeï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h2 id="å››-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼š"><a href="#å››-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼š" class="headerlink" title="(å››) å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼š"></a>(å››) å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼š</h2><pre><code>function Parent(name) {
    this.name = name;
}
Parent.prototype.sayName = function() {
    console.log(&apos;parent name:&apos;, this.name);
}

function Child(name, parentName) {
    Parent.call(this, parentName);  
    this.name = name;    
}

function create(proto) {
    function F(){}
    F.prototype = proto;
    F.prototype.construtor = F;
    return new F();
}

Child.prototype = create(Parent.prototype);
Child.prototype.sayName = function() {
    console.log(&apos;child name:&apos;, this.name);
}
Child.prototype.construtor = Child;

var parent = new Parent(&apos;father&apos;);
parent.sayName();    // parent name: father


var child = new Child(&apos;son&apos;, &apos;father&apos;);
child.sayName();     // child name: son
</code></pre><p>è¿™å°±æ˜¯æ‰€è°“çš„å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ–¹å¼ï¼Œè·Ÿç»„åˆå¼ç»§æ‰¿çš„åŒºåˆ«åœ¨äºï¼Œä»–ä¸éœ€è¦åœ¨ä¸€æ¬¡å®ä¾‹ä¸­è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå‡å¦‚è¯´çˆ¶ç±»çš„æ„é€ å™¨ä»£ç å¾ˆå¤šï¼Œè¿˜éœ€è¦è°ƒç”¨ä¸¤æ¬¡çš„è¯å¯¹ç³»ç»Ÿè‚¯å®šä¼šæœ‰å½±å“ï¼Œå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„æ€æƒ³åœ¨äºï¼šç”¨ä¸€ä¸ª F ç©ºçš„æ„é€ å‡½æ•°å»å–ä»£æ‰§è¡Œäº† Parent è¿™ä¸ªæ„é€ å‡½æ•°ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºäº†ä¸€ä¸ª create å‡½æ•°ï¼Œä½†æ˜¯å…¶å®æ˜¯å­˜åœ¨äº Object å¯¹è±¡ä¸­ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»åˆ›å»ºï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å¯ä»¥æ”¹ä¸ºï¼š</p>
<pre><code>function Parent(name) {
    this.name = name;
}
Parent.prototype.sayName = function() {
    console.log(&apos;parent name:&apos;, this.name);
}

function Child(name, parentName) {
    Parent.call(this, parentName);  
    this.name = name;    
}

function inheritPrototype(Parent, Child) {
    Child.prototype = Object.create(Parent.prototype);   //ä¿®æ”¹
    Child.prototype.construtor = Child;
}

inheritPrototype(Parent, Child);

Child.prototype.sayName = function() {
    console.log(&apos;child name:&apos;, this.name);
}

var parent = new Parent(&apos;father&apos;);
parent.sayName();      // parent name: father

var child = new Child(&apos;son&apos;, &apos;father&apos;);
child.sayName();       // child name: son
</code></pre><h2 id="äº”-ES-6-ç»§æ‰¿ï¼š"><a href="#äº”-ES-6-ç»§æ‰¿ï¼š" class="headerlink" title="(äº”) ES 6 ç»§æ‰¿ï¼š"></a>(äº”) ES 6 ç»§æ‰¿ï¼š</h2><p>å½“ç„¶ï¼Œå¦‚æœä½ å­¦ä¹ è¿‡ ES 6ï¼Œé‚£ä¹ˆå†™ç»§æ‰¿å…³ç³»å°±ä¼šç‰¹åˆ«ç®€å•ï¼Œå¦‚æœä½ å­¦è¿‡ Java å°±ä¼šå‘ç°ï¼ŒES 6 ä¸­çš„ç»§æ‰¿è·Ÿ Java å¤ªåƒäº†ï¼Œä¸Šè¿°çš„ä»£ç å¯æ”¹ä¸ºï¼š</p>
<pre><code>class Parent {
    constructor(name) {
    this.name = name;
    }
    doSomething() {
    console.log(&apos;parent do something!&apos;);
    }
    sayName() {
    console.log(&apos;parent name:&apos;, this.name);
    }
}

class Child extends Parent {
    constructor(name, parentName) {
    super(parentName);
    this.name = name;
    }
    sayName() {
     console.log(&apos;child name:&apos;, this.name);
    }
}

const child = new Child(&apos;son&apos;, &apos;father&apos;);
child.sayName();            // child name: son
child.doSomething();        // parent do something!

const parent = new Parent(&apos;father&apos;);
parent.sayName();           // parent name: father
</code></pre><p>JavaScriptå‰ç«¯å¼€å‘</p>
<p>JavaScript(ES5)ä¸­æ²¡æœ‰åƒJavaé‚£æ ·ç±»çš„æ¦‚å¿µï¼Œå†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„ç¨‹åºå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾prototypeæ¥æ¨¡æ‹Ÿç±»ï¼Œå»å®ç°ç»§æ‰¿çš„ç›¸å…³åŠŸèƒ½ã€‚ä¸‹é¢æ¥çœ‹çœ‹ES5ä¸­å®ç°ç»§æ‰¿å¸¸è§çš„ä¸‰ç§æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>/**
 * JavaScript(ES5)ä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•
 */

// å®šä¹‰åŸºç±»Person
function Person(name, age) {
  this.name = name;
  this.age = age;
}

// å…±äº«æ•°æ®
Person.prototype.LEGS_NUM = 2;

// å…±äº«æ–¹æ³•
Person.prototype.info = function () {
  console.log(&apos;My name is &apos; + this.name + &apos; .I\&apos;m &apos; + this.age + &apos; years old now&apos;);
};

Person.prototype.walk = function () {
  console.log(this.name + &apos; is walking...&apos;);
};

// Studentå­ç±»
function Student(name, age, className) {
  // è°ƒç”¨çˆ¶ç±»
  Person.call(this, name, age);
  this.className = className;
}

// 1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototype
// Student.prototype = Person.prototype;

// 2âƒ£ï¸ æ–¹æ³•äºŒï¼šStudent.prototypeä¸ºPersonçš„å®ä¾‹
// Student.prototype = new Person();

// 3âƒ£ï¸ æ–¹æ³•ä¸‰ï¼šåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototype
Student.prototype = Object.create(Person.prototype);

Student.prototype.constructor = Student;

// è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³•
Student.prototype.info = function () {
  console.log(&apos;My name is &apos; + this.name + &apos;,I\&apos;m &apos; + this.age + &apos; years old now, and from class &apos; + this.className + &apos;.&apos;);
};

// Studentç±»çš„å…±äº«æ–¹æ³•
Student.prototype.learn = function (subject) {
  console.log(this.name + &apos; is learning &apos; + subject + &apos;.&apos;);
};

// æµ‹è¯•,åˆ›å»ºä¸€ä¸ªStudentçš„å®ä¾‹
var microzz = new Student(&apos;Microzz&apos;, 22, 5);
microzz.info(); // My name is Microzz,I&apos;m 22 years old now, and from class 5.
console.log(microzz.LEGS_NUM); // 2
microzz.walk(); // Microzz is walking...
microzz.learn(&apos;JavaScript&apos;); // Microzz is learning JavaScript.
console.log(microzz.__proto__.__proto__ === Person.prototype); // true
console.log(microzz.__proto__ === Student.prototype); // true
console.log(microzz.__proto__.constructor === Student); // true
</code></pre><p>ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ</p>
<p>ä¸Šé¢ä»£ç ä¸­æœ‰ä¸‰ç§æ–¹æ³•å®ç°ç»§æ‰¿ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸€ä¸‹è¿™å‡ ç§æ–¹æ³•ã€‚<br>1âƒ£ï¸è¿™ç§æ–¹æ³•ä¸­ï¼ŒPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototypeï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå¦‚æœå­ç±»prototypeæ·»åŠ æ–°çš„ä¸œè¥¿çš„è¯ä¹Ÿä¼šæ”¹å†™çˆ¶ç±»ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•ä¸æ¨èã€‚<br>2âƒ£ï¸ç¬¬äºŒç§æ–¹æ³•Student.prototypeä¸ºPersonçš„å®ä¾‹ï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚ä½†æ˜¯Personæ„é€ å‡½æ•°æœ‰å‚æ•°åº”è¯¥ä¼ ä»€ä¹ˆå‘¢ï¼Ÿä¼ ä»»ä½•ä¸€ä¸ªéƒ½æ˜¯å¾ˆå¥‡æ€ªçš„ã€‚æ‰€ä»¥ä¹Ÿä¸æ¨èã€‚<br>3âƒ£ï¸ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯æ¯”è¾ƒç†æƒ³çš„ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototypeã€‚ä½†æ˜¯Object.createä¹Ÿæœ‰ä¸€ç‚¹å°ç‘•ç–µï¼Œå› ä¸ºå®ƒæ˜¯ES5ä¹‹åæ‰æ”¯æŒçš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿå®ç°Object.createæ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>if (!Object.create) {
  Object.prototype.create = function (proto) {
    function F() {}
    F.prototype = proto;
    return new F;
  }
}
</code></pre><p>è¿™æ ·åœ¨ES5ä¸­å°±å®Œç¾å®ç°äº†ç»§æ‰¿ğŸ˜„</p>
<h2 id="ES6ä¸­çš„å®ç°"><a href="#ES6ä¸­çš„å®ç°" class="headerlink" title="ES6ä¸­çš„å®ç°"></a>ES6ä¸­çš„å®ç°</h2><p>æ¦‚è¿°</p>
<p>ES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€â€ç±»â€çš„å†™æ³•ï¼Œå¼•å…¥äº†Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡classå…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6çš„classå¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„classå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ES6çš„è¯­æ³•å®ç°ç±»çš„ç»§æ‰¿ã€‚</p>
<p>ä»£ç </p>
<pre><code>// åŸºç±» Person
class Person {
  // çˆ¶ç±»çš„æ„é€ æ–¹æ³•
  constructor(name, age) {
    this.name = name;
    this.age = age;
    // å…±äº«å˜é‡
    this.LEGS_NUM = 2;
  }
  // çˆ¶ç±»çš„infoæ–¹æ³•
  info() {
    console.log(`My name is ${this.name}, I\&apos;m ${this.age} years old now.`);
  }

  // çˆ¶ç±»çš„walkæ–¹æ³•
  walk() {
    console.log(this.name + &apos; is walking...&apos;);
  }

}

// å­ç±» Student
class Student extends Person {
  constructor(name, age, className) {
    // è°ƒç”¨åŸºç±»çš„æ„é€ æ–¹æ³•
    super(name, age);
    this.className = className;
  }

  // è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³•
  info() {
    console.log(`My name is ${this.name}, I\&apos;m ${this.age} years old, and from class ${this.className}.`);
  }
}

// å®ä¾‹åŒ–ä¸€ä¸ªStudentçš„å®ä¾‹
let stu = new Student(&apos;Zhaohui&apos;, 22, 5);
stu.info(); // My name is Zhaohui, I&apos;m 22 years old, and from class 5.
stu.walk(); // Zhaohui is walking...
console.log(stu.LEGS_NUM); // 2
console.log(stu instanceof Student); // true
console.log(stu instanceof Person); // true
</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ES6ä¸­çš„classå®ç°äº†â€œç±»â€çš„ç»§æ‰¿äº†ğŸ˜„</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/Vueå¤§æ•°æ®æ¸²æŸ“è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/Vueå¤§æ•°æ®æ¸²æŸ“è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨/" itemprop="url">Vueå¤§æ•°æ®æ¸²æŸ“è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-02T22:59:12+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Githubï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/tangbc/vue-virtual-scroll-list" target="_blank" rel="noopener">tangbc/vue-virtual-scroll-list</a><br><img src="https://pic1.zhimg.com/v2-827fdf77d1a145a6d1d3d56f390a37ff_b.gif" alt=""></p>
<p><img src="https://pic1.zhimg.com/v2-827fdf77d1a145a6d1d3d56f390a37ff_b.jpg" alt=""></p>
<pre><code>;
(function(root, factory) {
    var namespace = &apos;VirtualScrollList&apos;
    if(typeof exports === &apos;object&apos; &amp;&amp; typeof module === &apos;object&apos;) {
        module.exports = factory(namespace, require(&apos;vue&apos;))
    } else if(typeof define === &apos;function&apos; &amp;&amp; define.amd) {
        define([&apos;vue&apos;], factory.bind(root, namespace))
    } else if(typeof exports === &apos;object&apos;) {
        exports[namespace] = factory(namespace, require(&apos;vue&apos;))
    } else {
        root[namespace] = factory(namespace, root[&apos;Vue&apos;])
    }
})(this, function(namespace, Vue2) {
    if(typeof Vue2 === &apos;object&apos; &amp;&amp; typeof Vue2.default === &apos;function&apos;) {
        Vue2 = Vue2.default
    }

    var _debounce = function(func, wait, immediate) {
        var timeout
        return function() {
            var context = this
            var args = arguments
            var later = function() {
                timeout = null
                if(!immediate) {
                    func.apply(context, args)
                }
            }
            var callNow = immediate &amp;&amp; !timeout
            clearTimeout(timeout)
            timeout = setTimeout(later, wait)
            if(callNow) {
                func.apply(context, args)
            }
        }
    }

    return Vue2.component(namespace, {
        props: {
            size: {
                type: Number,
                required: true
            },
            remain: {
                type: Number,
                required: true
            },
            rtag: {
                type: String,
                default: &apos;div&apos;
            },
            wtag: {
                type: String,
                default: &apos;p&apos;
            },
            wclass: {
                type: String,
                default: &apos;&apos;
            },
            start: {
                type: Number,
                default: 0
            },
            offset: {
                type: Number,
                default: 0
            },
            variable: [Function, Boolean],
            bench: Number,
            debounce: Number,
            totop: Function,
            tobottom: Function,
            onscroll: Function
        },

        data(){
            return {
                delta:{}
            }
        },

        created: function() {   // :size=&quot;60&quot; :remain=&quot;6&quot; :bench=&quot;44&quot; class=&quot;list&quot; :start=&quot;startIndex&quot;
            var start = this.start &gt;= this.remain ? this.start : 0
            var keeps = this.remain + (this.bench || this.remain)

            console.log(start)
            console.log(keeps)

            this.delta = {
                start: start, // start index.   //èµ·å§‹index
                end: start + keeps - 1, // end index.   //æ˜¾ç¤ºåˆ—è¡¨last index
                keeps: keeps, // nums keeping in real dom.      //è¦æ˜¾ç¤ºçš„åˆ—è¡¨æ•°æ®
                total: 0, // all items count, update in filter.    //æ€»çš„åˆ—è¡¨æ•°æ®
                offsetAll: 0, // cache all the scrollable offset.
                paddingTop: 0, // container wrapper real padding-top.
                paddingBottom: 0, // container wrapper real padding-bottom.
                varCache: {}, // object to cache variable index height and scroll offset.
                varAverSize: 0, // average/estimate item height before variable be calculated.
                varLastCalcIndex: 0 // last calculated variable height/offset index, always increase.
            }


        },

        watch: {
            size: function() {
                this.alter = &apos;size&apos;
            },
            remain: function() {
                this.alter = &apos;remain&apos;
            },
            bench: function() {
                this.alter = &apos;bench&apos;
            },
            start: function() {
                this.alter = &apos;start&apos;
            },
            offset: function() {
                this.alter = &apos;offset&apos;
            }
        },

        methods: {
            onScroll: function(e) {
                var delta = this.delta
                var offset = this.$refs.vsl.scrollTop

                if(delta.total &gt; delta.keeps) {
                    this.updateZone(offset)
                } else {
                    delta.end = delta.total - 1
                }

                var offsetAll = delta.offsetAll
                if(this.onscroll) {
                    this.onscroll(e, {
                        offset: offset,
                        offsetAll: offsetAll,
                        start: delta.start,
                        end: delta.end
                    })
                }

                if(!offset &amp;&amp; delta.total) {
                    this.triggerEvent(&apos;totop&apos;)
                }

                if(offset &gt;= offsetAll) {
                    this.triggerEvent(&apos;tobottom&apos;)
                }
            },

            // update render zone by scroll offset.
            updateZone: function(offset) {
                var overs = this.variable ?
                    this.getVarOvers(offset) :
                    Math.floor(offset / this.size)

                var delta = this.delta
                var zone = this.getZone(overs)
                var bench = this.bench || this.remain

                // for better performance, if scroll pass items within now bench, do not update.
                if(!zone.isLast &amp;&amp; (overs &gt; delta.start) &amp;&amp; (overs - delta.start &lt;= bench)) {
                    return
                }

                delta.end = zone.end
                delta.start = zone.start
                this.$forceUpdate()
            },

            // return the scroll passed items count in variable.
            getVarOvers: function(offset) {
                var low = 0
                var middle = 0
                var middleOffset = 0
                var delta = this.delta
                var high = delta.total

                while(low &lt;= high) {
                    middle = low + Math.floor((high - low) / 2)
                    middleOffset = this.getVarOffset(middle)

                    // calculate the average variable height at first binary search.
                    if(!delta.varAverSize) {
                        delta.varAverSize = Math.floor(middleOffset / middle)
                    }

                    if(middleOffset === offset) {
                        return middle
                    } else if(middleOffset &lt; offset) {
                        low = middle + 1
                    } else if(middleOffset &gt; offset) {
                        high = middle - 1
                    }
                }

                return low &gt; 0 ? --low : 0
            },

            // return a variable scroll offset from given index.
            getVarOffset: function(index, nocache) {
                var delta = this.delta
                var cache = delta.varCache[index]

                if(!nocache &amp;&amp; cache) {
                    return cache.offset
                }

                var offset = 0
                for(var i = 0; i &lt; index; i++) {
                    var size = this.getVarSize(i, nocache)
                    delta.varCache[i] = {
                        size: size,
                        offset: offset
                    }
                    offset += size
                }

                delta.varLastCalcIndex = Math.max(delta.varLastCalcIndex, index - 1)
                delta.varLastCalcIndex = Math.min(delta.varLastCalcIndex, delta.total - 1)

                return offset
            },

            // return a variable size (height) from given index.
            getVarSize: function(index, nocache) {
                var cache = this.delta.varCache[index]
                if(!nocache &amp;&amp; cache) {
                    return cache.size
                }

                if(typeof this.variable === &apos;function&apos;) {
                    return this.variable(index) || 0
                } else {
                    var slot = this.$slots.default[index]
                    var style = slot &amp;&amp; slot.data &amp;&amp; slot.data.style
                    if(style &amp;&amp; style.height) {
                        var shm = style.height.match(/^(.*)px$/)
                        return(shm &amp;&amp; +shm[1]) || 0
                    }
                }
                return 0
            },

            // return the variable paddingTop base current zone.
            // @todo: if set a large `start` before variable was calculated,
            // here will also case too much offset calculate when list is very large,
            // consider use estimate paddingTop in this case just like `getVarPaddingBottom`.
            getVarPaddingTop: function() {
                return this.getVarOffset(this.delta.start)
            },

            // return the variable paddingBottom base current zone.
            getVarPaddingBottom: function() {
                var delta = this.delta
                var last = delta.total - 1
                if(delta.total - delta.end &lt;= delta.keeps || delta.varLastCalcIndex === last) {
                    return this.getVarOffset(last) - this.getVarOffset(delta.end)
                } else {
                    // if unreached last zone or uncalculate real behind offset
                    // return the estimate paddingBottom avoid too much calculate.
                    return(delta.total - delta.end) * (delta.varAverSize || this.size)
                }
            },

            // retun the variable all heights use to judge reach bottom.
            getVarAllHeight: function() {
                var delta = this.delta
                if(delta.total - delta.end &lt;= delta.keeps || delta.varLastCalcIndex === delta.total - 1) {
                    return this.getVarOffset(delta.total)
                } else {
                    return this.getVarOffset(delta.start) + (delta.total - delta.end) * (delta.varAverSize || this.size)
                }
            },

            // the ONLY ONE public method, allow the parent update variable by index.
            updateVariable: function(index) {
                // clear/update all the offfsets and heights ahead of index.
                this.getVarOffset(index, true)
            },

            // return the right zone info base on `start/index`.
            getZone: function(index) {
                var start, end
                var delta = this.delta

                index = parseInt(index, 10)
                index = Math.max(0, index)

                var lastStart = delta.total - delta.keeps
                var isLast = (index &lt;= delta.total &amp;&amp; index &gt;= lastStart) || (index &gt; delta.total)
                if(isLast) {
                    end = delta.total - 1
                    start = Math.max(0, lastStart)
                } else {
                    start = index
                    end = start + delta.keeps - 1
                }

                return {
                    end: end,
                    start: start,
                    isLast: isLast
                }
            },

            // trigger a props event on parent.
            triggerEvent: function(event) {
                if(this[event]) {
                    this[event]()
                }
            },

            // set manual scroll top.
            setScrollTop: function(scrollTop) {
                this.$refs.vsl.scrollTop = scrollTop
            },

            // filter the shown items base on `start` and `end`.
            filter: function() {
                var delta = this.delta
                var slots = this.$slots.default

                if(!slots) {
                    slots = []
                    delta.start = 0
                }

                delta.total = slots.length

                var paddingTop, paddingBottom, allHeight;


                var hasPadding = delta.total &gt; delta.keeps

                if(this.variable) {
                    allHeight = this.getVarAllHeight()
                    paddingTop = hasPadding ? this.getVarPaddingTop() : 0
                    paddingBottom = hasPadding ? this.getVarPaddingBottom() : 0
                } else {
                    allHeight = this.size * delta.total
                    paddingTop = this.size * (hasPadding ? delta.start : 0)
                    paddingBottom = this.size * (hasPadding ? delta.total - delta.keeps : 0) - paddingTop
                }

                delta.paddingTop = paddingTop
                delta.paddingBottom = paddingBottom
                delta.offsetAll = allHeight - this.size * this.remain  //æ€»é«˜åº¦å‡å»çª—å£çš„é«˜åº¦

                return slots.filter(function(slot, index) {
                    return index &gt;= delta.start &amp;&amp; index &lt;= delta.end
                })
            }
        },

        mounted: function() {
            if(this.start) {
                var start = this.getZone(this.start).start
                this.setScrollTop(this.variable ? this.getVarOffset(start) : start * this.size)
            } else if(this.offset) {
                this.setScrollTop(this.offset)
            }
        },

        // check if delta should update when prorps change.
        beforeUpdate: function() {
            var delta = this.delta
            delta.keeps = this.remain + (this.bench || this.remain)

            var calcstart = this.alter === &apos;start&apos; ? this.start : delta.start
            var zone = this.getZone(calcstart)

            // if start, size or offset change, update scroll position.
            if(~[&apos;start&apos;, &apos;size&apos;, &apos;offset&apos;].indexOf(this.alter)) {
                this.$nextTick(this.setScrollTop.bind(this, this.alter === &apos;offset&apos; ?
                    this.offset : this.variable ?
                    this.getVarOffset(zone.isLast ? delta.total : zone.start) :
                    zone.isLast ? delta.total * this.size : zone.start * this.size))
            }

            // if points out difference, force update once again.
            if(calcstart !== zone.start || delta.end !== zone.end || this.alter) {
                this.alter = &apos;&apos;
                delta.end = zone.end
                delta.start = zone.start
                this.$forceUpdate()
            }
        },

        render: function(h) {
            var list = this.filter()
            var delta = this.delta
            var dbc = this.debounce
            console.log(list)
            return h(this.rtag, {
                &apos;ref&apos;: &apos;vsl&apos;,
                &apos;style&apos;: {
                    &apos;display&apos;: &apos;block&apos;,
                    &apos;overflow-y&apos;: &apos;auto&apos;,
                    &apos;height&apos;: this.size * this.remain + &apos;px&apos;
                },
                &apos;on&apos;: {
                    &apos;scroll&apos;: dbc ? _debounce(this.onScroll.bind(this), dbc) : this.onScroll
                }
            }, [
                h(this.wtag, {
                    &apos;style&apos;: {
                        &apos;display&apos;: &apos;block&apos;,
                        &apos;padding-top&apos;: delta.paddingTop + &apos;px&apos;,
                        &apos;padding-bottom&apos;: delta.paddingBottom + &apos;px&apos;
                    },
                    &apos;class&apos;: this.wclass
                }, list)
            ])
        }
    })
})


&lt;template&gt;
    &lt;div class=&quot;appWraper&quot;&gt;
        &lt;div class=&quot;scrollToIndex&quot;&gt;
            &lt;span&gt;Scroll to index: &lt;/span&gt;
            &lt;input type=&quot;text&quot; v-model.number.lazy=&quot;startIndex&quot;&gt;
            &lt;small&gt;Change and blur to set start index.&lt;/small&gt;
        &lt;/div&gt;
        &lt;VirtualList :size=&quot;60&quot; :remain=&quot;6&quot; :bench=&quot;24&quot; class=&quot;list&quot; :start=&quot;startIndex&quot;&gt;
            &lt;Item v-for=&quot;(udf, index) of items&quot; :index=&quot;index&quot; :key=&quot;index&quot;&gt;&lt;/Item&gt;
        &lt;/VirtualList&gt;




        &lt;div class=&quot;source&quot;&gt;
            &lt;a href=&quot;https://github.com/tangbc/vue-virtual-scroll-list/blob/master/examples/finite/finite.vue#L1&quot;&gt;
                View this demo source code
            &lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    import Item from &apos;./item.vue&apos;
    import VirtualList from &apos;./VirtualScrollList.js&apos;

    export default {
        name: &apos;finite-test&apos;,

        components: {
            Item,
            VirtualList
        },

        data() {
            return {
                startIndex: 9,
                items: new Array(100)
            }
        }
    }
&lt;/script&gt;

&lt;style&gt;

    body {
        background: #fffaf0;
    }
    .appWraper {
        width: 440px;
        margin: 0 auto;
        overflow-y: auto;
    }
    .title {
        font-size: 25px;
        font-weight: 100;
        text-align: center;
    }
    @media (max-width: 640px) {
        .appWraper {
            width: 100%;
        }
        .title {
            font-size: 16px;
        }
    }





    .scrollToIndex {
        padding-bottom: 20px;
    }

    input {
        outline: none;
        padding: .4em .5em;
        width: 55px;
        height: 16px;
        border-radius: 3px;
        border: 1px solid;
        border-color: #dddddd;
        font-size: 16px;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }

    input:focus {
        border-color: #6495ed;
    }

    small {
        color: #999;
    }

    .list {
        background: #fff;
        border-radius: 3px;
        border: 1px solid #ddd;
        -webkit-overflow-scrolling: touch;
        overflow-scrolling: touch;
    }

    .source {
        text-align: center;
        padding-top: 20px;
    }

    .source a {
        color: #999;
        text-decoration: none;
        font-weight: 100;
    }

    @media (max-width: 640px) {
        small {
            display: none;
        }
    }
&lt;/style&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/20/promiseçš„æ¨¡æ‹Ÿå®ç°/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/20/promiseçš„æ¨¡æ‹Ÿå®ç°/" itemprop="url">promiseçš„æ¨¡æ‹Ÿå®ç°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-20T13:11:36+08:00">
                2017-12-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯promise"><a href="#1-1-ä»€ä¹ˆæ˜¯promise" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯promise"></a>1.1 ä»€ä¹ˆæ˜¯promise</h2><p><code>Promise</code> å¯¹è±¡æ˜¯ <code>JavaScript</code> çš„å¼‚æ­¥æ“ä½œè§£å†³æ–¹æ¡ˆï¼Œä¸ºå¼‚æ­¥æ“ä½œæä¾›ç»Ÿä¸€æ¥å£ã€‚å®ƒèµ·åˆ°ä»£ç†ä½œç”¨ï¼ˆproxyï¼‰ï¼Œå……å½“å¼‚æ­¥æ“ä½œä¸å›è°ƒå‡½æ•°ä¹‹é—´çš„ä¸­ä»‹ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå…·å¤‡åŒæ­¥æ“ä½œçš„æ¥å£ã€‚</p>
<h2 id="1-2-promiseè§£å†³çš„é—®é¢˜"><a href="#1-2-promiseè§£å†³çš„é—®é¢˜" class="headerlink" title="1.2 promiseè§£å†³çš„é—®é¢˜"></a>1.2 promiseè§£å†³çš„é—®é¢˜</h2><h3 id="1-2-1-å›è°ƒåœ°ç‹±"><a href="#1-2-1-å›è°ƒåœ°ç‹±" class="headerlink" title="1.2.1 å›è°ƒåœ°ç‹±"></a>1.2.1 å›è°ƒåœ°ç‹±</h3><p><code>Promise</code> å¯ä»¥è®©å¼‚æ­¥æ“ä½œå†™èµ·æ¥ï¼Œå°±åƒåœ¨å†™åŒæ­¥æ“ä½œçš„æµç¨‹ï¼Œè€Œä¸å¿…ä¸€å±‚å±‚åœ°åµŒå¥—å›è°ƒå‡½æ•°ã€‚</p>
<h3 id="1-2-2-å¹¶è¡Œç»“æœ"><a href="#1-2-2-å¹¶è¡Œç»“æœ" class="headerlink" title="1.2.2 å¹¶è¡Œç»“æœ"></a>1.2.2 å¹¶è¡Œç»“æœ</h3><p>å¦‚æœå‡ ä¸ªå¼‚æ­¥æ“ä½œä¹‹é—´å¹¶æ²¡æœ‰å‰åé¡ºåºä¹‹åˆ†,ä½†éœ€è¦ç­‰å¤šä¸ªå¼‚æ­¥æ“ä½œéƒ½å®Œæˆåæ‰èƒ½æ‰§è¡Œåç»­çš„ä»»åŠ¡ï¼Œæ— æ³•å®ç°å¹¶è¡ŒèŠ‚çº¦æ—¶é—´ã€‚</p>
<h2 id="1-3-promiseç®€ä»‹"><a href="#1-3-promiseç®€ä»‹" class="headerlink" title="1.3 promiseç®€ä»‹"></a>1.3 promiseç®€ä»‹</h2><p>åœ¨ <code>ES6 Promises</code> æ ‡å‡†ä¸­å®šä¹‰çš„APIè¿˜ä¸æ˜¯å¾ˆå¤šï¼Œç›®å‰å¤§è‡´æœ‰ä¸‹é¢ä¸‰ç§ç±»å‹ã€‚</p>
<h3 id="1-3-1-consturctor"><a href="#1-3-1-consturctor" class="headerlink" title="1.3.1 consturctor"></a>1.3.1 <strong>consturctor</strong></h3><p>é¦–å…ˆï¼Œ<code>Promise</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚</p>
<pre><code>functionf1(resolve, reject) {
  // å¼‚æ­¥ä»£ç ...
}

var promise = newPromise(f1);
</code></pre><h3 id="1-3-2-Instance-Method"><a href="#1-3-2-Instance-Method" class="headerlink" title="1.3.2 Instance Method"></a>1.3.2 Instance Method</h3><p><code>Promise</code>å¯¹è±¡é€šè¿‡è‡ªèº«çš„çŠ¶æ€ï¼Œæ¥æ§åˆ¶å¼‚æ­¥æ“ä½œã€‚Promiseå®ä¾‹å…·æœ‰ä¸‰ç§çŠ¶æ€ã€‚</p>
<ul>
<li>å¼‚æ­¥æ“ä½œæœªå®Œæˆï¼ˆpendingï¼‰</li>
<li>å¼‚æ­¥æ“ä½œæˆåŠŸï¼ˆfulfilledï¼‰</li>
<li>å¼‚æ­¥æ“ä½œå¤±è´¥ï¼ˆrejectedï¼‰</li>
</ul>
<p>è¿™ä¸‰ç§çš„çŠ¶æ€çš„å˜åŒ–é€”å¾„åªæœ‰ä¸¤ç§ã€‚</p>
<ul>
<li>ä»â€œæœªå®Œæˆâ€åˆ°â€œæˆåŠŸâ€</li>
<li>ä»â€œæœªå®Œæˆâ€åˆ°â€œå¤±è´¥â€</li>
</ul>
<p>æ‰€ä»¥<code>Promise</code>çš„æœ€ç»ˆç»“æœåªæœ‰ä¸¤ä¸ª,</p>
<ul>
<li>å¼‚æ­¥æ“ä½œæˆåŠŸï¼ŒPromiseå®ä¾‹ä¼ å›ä¸€ä¸ªå€¼ï¼ˆvalueï¼‰,çŠ¶æ€å˜ä¸º<code>fulfilled</code>ã€‚</li>
<li><p>å¼‚æ­¥æ“ä½œå¤±è´¥ï¼ŒPromise å®ä¾‹æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ˆerrorï¼‰,çŠ¶æ€å˜ä¸º<code>rejected</code>ã€‚</p>
<p>  promise.then(onFulfilled, onRejected)<br>  // resolve(æˆåŠŸ)æ—¶,onFulfilled ä¼šè¢«è°ƒç”¨// reject(å¤±è´¥)æ—¶,onRejected ä¼šè¢«è°ƒç”¨</p>
</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2018/3/5/161f55d1eecd52cb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt=""></p>
<h3 id="1-3-3-Static-Method"><a href="#1-3-3-Static-Method" class="headerlink" title="1.3.3 Static Method"></a>1.3.3 Static Method</h3><p>åƒ <code>Promise</code>è¿™æ ·çš„å…¨å±€å¯¹è±¡è¿˜æ‹¥æœ‰ä¸€äº›é™æ€æ–¹æ³•ã€‚åŒ…æ‹¬ <code>Promise.all()</code>è¿˜æœ‰<code>Promise.resolve()</code> ç­‰åœ¨å†…ï¼Œä¸»è¦éƒ½æ˜¯ä¸€äº›å¯¹<code>Promise</code>è¿›è¡Œæ“ä½œçš„è¾…åŠ©æ–¹æ³•ã€‚</p>
<h1 id="2-Promiseçš„å®ç°"><a href="#2-Promiseçš„å®ç°" class="headerlink" title="2.Promiseçš„å®ç°"></a>2.<code>Promise</code>çš„å®ç°</h1><h2 id="2-1-resolveå’Œreject"><a href="#2-1-resolveå’Œreject" class="headerlink" title="2.1 resolveå’Œreject"></a>2.1 resolveå’Œreject</h2><p><code>resolve</code>å’Œ<code>reject</code>éƒ½æ˜¯å‡½æ•°</p>
<pre><code>//æ„é€ å‡½æ•°ä¸­functionPromise(executor) {
    let self = this;

    /*åˆå§‹åŒ–status*/
    self.status = &apos;pending&apos;;
    /*åˆå§‹åŒ–value*/
    self.value = undefined;
    /*è®¢é˜…äº‹ä»¶çš„æ•°ç»„*/
    self.onResolvedCallBacks = [];
    self.onRejectedCallBacks = [];

    /*æ­¤å‡½æ•°å°†Promiseå®ä¾‹çš„çŠ¶æ€ç”±pending è½¬åŒ–ä¸º fulfilled*/functionresolve(value) {
        if (value instanceofPromise) {
            return value.then(resolve, reject);
        }
        setTimeout(function () {
            if (self.status === &apos;pending&apos;) {
                self.status = &apos;fulfilled&apos;;
                self.value = value;
                /*å‘å¸ƒå·²ç»è®¢é˜…è¿‡çš„äº‹ä»¶*/
                self.onResolvedCallBacks.forEach(item =&gt; item(self.value))
            }
        }, 0)
    }
    /*æ­¤å‡½æ•°å°†Promiseå®ä¾‹çš„çŠ¶æ€ç”±pending è½¬åŒ–ä¸º rejected*/functionreject(reason) {
        setTimeout(function () {
            if (self.status === &apos;pending&apos;) {
                self.status = &apos;rejected&apos;;
                self.value = reason;
                /*å‘å¸ƒå·²ç»è®¢é˜…è¿‡çš„äº‹ä»¶*/
                self.onRejectedCallBacks.forEach(item =&gt; item(self.value))
            }
        }, 0)
    }

    // new Promise çš„æ—¶å€™ï¼Œæ‰§è¡Œå™¨ï¼ˆexecutorï¼‰çš„ä»£ç ä¼šç«‹å³æ‰§è¡Œtry {
        executor(resolve, reject);
    } catch (e) {
        reject(e);
    }

}
</code></pre><h2 id="2-2-thenæ–¹æ³•"><a href="#2-2-thenæ–¹æ³•" class="headerlink" title="2.2 thenæ–¹æ³•"></a>2.2 thenæ–¹æ³•</h2><p><code>promise</code>æˆåŠŸåï¼Œ<code>onFullfilled</code>ä¼šè¢«è°ƒç”¨ã€‚å¹¶ä¸”æŠŠ<code>promise</code>çš„å€¼å½“åšå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚<code>promise</code>åœ¨æˆåŠŸä¹‹å‰ï¼Œä¸ä¼šè°ƒç”¨å®ƒï¼Œå¹¶ä¸”åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚<code>reject</code>ä¹Ÿä¸€æ ·ã€‚</p>
<pre><code>// å…ˆå°è£…ä¸€ä¸ªæ–¹æ³•
function resolvePromise(promise2,x,resolve,reject){
//
  if(promise2 === x){
    return reject(new TypeError(&apos;å¾ªç¯å¼•ç”¨&apos;));
  }
  // ä¸ºäº†é˜²æ­¢resolveå’ŒrejectåŒæ—¶è°ƒç”¨
  let called = false;//promise2æ˜¯å¦å·²ç»resolve æˆ–rejectäº†
  if(x instanceof Promise){
    if(x.status == PENDING){
      x.then(function(y){
        resolvePromise(promise2,y,resolve,reject);
      },reject);
    }else{
      x.then(resolve,reject);
    }
    //xæ˜¯ä¸€ä¸ªthenableå¯¹è±¡æˆ–å‡½æ•°ï¼Œåªè¦æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œ
  }elseif(x!= null &amp;&amp;((typeof x==&apos;object&apos;)||(typeof x == &apos;function&apos;))){
    //å½“æˆ‘ä»¬çš„promiseå’Œåˆ«çš„promiseè¿›è¡Œäº¤äº’ï¼Œç¼–å†™è¿™æ®µä»£ç çš„æ—¶å€™å°½é‡çš„è€ƒè™‘å…¼å®¹æ€§ï¼Œ
    //å…è®¸åˆ«äººçå†™ï¼Œxå¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°
    try{
      letthen = x.then;
      if(typeof then == &apos;function&apos;){
        //æœ‰äº›promiseä¼šåŒæ—¶æ‰§è¡ŒæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ
        then.call(x,function(y){
          //å¦‚æœpromise2å·²ç»æˆåŠŸæˆ–å¤±è´¥äº†ï¼Œåˆ™ä¸ä¼šå†å¤„ç†äº†
          if(called)return;
          called = true;
          resolvePromise(promise2,y,resolve,reject)
        },function(err){
          if(called)return;
          called = true;
          reject(err);
        });
      }else{
        //åˆ°æ­¤çš„è¯xä¸æ˜¯ä¸€ä¸ªthenableå¯¹è±¡ï¼Œé‚£ç›´æ¥æŠŠå®ƒå½“æˆå€¼resolve promise2å°±å¯ä»¥äº†
        // å½“è¿”å›ä¸€ä¸ªå¯¹è±¡ {name:&apos;a&apos;,then:{age:8}},å¯¹è±¡é‡Œçš„thenä¸æ˜¯thenableå¯¹è±¡
        resolve(x);
      }
    }catch(e){
      if(called)return;
      called = true;
      reject(e);
    }

  }else{
    //å¦‚æœXæ˜¯ä¸€ä¸ªæ™®é€š çš„å€¼ï¼Œåˆ™ç”¨xçš„å€¼å»resolve promise2
    resolve(x);
  }
}

Promise.prototype.then = function(onFulfilled,onRejected){
  //å¦‚æœæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒæ²¡æœ‰ä¼ ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªthenæ²¡æœ‰ä»»ä½•é€»è¾‘ï¼Œåªä¼šæŠŠå€¼å¾€åæŠ›,å«åšå€¼çš„ç©¿é€
  // ä¾‹å¦‚ï¼špromise.then().then().then(function(data){},function(err){})

  onFulfilled = typeof onFulfilled == &apos;function&apos;?onFulfilled:function(value){return  value};
  onRejected = typeof onRejected == &apos;function&apos;?onRejected:reason=&gt;{throw reason};
  //å¦‚æœå½“å‰promiseçŠ¶æ€å·²ç»æ˜¯æˆåŠŸæ€äº†ï¼ŒonFulfilledç›´æ¥å–å€¼
  let self = this;
  let promise2;
  if(self.status == FULFILLED){
    return promise2 = new Promise(function(resolve,reject){
      setTimeout(function(){
        try{
          let x =onFulfilled(self.value);
          //å¦‚æœè·å–åˆ°äº†è¿”å›å€¼x,ä¼šèµ°è§£æpromiseçš„è¿‡ç¨‹
          resolvePromise(promise2,x,resolve,reject);
        }catch(e){
          //å¦‚æœæ‰§è¡ŒæˆåŠŸçš„å›è°ƒè¿‡ç¨‹ä¸­å‡ºé”™äº†ï¼Œç”¨é”™è¯¯åŸå› æŠŠpromise2 reject
          reject(e);
        }
      })

    });
  }
  if(self.status == REJECTED){
    return promise2 = new Promise(function(resolve,reject){
      setTimeout(function(){
        try{
          let x =onRejected(self.value);
          resolvePromise(promise2,x,resolve,reject);
        }catch(e){
          reject(e);
        }
      })
    });
  }
  if(self.status == PENDING){
    return promise2 = new Promise(function(resolve,reject){
      self.onResolvedCallbacks.push(function(){
        try{
          let x =onFulfilled(self.value);
          //å¦‚æœè·å–åˆ°äº†è¿”å›å€¼x,ä¼šèµ°è§£æpromiseçš„è¿‡ç¨‹
          resolvePromise(promise2,x,resolve,reject);
        }catch(e){
          reject(e);
        }

      });
      self.onRejectedCallbacks.push(function(){
        try{
          let x =onRejected(self.value);
          resolvePromise(promise2,x,resolve,reject);
        }catch(e){
          reject(e);
        }
      });
    });
  }

}
</code></pre><h2 id="2-2-catchæ–¹æ³•"><a href="#2-2-catchæ–¹æ³•" class="headerlink" title="2.2 catchæ–¹æ³•"></a>2.2 catchæ–¹æ³•</h2><pre><code>Promise.prototype.catch=function (callback) {
  returnthis.then(null,callback);
}
---------ä½¿ç”¨-------
let promise = newPromise(function (resolve, reject) {
  reject(&apos;é”™è¯¯&apos;);
})
promise.then(function(data){console.log(data)}).catch(e=&gt;{console.log(e)});
</code></pre><h2 id="2-3-all-æ–¹æ³•"><a href="#2-3-all-æ–¹æ³•" class="headerlink" title="2.3 all æ–¹æ³•"></a>2.3 all æ–¹æ³•</h2><pre><code>Promise.all = function (promises) {
  returnnewPromise(function (resolve,reject) {
    let arr =[];//arræ˜¯æœ€ç»ˆè¿”å›å€¼çš„ç»“æœçš„é›†åˆã€‚let j =0;
    functionprocessData(i,data){// æ¯è°ƒç”¨ä¸€æ¬¡æ­¤å‡½æ•°ï¼Œjå°±ä¼š+1ï¼›
      arr[i] = data;// æ¯æ¬¡æˆåŠŸçš„ç»“æœéƒ½æ”¾å…¥æ•°ç»„ä¸­if(++j===promises.length){
        resolve(arr); //åªæœ‰promisesä¸­çš„æœ€åä¸€ä¸ªæˆåŠŸï¼Œæ‰èƒ½è°ƒç”¨resolveæ–¹æ³•ã€‚
      }
    }
    for(let i=0;i&lt;promises.length;i++){
      promises[i].then(function (data) {
          processData(i,data);
      },reject)// å¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥ï¼Œæ•´ä½“å°±ä¼šå¤±è´¥
    }
  })
}
</code></pre><p>ä½¿ç”¨æ–¹æ³•ï¼š</p>
<pre><code>functionread(file) {
  returnnew Promise1(function (resolve, reject) {
    require(&apos;fs&apos;).readFile(file,&apos;utf8&apos;,function (err, data) {
      resolve(data);
    })
  })
}

Promise1.all([read(&apos;./1.txt&apos;),read(&apos;./2.txt&apos;)]).then(function (data) {
  console.log(data)
})
// [&apos;file1&apos;,&apos;file2&apos;]
</code></pre><h2 id="2-4-race-æ–¹æ³•"><a href="#2-4-race-æ–¹æ³•" class="headerlink" title="2.4 race æ–¹æ³•"></a>2.4 race æ–¹æ³•</h2><p>åªè¦æœ‰ä¸€ä¸ªpromiseæˆåŠŸï¼Œå°±ä¼šæ‰§è¡ŒæˆåŠŸçš„å›è°ƒï¼Œå‚æ•°æ˜¯ç”±promiseç»„æˆçš„æ•°ç»„</p>
<pre><code>Promise.race=function (promises) {
  return new Promise(function (resolve, reject) {
    for(let i=0;i&lt;promises.length;i++){
      promises[i].then(resolve,reject);
    }
  })
}
</code></pre><h2 id="2-5-resolveæ–¹æ³•"><a href="#2-5-resolveæ–¹æ³•" class="headerlink" title="2.5 resolveæ–¹æ³•"></a>2.5 resolveæ–¹æ³•</h2><pre><code>Promise.resolve = function (value) {
  return new Promise(function (resolve, reject) {
    resolve(value)
  })
}
</code></pre><h2 id="2-6-reject-æ–¹æ³•"><a href="#2-6-reject-æ–¹æ³•" class="headerlink" title="2.6 reject æ–¹æ³•"></a>2.6 reject æ–¹æ³•</h2><pre><code>Promise.reject = function (reason) {
  return new Promise(function (resolve, reject) {
    reject(reason);
  })
}
</code></pre><h1 id="3-Promiseå¯¹è±¡çš„ç¼ºç‚¹ï¼š"><a href="#3-Promiseå¯¹è±¡çš„ç¼ºç‚¹ï¼š" class="headerlink" title="3.Promiseå¯¹è±¡çš„ç¼ºç‚¹ï¼š"></a>3.<code>Promise</code>å¯¹è±¡çš„ç¼ºç‚¹ï¼š</h1><ul>
<li><p>1ã€æ— æ³•å–æ¶ˆ<code>Promise</code>ï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚</p>
</li>
<li><p>2ã€å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œ<code>Promise</code>å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚</p>
</li>
<li><p>3ã€å½“å¤„äº<code>Pending</code>çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/11/callå’Œapplyçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯null-undefinedæ—¶å‡½æ•°å†…çš„çš„thisæŒ‡å‘windowæˆ–global/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/11/callå’Œapplyçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯null-undefinedæ—¶å‡½æ•°å†…çš„çš„thisæŒ‡å‘windowæˆ–global/" itemprop="url">callå’Œapplyçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯null/undefinedæ—¶å‡½æ•°å†…çš„çš„thisæŒ‡å‘windowæˆ–global</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-11T23:25:16+08:00">
                2017-11-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="è°è¯´-JavaScript-å¾ˆç®€å•äº†ï¼Ÿ"><a href="#è°è¯´-JavaScript-å¾ˆç®€å•äº†ï¼Ÿ" class="headerlink" title="è°è¯´ JavaScript å¾ˆç®€å•äº†ï¼Ÿ"></a><a href="https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000009024648" target="_blank" rel="noopener">è°è¯´ JavaScript å¾ˆç®€å•äº†ï¼Ÿ</a></h2><h2 id="JavaScriptç³»åˆ—â€”â€”æ•°ç»„å…ƒç´ å·¦å³ç§»åŠ¨Nä½ç®—æ³•å®ç°"><a href="#JavaScriptç³»åˆ—â€”â€”æ•°ç»„å…ƒç´ å·¦å³ç§»åŠ¨Nä½ç®—æ³•å®ç°" class="headerlink" title="JavaScriptç³»åˆ—â€”â€”æ•°ç»„å…ƒç´ å·¦å³ç§»åŠ¨Nä½ç®—æ³•å®ç°"></a><a href="https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000012882330" target="_blank" rel="noopener">JavaScriptç³»åˆ—â€”â€”æ•°ç»„å…ƒç´ å·¦å³ç§»åŠ¨Nä½ç®—æ³•å®ç°</a></h2><p>14å¹´çš„é¢è¯•é¢˜ï¼Œæƒ³ä¸åˆ°ä»Šå¤©åœ¨ç¾¤é‡Œæœ‰äººè¿˜é—®äº†è¿™ä¸ªï¼<br><img src="https://pic1.zhimg.com/v2-2ba203f9e2e5fd627521c12d5e8f4e91_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-2ba203f9e2e5fd627521c12d5e8f4e91_hd.jpg" alt=""><br>call/applyç”¨æ¥æ”¹å˜å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆthisï¼‰ï¼Œå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°thisArgæ˜¯ä¸ªå¯¹è±¡ï¼Œå³ä½œä¸ºå‡½æ•°å†…çš„thisã€‚</p>
<p>å¤šæ•°æ—¶å€™ä½ ä¼ å•¥å‡½æ•°å†…å°±æ˜¯å•¥ã€‚ä»…ä»¥callç¤ºä¾‹</p>
<pre><code>function fun() {
alert(this);
}
fun.call(1);
fun.call(&apos;a&apos;);
fun.call(true);
fun.call({name:&apos;jack&apos;});
</code></pre><p>åˆ†åˆ«å¼¹å‡ºâ€œ1â€ã€â€œaâ€ã€â€œtrueâ€ã€â€œ[object Object]â€ã€‚</p>
<p>æœ‰ä¸¤ç§æƒ…å†µéœ€è¦æ³¨æ„ï¼Œä¼ nullæˆ–undefinedæ—¶ï¼Œå°†æ˜¯JSæ‰§è¡Œç¯å¢ƒçš„å…¨å±€å˜é‡ã€‚æµè§ˆå™¨ä¸­æ˜¯windowï¼Œå…¶å®ƒç¯å¢ƒï¼ˆå¦‚nodeï¼‰åˆ™æ˜¯globalã€‚</p>
<pre><code>fun.call(null); // window or global
fun.call(undefined); // window or global
</code></pre><p>è¿™åœ¨ECMAScript5.1 15.3.4.4ä¸­æœ‰è§£é‡Šï¼Œå¦‚ä¸‹<br><img src="https://pic2.zhimg.com/v2-a55dd237510bbfca06ff1f5ad5c1ac2e_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-a55dd237510bbfca06ff1f5ad5c1ac2e_hd.jpg" alt=""><br>ä¸¥æ ¼æ¨¡å¼ä¸‹æƒ…å†µåˆæœ‰æ‰€ä¸åŒï¼ŒES3æ¯”è¾ƒå®½å®¹å°½é‡å»æ£æµ‹ä»£ç æ„å›¾ã€‚ES5ä¸¥æ ¼æ¨¡å¼ï¼ˆie6/7/8/9é™¤å¤–ï¼‰åˆ™ä¸å†æ£æµ‹ï¼Œç»™call/applyä¼ å…¥çš„ä»»ä½•å‚æ•°ä¸å†è½¬æ¢ã€‚å¦‚ä¸‹</p>
<pre><code>&apos;use strict&apos;
function fun() {
alert(this);
}
fun.call(null)      // null
fun.call(undefined) // undefined 
</code></pre><h2 id="å‡ ä¸ªé¢è¯•å°é¢˜ï¼š"><a href="#å‡ ä¸ªé¢è¯•å°é¢˜ï¼š" class="headerlink" title="å‡ ä¸ªé¢è¯•å°é¢˜ï¼š"></a>å‡ ä¸ªé¢è¯•å°é¢˜ï¼š</h2><p><img src="https://pic1.zhimg.com/v2-99d1bfc9bfa325ea383e8e5209a46384_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-99d1bfc9bfa325ea383e8e5209a46384_hd.jpg" alt=""><br>1.alert(alert(1)&amp;&amp;alert(2)):    ç¬¬ä¸€ä¸ªalertæ‰§è¡Œæ²¡è¿”å›undefinedã€alert æ˜¯å‡½æ•°ï¼Œalertï¼ˆ1ï¼‰ç›¸å½“è°ƒç”¨ï¼Œä½†æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥æ˜¯undefinedã€‘ï¼Œalertï¼ˆ2ï¼‰ ç›´æ¥çŸ­è·¯æ‰ã€‚</p>
<p>2.alert(1&amp;&amp;2)   &amp;&amp;ç¬¬ä¸€ä¸ªä¸ºtrueï¼Œæ‰ä¼šæ‰§è¡Œç¬¬äºŒä¸ªï¼Œå¦‚æœå…¨éƒ¨æ˜¯trueè¿”å›æœ€åä¸€ä¸ªå€¼ã€‚</p>
<p>3.<br><img src="https://pic3.zhimg.com/v2-3c568d3cbe2ee035f846917f7907903d_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-3c568d3cbe2ee035f846917f7907903d_hd.jpg" alt=""><br>å¤šæ¬¡bindåªä¿ç•™ç¬¬ä¸€æ¬¡çš„ã€‚</p>
<p>4.<br><img src="https://pic3.zhimg.com/v2-99af21478704f737a974a986e9fd41cc_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-99af21478704f737a974a986e9fd41cc_hd.jpg" alt=""><br>5.<br><img src="https://pic4.zhimg.com/v2-eef9d265365a8782e55efa78ad718b01_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-eef9d265365a8782e55efa78ad718b01_hd.jpg" alt=""><img src="https://pic4.zhimg.com/v2-d355491fab6f0917e3b6b141992dac5c_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-d355491fab6f0917e3b6b141992dac5c_hd.jpg" alt=""><img src="https://pic4.zhimg.com/v2-698cc4f2c86dccb91268ae9b597089dc_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-698cc4f2c86dccb91268ae9b597089dc_hd.jpg" alt=""><br>6.è‡ªå®šä¹‰äº‹ä»¶</p>
<pre><code>var myEvent = new Event(&apos;myEvent&apos;);
document.addEventListener(&apos;myEvent&apos;, log, false);
function log() {
  console.log(&apos;hello event&apos;);
}
document.dispatchEvent(myEvent);
</code></pre><p>7.æ•°ç»„å¾ªç¯ç§»åŠ¨<br><img src="https://pic4.zhimg.com/v2-c996087a776f590d84df53c1827872d2_b.jpg" alt=""><img src="https://pic4.zhimg.com/80/v2-c996087a776f590d84df53c1827872d2_hd.jpg" alt=""><br>éœ€æ±‚</p>
<p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªæ•°ç»„</p>
<pre><code>[1,2,3,4,5]
</code></pre><p>ç°åœ¨æƒ³è¦å·¦ç§»æˆ–è€…å³ç§»Nä½ï¼Œæ¯”å¦‚ç§»åŠ¨1ä½</p>
<pre><code>//å·¦ç§»1ä½
[2,3,4,5,1]

//å³ç§»1ä½
[5,1,2,3,4]
</code></pre><p>ç®—æ³•å®ç°</p>
<p>è¿™æ ·ä¸€é“é¢˜ç›®ï¼Œä½ å…ˆä¸è¦çœ‹æˆ‘ä¸‹é¢çš„ä»£ç ï¼Œè‡ªå·±æ€è€ƒä¸€ä¸‹å¦‚ä½•å®ç°å®ƒï¼Œä¸ç®¡æ˜¯å¤æ‚çš„è¿˜æ˜¯ç®€å•çš„æ–¹æ³•ã€‚<br>å¯ä»¥å…ˆå‘Šè¯‰ä½ æˆ‘ç”¨äº†2è¡Œä»£ç å®ç°å·¦ã€å³ç§»åŠ¨å…ƒç´ ã€‚</p>
<p>æ‹†åˆ†æ³•</p>
<p>å½“æˆ‘ä»¬æ²¡æœ‰å…·ä½“æ€è·¯çš„æ—¶å€™ï¼Œå°±å…ˆå‡è®¾æ•°ç»„ç§»åŠ¨1ä½çš„æƒ…å†µã€‚</p>
<pre><code>[1,2,3,4,5]
=&gt;
[null,1,2,3,4] and [5,null,null,null,null]
=&gt;
[5,1,2,3,4]
</code></pre><p>è¿™é‡Œå¯ä»¥çœ‹æˆ2ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªæ˜¯æ²¡æœ‰åˆ°è¾¾è¾¹ç•Œçš„å…ƒç´ ç§»åŠ¨[null,1,2,3,4]ï¼Œä¸€ä¸ªæ˜¯åˆ°è¾¾äº†è¾¹ç•Œçš„å…ƒç´ ç§»åŠ¨[5,null,null,null,null]ï¼Œå½“å…ƒç´ åˆ°è¾¾è¾¹ç•Œï¼Œå°±ä¼šå¾€æ•°ç»„çš„åˆå§‹ä½ç½®ç§»åŠ¨ï¼Œå½¢æˆäº†ä¸€ä¸ªå¾ªç¯çš„è¿‡ç¨‹ã€‚</p>
<p>å¾ˆæ˜æ˜¾ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™2ä¸ªç§»åŠ¨åçš„æ•°ç»„åˆå¹¶èµ·æ¥ï¼Œå°±æ˜¯éœ€æ±‚çš„ç»“æœã€‚</p>
<p>ç§»åŠ¨2ä½</p>
<p>åŒæ ·ç¬¦åˆ2ä¸ªç§»åŠ¨åçš„æ•°ç»„åˆå¹¶èµ·æ¥ä¸ºç»“æœçš„æƒ…å†µ</p>
<pre><code>[1,2,3,4,5]
=&gt;
[null,null,1,2,3] and [4,5,null,null,null]
=&gt;
[4,5,1,2,3]
</code></pre><p>åˆšå¥½ç§»åŠ¨æ•°ç»„é•¿åº¦</p>
<pre><code>[1,2,3,4,5]
=&gt;
[1,2,3,4,5] and [] //å¦‚æœæ²¡æœ‰ï¼Œå°±å‡è®¾ä¸ºç©ºæ•°ç»„
</code></pre><p>åˆå¹¶æ•°ç»„</p>
<p>å‡è®¾ç§»åŠ¨1ä½çš„æƒ…å†µ<br>ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†è§„å¾‹ï¼Œæ¥ä¸‹æ¥è¦åšçš„æ˜¯æ‰¾åˆ°2ä¸ªæ•°ç»„ï¼Œéœ€è¦ç”¨åˆ°sliceæˆªå–æ•°ç»„å…ƒç´ ã€‚<br>æˆªå–ç¬¬ä¸€ä¸ªæ•°ç»„</p>
<pre><code>arr.slice(0,-1)
// [1,2,3,4]
</code></pre><p>æˆªå–ç¬¬äºŒä¸ªæ•°ç»„</p>
<pre><code>arr.slice(-1)
// [5]
</code></pre><p>åˆå¹¶æ•°ç»„</p>
<pre><code>arr.slice(-1).concat(arr.slice(0,-1))
// [5,1,2,3,4]
</code></pre><p>è¿™æ ·ä½ å°±å®ç°äº†ç§»åŠ¨1ä½çš„æƒ…å†µï¼Œæ¥ç€ï¼Œä½ ç»§ç»­æ‹¿+5å’Œ-5èŒƒå›´å†…çš„æ•°å­—è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°éƒ½å¯ä»¥æ­£å¸¸ç§»åŠ¨ï¼Œå½“æ•°å­—å¤§äº5æˆ–è€…å°äº-5çš„æ—¶å€™ï¼Œä»£ç å°±æ— æ•ˆäº†ï¼Œå§‹ç»ˆè¾“å‡º[1,2,3,4,5]</p>
<pre><code>arr.slice(-6).concat(arr.slice(0,-6))
// [1,2,3,4,5]
</code></pre><p>æˆ‘ä»¬å†åŠ ä¸Šä¸€ä¸ªå°æŠ€å·§ï¼Œæ±‚ä½™æ•°ï¼Œå‡è®¾æ˜¯ç§»åŠ¨6ï¼Œé‚£ä¹ˆï¼Œå®é™…ä¸Šå’Œç§»åŠ¨1æ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å…¬å¼æ±‚ä½™æ•°</p>
<pre><code>n = n%arr.length
// n = 6%5 ä½™1
</code></pre><p>åŒç†ï¼Œå½“ç§»åŠ¨-6æ—¶</p>
<pre><code>n = n%arr.length
// n = -6%5 ä½™-1
</code></pre><p>æ¥ç€å¸¦å…¥å…¬å¼ï¼Œå‘ç°è¾“å‡ºå…¨éƒ¨éƒ½æ­£ç¡®äº†ï¼ï¼</p>
<p>æ€è·¯åˆ†æå®Œäº†ï¼Œåº”è¯¥å¾ˆæ¸…æ™°äº†å§ï¼Œæºç åœ¨ä¸‹é¢ã€</p>
<p>ç®—æ³•æºç </p>
<p>arrè¡¨ç¤ºåŸå§‹æ•°ç»„ï¼Œnè¡¨ç¤ºç§»åŠ¨çš„è·ç¦»ï¼Œå¯ä»¥æ˜¯æ­£æ•°ã€å¯ä»¥æ˜¯0ã€ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ã€æ­£æ•°è¡¨ç¤ºå³ç§»ï¼Œè´Ÿæ•°è¡¨ç¤ºå·¦ç§»ï¼Œ0è¡¨ç¤ºä¸ç§»åŠ¨ã€‚</p>
<pre><code>function moveElement(arr, n) {
  if(Math.abs(n)&gt;arr.length) n = n%arr.length
  return arr.slice(-n).concat(arr.slice(0,-n))
}

// moveElement(arr, 9)
// moveElement(arr, 0)
// moveElement(arr, -9)
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/03/Git-çš„-4-ä¸ªé˜¶æ®µçš„æ’¤é”€æ›´æ”¹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/03/Git-çš„-4-ä¸ªé˜¶æ®µçš„æ’¤é”€æ›´æ”¹/" itemprop="url">Git çš„ 4 ä¸ªé˜¶æ®µçš„æ’¤é”€æ›´æ”¹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-03T13:07:36+08:00">
                2017-11-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è™½ç„¶gitè¯ç”Ÿè·ä»Šå·²æœ‰12å¹´ä¹‹ä¹…ï¼Œç½‘ä¸Šå„ç§å…³äºgitçš„ä»‹ç»æ–‡ç« æ•°ä¸èƒœæ•°ï¼Œä½†æ˜¯ä¾ç„¶æœ‰å¾ˆå¤šäººï¼ˆåŒ…æ‹¬æˆ‘è‡ªå·±åœ¨å†…ï¼‰å¯¹äºå®ƒçš„åŠŸèƒ½ä¸èƒ½å®Œå…¨æŒæ¡ã€‚ä»¥ä¸‹çš„ä»‹ç»åªæ˜¯åŸºäºæˆ‘ä¸ªäººå¯¹äºgitçš„ç†è§£ï¼Œå¹¶ä¸”å¯èƒ½ç”Ÿç¼–ç¡¬é€ äº†ä¸€äº›ä¸å®Œå…¨ç¬¦åˆgitè¯´æ³•çš„è¯è¯­ã€‚ç›®çš„åªæ˜¯ä¸ºäº†è®©gité€šä¿—åŒ–ï¼Œä½¿åˆå­¦è€…ä¹Ÿèƒ½å¤§æ¦‚äº†è§£å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹gitã€‚åŒæ—¶ï¼Œä¸‹é¢æ‰€æœ‰è®¨è®ºï¼Œæˆ‘ä»¬éƒ½å‡è®¾åªä½¿ç”¨ä¸€ä¸ªåˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯ä¸»åˆ†æ”¯masterçš„æƒ…å†µï¼Œè™½ç„¶è¿™ç§ä½œæ³•å¹¶ä¸ç¬¦åˆgitè§„èŒƒï¼Œä½†æ˜¯ç°å®æƒ…å†µä¸­ç»å¤§éƒ¨åˆ†ç”¨æˆ·æ˜¯ç›´æ¥åœ¨masteråˆ†æ”¯ä¸Šè¿›è¡Œå·¥ä½œçš„ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬ä¸å»å¼•å…¥æ›´åŠ å¤æ‚çš„å„ç§åˆ†æ”¯çš„æƒ…å†µï¼Œä¹Ÿä¸æ¶‰åŠæ ‡ç­¾tagçš„æ“ä½œï¼Œåªè®²åœ¨æœ€ç®€å•çš„ä¸»åˆ†æ”¯ä¸Šå¦‚ä½•å›é€€ã€‚</p>
<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a><strong>åŸºæœ¬æ¦‚å¿µ</strong></h1><h2 id="3ä¸ªæ­¥éª¤"><a href="#3ä¸ªæ­¥éª¤" class="headerlink" title="3ä¸ªæ­¥éª¤"></a><strong>3ä¸ªæ­¥éª¤</strong></h2><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/9aPYe0E1fb1el0zsnhYXiadWS9DtUkHnwzsRUe3nJiclZIHpg0Mc2EYjcdSxicXjJSJDs9bOYlNEHbwJZzibibQxKpg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å·¥ä½œæµå°±æ˜¯3ä¸ªæ­¥éª¤ï¼Œå¯¹åº”ä¸Šå›¾ä¸­çš„3ä¸ªç®­å¤´çº¿ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  git add .</span><br><span class="line">  </span><br><span class="line">  git commit -m &quot;comment&quot;</span><br><span class="line">  </span><br><span class="line">  git push</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">git add .æŠŠæ‰€æœ‰æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒºï¼›</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">git commitæŠŠæ‰€æœ‰æ–‡ä»¶ä»æš‚å­˜åŒºæäº¤è¿›æœ¬åœ°ä»“åº“ï¼›</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">git pushæŠŠæ‰€æœ‰æ–‡ä»¶ä»æœ¬åœ°ä»“åº“æ¨é€è¿›è¿œç¨‹ä»“åº“ã€‚</span><br></pre></td></tr></table></figure></p>
<h2 id="4ä¸ªåŒº"><a href="#4ä¸ªåŒº" class="headerlink" title="4ä¸ªåŒº"></a><strong>4ä¸ªåŒº</strong></h2><p>gitä¹‹æ‰€ä»¥ä»¤äººè´¹è§£ï¼Œä¸»è¦æ˜¯å®ƒç›¸æ¯”äºsvnç­‰ç­‰ä¼ ç»Ÿçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¤šå¼•å…¥äº†ä¸€ä¸ªæš‚å­˜åŒº(Stage)çš„æ¦‚å¿µï¼Œå°±å› ä¸ºå¤šäº†è¿™ä¸€ä¸ªæ¦‚å¿µï¼Œè€Œä½¿å¾ˆå¤šäººç–‘æƒ‘ã€‚å…¶å®ï¼Œåœ¨åˆå­¦è€…æ¥è¯´ï¼Œæ¯ä¸ªåŒºå…·ä½“æ€ä¹ˆå·¥ä½œçš„ï¼Œæˆ‘ä»¬å®Œå…¨ä¸éœ€è¦å…³å¿ƒï¼Œè€Œåªè¦çŸ¥é“æœ‰è¿™ä¹ˆ4ä¸ªåŒºå°±å¤Ÿäº†ï¼š</p>
<ul>
<li><p>å·¥ä½œåŒº(Working Area)</p>
</li>
<li><p>æš‚å­˜åŒº(Stage)</p>
</li>
<li><p>æœ¬åœ°ä»“åº“(Local Repository)</p>
</li>
<li><p>è¿œç¨‹ä»“åº“(Remote Repository)</p>
</li>
</ul>
<h2 id="5ç§çŠ¶æ€"><a href="#5ç§çŠ¶æ€" class="headerlink" title="5ç§çŠ¶æ€"></a><strong>5ç§çŠ¶æ€</strong></h2><p>ä»¥ä¸Š4ä¸ªåŒºï¼Œè¿›å…¥æ¯ä¸€ä¸ªåŒºæˆåŠŸä¹‹åä¼šäº§ç”Ÿä¸€ä¸ªçŠ¶æ€ï¼Œå†åŠ ä¸Šæœ€åˆå§‹çš„ä¸€ä¸ªçŠ¶æ€ï¼Œä¸€å…±æ˜¯5ç§çŠ¶æ€ã€‚ä»¥ä¸‹æˆ‘ä»¬æŠŠè¿™5ç§çŠ¶æ€åˆ†åˆ«å‘½åä¸ºï¼š</p>
<ul>
<li><p>æœªä¿®æ”¹(Origin)</p>
</li>
<li><p>å·²ä¿®æ”¹(Modified)</p>
</li>
<li><p>å·²æš‚å­˜(Staged)</p>
</li>
<li><p>å·²æäº¤(Committed)</p>
</li>
<li><p>å·²æ¨é€(Pushed)</p>
</li>
</ul>
<h1 id="æ£€æŸ¥ä¿®æ”¹"><a href="#æ£€æŸ¥ä¿®æ”¹" class="headerlink" title="æ£€æŸ¥ä¿®æ”¹"></a><strong>æ£€æŸ¥ä¿®æ”¹</strong></h1><p>äº†è§£äº†åŸºæœ¬æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬æ¥è°ˆä¸€è°ˆçŠ¯é”™è¯¯ä¹‹åå¦‚ä½•æ’¤é”€çš„é—®é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦äº†è§£å¦‚ä½•æ£€æŸ¥è¿™3ä¸ªæ­¥éª¤å½“ä¸­æ¯ä¸€ä¸ªæ­¥éª¤ä¿®æ”¹äº†ä»€ä¹ˆï¼Œç„¶åæ‰å¥½åˆ¤æ–­æœ‰æ²¡æœ‰ä¿®æ”¹æˆåŠŸã€‚æ£€æŸ¥ä¿®æ”¹çš„äºŒçº§å‘½ä»¤éƒ½ç›¸åŒï¼Œéƒ½æ˜¯diffï¼Œåªæ˜¯å‚æ•°æœ‰æ‰€ä¸åŒã€‚</p>
<h2 id="å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜"><a href="#å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜" class="headerlink" title="å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜"></a><strong>å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯ç®€å•åœ°åœ¨æµè§ˆå™¨é‡Œä¿å­˜äº†ä¸€ä¸‹æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰åšgit add .ä¹‹å‰ï¼Œæˆ‘ä»¬å¦‚ä½•æ£€æŸ¥æœ‰å“ªäº›ä¿®æ”¹ã€‚æˆ‘ä»¬å…ˆéšä¾¿æ‹¿ä¸€ä¸ªæ–‡ä»¶æ¥åšä¸€ä¸‹å®éªŒï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/9aPYe0E1fb1el0zsnhYXiadWS9DtUkHnwDg9nsy9V0Ra5nMdBquNG1HpYFaOazjo6vl1LPHJpjMia8ibicSXu0Svyw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p>æˆ‘ä»¬åœ¨æ–‡ä»¶å¼€å¤´çš„ç¬¬2è¡Œèƒ¡ä¹±åŠ äº†4ä¸ªæ•°å­—1234ï¼Œå­˜ç›˜ï¼Œè¿™æ—¶æ–‡ä»¶è¿›å…¥äº†å·²ä¿®æ”¹çŠ¶æ€ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¿›å…¥æš‚å­˜åŒºï¼Œæˆ‘ä»¬è¿è¡Œgit diffï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/index.md b/index.md</span><br><span class="line"></span><br><span class="line">index 73ff1ba..1066758 100644</span><br><span class="line"></span><br><span class="line">--- a/index.md</span><br><span class="line"></span><br><span class="line">+++ b/index.md</span><br><span class="line"></span><br><span class="line">@@ -1,5 +1,5 @@</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">-layout: main</span><br><span class="line"></span><br><span class="line">+1234layout: main</span><br><span class="line"></span><br><span class="line">color: black</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<p>git diffçš„ç»“æœå‘Šè¯‰æˆ‘ä»¬å“ªäº›æ–‡ä»¶å·²ç»åšäº†å“ªäº›ä¿®æ”¹ã€‚</p>
<p><strong>å·²æš‚å­˜ï¼Œæœªæäº¤</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬æŠŠä¿®æ”¹æ”¾å…¥æš‚å­˜åŒºçœ‹ä¸€ä¸‹ã€‚å…ˆæ‰§è¡Œgit add .ï¼Œç„¶åæ‰§è¡Œgit diffï¼Œä½ ä¼šå‘ç°æ²¡æœ‰ä»»ä½•ç»“æœï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/9aPYe0E1fb1el0zsnhYXiadWS9DtUkHnwXwBzS1lToMWWjy9lEibicoiaibAAAaZa1HCp2j6v52OTN1cjRDia7VTVE6w/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p>è¿™è¯´æ˜git diffè¿™ä¸ªå‘½ä»¤åªæ£€æŸ¥æˆ‘ä»¬çš„å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¹‹é—´çš„å·®å¼‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³çœ‹åˆ°æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“ä¹‹é—´çš„å·®å¼‚ï¼Œå°±éœ€è¦åŠ ä¸€ä¸ªå‚æ•°git diff â€“cachedï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/index.md b/index.md</span><br><span class="line"></span><br><span class="line">index 73ff1ba..1066758 100644</span><br><span class="line"></span><br><span class="line">--- a/index.md</span><br><span class="line"></span><br><span class="line">+++ b/index.md</span><br><span class="line"></span><br><span class="line">@@ -1,5 +1,5 @@</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">-layout: main</span><br><span class="line"></span><br><span class="line">+1234layout: main</span><br><span class="line"></span><br><span class="line">color: black</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ—¶å€™æˆ‘ä»¬çœ‹åˆ°çš„å·®å¼‚æ˜¯æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<p><strong>å·²æäº¤ï¼Œæœªæ¨é€</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff master origin/master</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠä¿®æ”¹ä»æš‚å­˜åŒºæäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå†çœ‹ä¸€ä¸‹å·®å¼‚ã€‚å…ˆæ‰§è¡Œgit commitï¼Œç„¶åå†æ‰§è¡Œgit diff â€“cachedï¼Œæ²¡æœ‰å·®å¼‚ï¼Œæ‰§è¡Œgit diff master origin/masterï¼Œå¯ä»¥çœ‹åˆ°å·®å¼‚ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/9aPYe0E1fb1el0zsnhYXiadWS9DtUkHnwNSkuZnLBptQUSBddcyOZURahoMau6Rq0cebaYVniaudrh3kXToVj6WA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p>åœ¨è¿™é‡Œï¼Œmasterå°±æ˜¯ä½ çš„æœ¬åœ°ä»“åº“ï¼Œè€Œorigin/masterå°±æ˜¯ä½ çš„è¿œç¨‹ä»“åº“ï¼Œmasteræ˜¯ä¸»åˆ†æ”¯çš„æ„æ€ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½åœ¨ä¸»åˆ†æ”¯ä¸Šå·¥ä½œï¼Œæ‰€ä»¥è¿™é‡Œä¸¤è¾¹éƒ½æ˜¯masterï¼Œè€Œoriginå°±ä»£è¡¨è¿œç¨‹ã€‚</p>
<h1 id="æ’¤é”€ä¿®æ”¹"><a href="#æ’¤é”€ä¿®æ”¹" class="headerlink" title="æ’¤é”€ä¿®æ”¹"></a><strong>æ’¤é”€ä¿®æ”¹</strong></h1><p>äº†è§£æ¸…æ¥šå¦‚ä½•æ£€æŸ¥å„ç§ä¿®æ”¹ä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹å°è¯•å„ç§æ’¤é”€æ“ä½œã€‚</p>
<h2 id="å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜-1"><a href="#å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜-1" class="headerlink" title="å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜"></a><strong>å·²ä¿®æ”¹ï¼Œæœªæš‚å­˜</strong></h2><p>å¦‚æœæˆ‘ä»¬åªæ˜¯åœ¨ç¼–è¾‘å™¨é‡Œä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†è¿˜æ²¡æœ‰æ‰§è¡Œgit add .ï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„æ–‡ä»¶è¿˜åœ¨å·¥ä½œåŒºï¼Œå¹¶æ²¡æœ‰è¿›å…¥æš‚å­˜åŒºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> git checkout .</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">  git reset --hard</span><br></pre></td></tr></table></figure></p>
<p>æ¥è¿›è¡Œæ’¤é”€æ“ä½œã€‚</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/9aPYe0E1fb1el0zsnhYXiadWS9DtUkHnw3vn4WgIpIIyGGweDCXuZzlhpOwS62ibmJNjwviaXsCp9bwshpI9KAKBQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰§è¡Œå®Œgit checkout .ä¹‹åï¼Œä¿®æ”¹å·²è¢«æ’¤é”€ï¼Œgit diffæ²¡æœ‰ä»»ä½•å†…å®¹äº†ã€‚</p>
<blockquote>
<p>ä¸€å¯¹åä¹‰è¯ git add .çš„åä¹‰è¯æ˜¯git checkout .ã€‚åšå®Œä¿®æ”¹ä¹‹åï¼Œå¦‚æœä½ æƒ³å‘å‰èµ°ä¸€æ­¥ï¼Œè®©ä¿®æ”¹è¿›å…¥æš‚å­˜åŒºï¼Œå°±æ‰§è¡Œgit add .ï¼Œå¦‚æœä½ æƒ³å‘åé€€ä¸€æ­¥ï¼Œæ’¤é”€åˆšæ‰çš„ä¿®æ”¹ï¼Œå°±æ‰§è¡Œgit checkout .ã€‚</p>
</blockquote>
<h2 id="å·²æš‚å­˜ï¼Œæœªæäº¤"><a href="#å·²æš‚å­˜ï¼Œæœªæäº¤" class="headerlink" title="å·²æš‚å­˜ï¼Œæœªæäº¤"></a><strong>å·²æš‚å­˜ï¼Œæœªæäº¤</strong></h2><p>ä½ å·²ç»æ‰§è¡Œäº†git add .ï¼Œä½†è¿˜æ²¡æœ‰æ‰§è¡Œgit commit -m â€œcommentâ€ã€‚è¿™æ—¶å€™ä½ æ„è¯†åˆ°äº†é”™è¯¯ï¼Œæƒ³è¦æ’¤é”€ï¼Œä½ å¯ä»¥æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset</span><br><span class="line"></span><br><span class="line">git checkout .</span><br></pre></td></tr></table></figure></p>
<p>æˆ–è€…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></table></figure></p>
<p>git resetåªæ˜¯æŠŠä¿®æ”¹é€€å›åˆ°äº†git add .ä¹‹å‰çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶æœ¬èº«è¿˜å¤„äºå·²ä¿®æ”¹æœªæš‚å­˜çŠ¶æ€ï¼Œä½ å¦‚æœæƒ³é€€å›æœªä¿®æ”¹çŠ¶æ€ï¼Œè¿˜éœ€è¦æ‰§è¡Œgit checkout .ã€‚</p>
<p>æˆ–è®¸ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œä»¥ä¸Šä¸¤ä¸ªæ­¥éª¤éƒ½å¯ä»¥ç”¨åŒä¸€ä¸ªå‘½ä»¤git reset â€“hardæ¥å®Œæˆã€‚æ˜¯çš„ï¼Œå°±æ˜¯è¿™ä¸ªå¼ºå¤§çš„å‘½ä»¤ï¼Œå¯ä»¥ä¸€æ­¥åˆ°ä½åœ°æŠŠä½ çš„ä¿®æ”¹å®Œå…¨æ¢å¤åˆ°æœªä¿®æ”¹çš„çŠ¶æ€ã€‚</p>
<p><strong>å·²æäº¤ï¼Œæœªæ¨é€</strong></p>
<p>ä½ çš„æ‰‹å¤ªå¿«ï¼Œä½ æ—¢æ‰§è¡Œäº†git add .ï¼Œåˆæ‰§è¡Œäº†git commitï¼Œè¿™æ—¶å€™ä½ çš„ä»£ç å·²ç»è¿›å…¥äº†ä½ çš„æœ¬åœ°ä»“åº“ï¼Œç„¶è€Œä½ åæ‚”äº†ï¼Œæ€ä¹ˆåŠï¼Ÿä¸è¦ç€æ€¥ï¼Œè¿˜æœ‰åŠæ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard origin/master</span><br></pre></td></tr></table></figure></p>
<p>è¿˜æ˜¯è¿™ä¸ªgit reset â€“hardå‘½ä»¤ï¼Œåªä¸è¿‡è¿™æ¬¡å¤šäº†ä¸€ä¸ªå‚æ•°origin/masterï¼Œæ­£å¦‚æˆ‘ä»¬ä¸Šé¢è®²è¿‡çš„ï¼Œorigin/masterä»£è¡¨è¿œç¨‹ä»“åº“ï¼Œæ—¢ç„¶ä½ å·²ç»æ±¡æŸ“äº†ä½ çš„æœ¬åœ°ä»“åº“ï¼Œé‚£ä¹ˆå°±ä»è¿œç¨‹ä»“åº“æŠŠä»£ç å–å›æ¥å§ã€‚</p>
<p><strong>å·²æ¨é€</strong></p>
<p>å¾ˆä¸å¹¸ï¼Œä½ çš„æ‰‹å®åœ¨æ˜¯å¤ªå¿«äº†ï¼Œä½ æ—¢git addäº†ï¼Œåˆgit commitäº†ï¼Œå¹¶ä¸”è¿˜git pushäº†ï¼Œè¿™æ—¶ä½ çš„ä»£ç å·²ç»è¿›å…¥è¿œç¨‹ä»“åº“ã€‚å¦‚æœä½ æƒ³æ¢å¤çš„è¯ï¼Œè¿˜å¥½ï¼Œç”±äºä½ çš„æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“æ˜¯ç­‰ä»·çš„ï¼Œä½ åªéœ€è¦å…ˆæ¢å¤æœ¬åœ°ä»“åº“ï¼Œå†å¼ºåˆ¶pushåˆ°è¿œç¨‹ä»“åº“å°±å¥½äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br><span class="line"></span><br><span class="line">git push -f</span><br></pre></td></tr></table></figure></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/9aPYe0E1fb1el0zsnhYXiadWS9DtUkHnwCtsdla2FrJ4nCjP0tBssNeB7ZqBkQON4Jcxb2ghrAUEibNa2icoiaB3cg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h1><p>ä»¥ä¸Š4ç§çŠ¶æ€çš„æ’¤é”€æˆ‘ä»¬éƒ½ç”¨åˆ°äº†åŒä¸€ä¸ªå‘½ä»¤git reset â€“hardï¼Œå‰2ç§çŠ¶æ€çš„ç”¨æ³•ç”šè‡³å®Œå…¨ä¸€æ ·ï¼Œæ‰€ä»¥åªè¦æŒæ¡äº†git reset â€“hardè¿™ä¸ªå‘½ä»¤çš„ç”¨æ³•ï¼Œä»æ­¤ä½ å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæäº¤é”™è¯¯äº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/29/ä»Vue-jsæºç çœ‹nextTickæœºåˆ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/29/ä»Vue-jsæºç çœ‹nextTickæœºåˆ¶/" itemprop="url">ä»Vue.jsæºç çœ‹nextTickæœºåˆ¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-29T22:30:13+08:00">
                2017-10-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://link.zhihu.com/?target=https%3A//chuckliu.me/%23%21/posts/58bd08a2b5187d2fb51c04f9" target="_blank" rel="noopener">Vueæºç è¯¦è§£ä¹‹nextTickï¼šMutationObserveråªæ˜¯æµ®äº‘ï¼Œmicrotaskæ‰æ˜¯æ ¸å¿ƒï¼</a></p>
<h2 id="å¯èƒ½ä¼šæœ‰ç†è§£å­˜åœ¨åå·®çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ç¥æ–§æ­£ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚"><a href="#å¯èƒ½ä¼šæœ‰ç†è§£å­˜åœ¨åå·®çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ç¥æ–§æ­£ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚" class="headerlink" title="å¯èƒ½ä¼šæœ‰ç†è§£å­˜åœ¨åå·®çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ç¥æ–§æ­£ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚"></a>å¯èƒ½ä¼šæœ‰ç†è§£å­˜åœ¨åå·®çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ç¥æ–§æ­£ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚</h2><h2 id="æ“ä½œDOM"><a href="#æ“ä½œDOM" class="headerlink" title="æ“ä½œDOM"></a>æ“ä½œDOM</h2><p>åœ¨ä½¿ç”¨vue.jsçš„æ—¶å€™ï¼Œæœ‰æ—¶å€™å› ä¸ºä¸€äº›ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œä¸å¾—ä¸å»æ“ä½œDOMï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;div ref=&quot;test&quot;&gt;{{test}}&lt;/div&gt;
    &lt;button @click=&quot;handleClick&quot;&gt;tet&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
export default {
    data () {
        return {
            test: &apos;begin&apos;
        };
    },
    methods () {
        handleClick () {
            this.test = &apos;end&apos;;
            console.log(this.$refs.test.innerText);//æ‰“å°â€œbeginâ€
        }
    }
}
</code></pre><p>æ‰“å°çš„ç»“æœæ˜¯beginï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬æ˜æ˜å·²ç»å°†testè®¾ç½®æˆäº†â€œendâ€ï¼Œè·å–çœŸå®DOMèŠ‚ç‚¹çš„innerTextå´æ²¡æœ‰å¾—åˆ°æˆ‘ä»¬é¢„æœŸä¸­çš„â€œendâ€ï¼Œè€Œæ˜¯å¾—åˆ°ä¹‹å‰çš„å€¼â€œbeginâ€å‘¢ï¼Ÿ</p>
<h2 id="Watcheré˜Ÿåˆ—"><a href="#Watcheré˜Ÿåˆ—" class="headerlink" title="Watcheré˜Ÿåˆ—"></a>Watcheré˜Ÿåˆ—</h2><p>å¸¦ç€ç–‘é—®ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†Vue.jsæºç çš„Watchå®ç°ã€‚å½“æŸä¸ªå“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå®ƒçš„setterå‡½æ•°ä¼šé€šçŸ¥é—­åŒ…ä¸­çš„Depï¼ŒDepåˆ™ä¼šè°ƒç”¨å®ƒç®¡ç†çš„æ‰€æœ‰Watchå¯¹è±¡ã€‚è§¦å‘Watchå¯¹è±¡çš„updateå®ç°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹updateçš„å®ç°ã€‚</p>
<pre><code>update () {
    /* istanbul ignore else */
    if (this.lazy) {
        this.dirty = true
    } else if (this.sync) {
        /*åŒæ­¥åˆ™æ‰§è¡Œrunç›´æ¥æ¸²æŸ“è§†å›¾*/
        this.run()
    } else {
        /*å¼‚æ­¥æ¨é€åˆ°è§‚å¯Ÿè€…é˜Ÿåˆ—ä¸­ï¼Œä¸‹ä¸€ä¸ªtickæ—¶è°ƒç”¨ã€‚*/
        queueWatcher(this)
    }
}
</code></pre><p>æˆ‘ä»¬å‘ç°Vue.jsé»˜è®¤æ˜¯ä½¿ç”¨<a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fcn.vuejs.org%252Fv2%252Fguide%252Freactivity.html%2523%25E5%25BC%2582%25E6%25AD%25A5%25E6%259B%25B4%25E6%2596%25B0%25E9%2598%259F%25E5%2588%2597" target="_blank" rel="noopener">å¼‚æ­¥æ‰§è¡ŒDOMæ›´æ–°</a>ã€‚<br>å½“å¼‚æ­¥æ‰§è¡Œupdateçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨queueWatcherå‡½æ•°ã€‚</p>
<pre><code>/*å°†ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡pushè¿›è§‚å¯Ÿè€…é˜Ÿåˆ—ï¼Œåœ¨é˜Ÿåˆ—ä¸­å·²ç»å­˜åœ¨ç›¸åŒçš„idåˆ™è¯¥è§‚å¯Ÿè€…å¯¹è±¡å°†è¢«è·³è¿‡ï¼Œé™¤éå®ƒæ˜¯åœ¨é˜Ÿåˆ—è¢«åˆ·æ–°æ—¶æ¨é€*/
export function queueWatcher (watcher: Watcher) {
  /*è·å–watcherçš„id*/
  const id = watcher.id
  /*æ£€éªŒidæ˜¯å¦å­˜åœ¨ï¼Œå·²ç»å­˜åœ¨åˆ™ç›´æ¥è·³è¿‡ï¼Œä¸å­˜åœ¨åˆ™æ ‡è®°å“ˆå¸Œè¡¨hasï¼Œç”¨äºä¸‹æ¬¡æ£€éªŒ*/
  if (has[id] == null) {
    has[id] = true
    if (!flushing) {
      /*å¦‚æœæ²¡æœ‰flushæ‰ï¼Œç›´æ¥pushåˆ°é˜Ÿåˆ—ä¸­å³å¯*/
      queue.push(watcher)
    } else {
      // if already flushing, splice the watcher based on its id
      // if already past its id, it will be run next immediately.
      let i = queue.length - 1
      while (i &gt;= 0 &amp;&amp; queue[i].id &gt; watcher.id) {
        i--
      }
      queue.splice(Math.max(i, index) + 1, 0, watcher)
    }
    // queue the flush
    if (!waiting) {
      waiting = true
      nextTick(flushSchedulerQueue)
    }
  }
}
</code></pre><p>æŸ¥çœ‹queueWatcherçš„æºç æˆ‘ä»¬å‘ç°ï¼ŒWatchå¯¹è±¡å¹¶ä¸æ˜¯ç«‹å³æ›´æ–°è§†å›¾ï¼Œè€Œæ˜¯è¢«pushè¿›äº†ä¸€ä¸ªé˜Ÿåˆ—queueï¼Œæ­¤æ—¶çŠ¶æ€å¤„äºwaitingçš„çŠ¶æ€ï¼Œè¿™æ—¶å€™ä¼šç»§ç»­ä¼šæœ‰Watchå¯¹è±¡è¢«pushè¿›è¿™ä¸ªé˜Ÿåˆ—queueï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªtickæ—¶ï¼Œè¿™äº›Watchå¯¹è±¡æ‰ä¼šè¢«éå†å–å‡ºï¼Œæ›´æ–°è§†å›¾ã€‚åŒæ—¶ï¼Œidé‡å¤çš„Watcherä¸ä¼šè¢«å¤šæ¬¡åŠ å…¥åˆ°queueä¸­å»ï¼Œå› ä¸ºåœ¨æœ€ç»ˆæ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒæ•°æ®çš„æœ€ç»ˆç»“æœã€‚</p>
<p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ä¸‹ä¸€ä¸ªtickï¼Ÿ</p>
<h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><p>vue.jsæä¾›äº†ä¸€ä¸ª<a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fcn.vuejs.org%252Fv2%252Fapi%252F%2523Vue-nextTick" target="_blank" rel="noopener">nextTick</a>å‡½æ•°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸Šé¢è°ƒç”¨çš„nextTickã€‚</p>
<p>nextTickçš„å®ç°æ¯”è¾ƒç®€å•ï¼Œæ‰§è¡Œçš„ç›®çš„æ˜¯åœ¨microtaskæˆ–è€…taskä¸­æ¨å…¥ä¸€ä¸ªfuntionï¼Œåœ¨å½“å‰æ ˆæ‰§è¡Œå®Œæ¯•ï¼ˆä¹Ÿè¡Œè¿˜ä¼šæœ‰ä¸€äº›æ’åœ¨å‰é¢çš„éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼‰ä»¥åæ‰§è¡ŒnextTickä¼ å…¥çš„funtionï¼Œçœ‹ä¸€ä¸‹æºç ï¼š</p>
<pre><code>/**
 * Defer a task to execute it asynchronously.
 */
 /*
    å»¶è¿Ÿä¸€ä¸ªä»»åŠ¡ä½¿å…¶å¼‚æ­¥æ‰§è¡Œï¼Œåœ¨ä¸‹ä¸€ä¸ªtickæ—¶æ‰§è¡Œï¼Œä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªfunction
    è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åœ¨taskæˆ–è€…microtaskä¸­æ¨å…¥ä¸€ä¸ªtimerFuncï¼Œ
    åœ¨å½“å‰è°ƒç”¨æ ˆæ‰§è¡Œå®Œä»¥åä»¥æ­¤æ‰§è¡Œç›´åˆ°æ‰§è¡Œåˆ°timerFunc
    ç›®çš„æ˜¯å»¶è¿Ÿåˆ°å½“å‰è°ƒç”¨æ ˆæ‰§è¡Œå®Œä»¥åæ‰§è¡Œ
*/
export const nextTick = (function () {
  /*å­˜æ”¾å¼‚æ­¥æ‰§è¡Œçš„å›è°ƒ*/
  const callbacks = []
  /*ä¸€ä¸ªæ ‡è®°ä½ï¼Œå¦‚æœå·²ç»æœ‰timerFuncè¢«æ¨é€åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­å»åˆ™ä¸éœ€è¦é‡å¤æ¨é€*/
  let pending = false
  /*ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘å‡½æ•°å°†è¢«æ¨é€åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰åˆ°ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ—¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„timerFuncè¢«è°ƒç”¨*/
  let timerFunc

  /*ä¸‹ä¸€ä¸ªtickæ—¶çš„å›è°ƒ*/
  function nextTickHandler () {
    /*ä¸€ä¸ªæ ‡è®°ä½ï¼Œæ ‡è®°ç­‰å¾…çŠ¶æ€ï¼ˆå³å‡½æ•°å·²ç»è¢«æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—æˆ–è€…ä¸»çº¿ç¨‹ï¼Œå·²ç»åœ¨ç­‰å¾…å½“å‰æ ˆæ‰§è¡Œå®Œæ¯•å»æ‰§è¡Œï¼‰ï¼Œè¿™æ ·å°±ä¸éœ€è¦åœ¨pushå¤šä¸ªå›è°ƒåˆ°callbacksæ—¶å°†timerFuncå¤šæ¬¡æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—æˆ–è€…ä¸»çº¿ç¨‹*/
    pending = false
    /*æ‰§è¡Œæ‰€æœ‰callback*/
    const copies = callbacks.slice(0)
    callbacks.length = 0
    for (let i = 0; i &lt; copies.length; i++) {
      copies[i]()
    }
  }

  // the nextTick behavior leverages the microtask queue, which can be accessed
  // via either native Promise.then or MutationObserver.
  // MutationObserver has wider support, however it is seriously bugged in
  // UIWebView in iOS &gt;= 9.3.3 when triggered in touch event handlers. It
  // completely stops working after triggering a few times... so, if native
  // Promise is available, we will use it:
  /* istanbul ignore if */

  /*
    è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä¸€å…±æœ‰Promiseã€MutationObserverä»¥åŠsetTimeoutä¸‰ç§å°è¯•å¾—åˆ°timerFuncçš„æ–¹æ³•
    ä¼˜å…ˆä½¿ç”¨Promiseï¼Œåœ¨Promiseä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä½¿ç”¨MutationObserverï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šåœ¨microtaskä¸­æ‰§è¡Œï¼Œä¼šæ¯”setTimeoutæ›´æ—©æ‰§è¡Œï¼Œæ‰€ä»¥ä¼˜å…ˆä½¿ç”¨ã€‚
    å¦‚æœä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½ä¸æ”¯æŒçš„ç¯å¢ƒåˆ™ä¼šä½¿ç”¨setTimeoutï¼Œåœ¨taskå°¾éƒ¨æ¨å…¥è¿™ä¸ªå‡½æ•°ï¼Œç­‰å¾…è°ƒç”¨æ‰§è¡Œã€‚
    å‚è€ƒï¼šhttps://www.zhihu.com/question/55364497
  */
  if (typeof Promise !== &apos;undefined&apos; &amp;&amp; isNative(Promise)) {
    /*ä½¿ç”¨Promise*/
    var p = Promise.resolve()
    var logError = err =&gt; { console.error(err) }
    timerFunc = () =&gt; {
      p.then(nextTickHandler).catch(logError)
      // in problematic UIWebViews, Promise.then doesn&apos;t completely break, but
      // it can get stuck in a weird state where callbacks are pushed into the
      // microtask queue but the queue isn&apos;t being flushed, until the browser
      // needs to do some other work, e.g. handle a timer. Therefore we can
      // &quot;force&quot; the microtask queue to be flushed by adding an empty timer.
      if (isIOS) setTimeout(noop)
    }
  } else if (typeof MutationObserver !== &apos;undefined&apos; &amp;&amp; (
    isNative(MutationObserver) ||
    // PhantomJS and iOS 7.x
    MutationObserver.toString() === &apos;[object MutationObserverConstructor]&apos;
  )) {
    // use MutationObserver where native Promise is not available,
    // e.g. PhantomJS IE11, iOS7, Android 4.4
    /*æ–°å»ºä¸€ä¸ªtextNodeçš„DOMå¯¹è±¡ï¼Œç”¨MutationObserverç»‘å®šè¯¥DOMå¹¶æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œåœ¨DOMå˜åŒ–çš„æ—¶å€™åˆ™ä¼šè§¦å‘å›è°ƒ,è¯¥å›è°ƒä¼šè¿›å…¥ä¸»çº¿ç¨‹ï¼ˆæ¯”ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆæ‰§è¡Œï¼‰ï¼Œå³textNode.data = String(counter)æ—¶ä¾¿ä¼šè§¦å‘å›è°ƒ*/
    var counter = 1
    var observer = new MutationObserver(nextTickHandler)
    var textNode = document.createTextNode(String(counter))
    observer.observe(textNode, {
      characterData: true
    })
    timerFunc = () =&gt; {
      counter = (counter + 1) % 2
      textNode.data = String(counter)
    }
  } else {
    // fallback to setTimeout
    /* istanbul ignore next */
    /*ä½¿ç”¨setTimeoutå°†å›è°ƒæ¨å…¥ä»»åŠ¡é˜Ÿåˆ—å°¾éƒ¨*/
    timerFunc = () =&gt; {
      setTimeout(nextTickHandler, 0)
    }
  }

  /*
    æ¨é€åˆ°é˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªtickæ—¶æ‰§è¡Œ
    cb å›è°ƒå‡½æ•°
    ctx ä¸Šä¸‹æ–‡
  */
  return function queueNextTick (cb?: Function, ctx?: Object) {
    let _resolve
    /*cbå­˜åˆ°callbacksä¸­*/
    callbacks.push(() =&gt; {
      if (cb) {
        try {
          cb.call(ctx)
        } catch (e) {
          handleError(e, ctx, &apos;nextTick&apos;)
        }
      } else if (_resolve) {
        _resolve(ctx)
      }
    })
    if (!pending) {
      pending = true
      timerFunc()
    }
    if (!cb &amp;&amp; typeof Promise !== &apos;undefined&apos;) {
      return new Promise((resolve, reject) =&gt; {
        _resolve = resolve
      })
    }
  }
})()
</code></pre><p>å®ƒæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°,è¿”å›ä¸€ä¸ªqueueNextTickæ¥å£ã€‚</p>
<p>ä¼ å…¥çš„cbä¼šè¢«pushè¿›callbacksä¸­å­˜æ”¾èµ·æ¥ï¼Œç„¶åæ‰§è¡ŒtimerFuncï¼ˆpendingæ˜¯ä¸€ä¸ªçŠ¶æ€æ ‡è®°ï¼Œä¿è¯timerFuncåœ¨ä¸‹ä¸€ä¸ªtickä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚</p>
<p>timerFuncæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>çœ‹äº†æºç å‘ç°timerFuncä¼šæ£€æµ‹å½“å‰ç¯å¢ƒè€Œä¸åŒå®ç°ï¼Œå…¶å®å°±æ˜¯æŒ‰ç…§Promiseï¼ŒMutationObserverï¼ŒsetTimeoutä¼˜å…ˆçº§ï¼Œå“ªä¸ªå­˜åœ¨ä½¿ç”¨å“ªä¸ªï¼Œæœ€ä¸æµçš„ç¯å¢ƒä¸‹ä½¿ç”¨setTimeoutã€‚</p>
<p>ä¸¤è€…çš„å…·ä½“å®ç°</p>
<ul>
<li>macrotasks: setTimeout ï¼ŒsetIntervalï¼Œ setImmediateï¼ŒrequestAnimationFrame, I/O ï¼ŒUIæ¸²æŸ“</li>
<li>microtasks: Promiseï¼Œ process.nextTickï¼Œ Object.observeï¼Œ MutationObserver</li>
</ul>
<p>å†ç®€å•ç‚¹å¯ä»¥æ€»ç»“ä¸ºï¼š<br><img src="https://pic1.zhimg.com/v2-e92a4f5f686d115832b63b9b9e3ac2cd_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-e92a4f5f686d115832b63b9b9e3ac2cd_hd.jpg" alt=""></p>
<ol>
<li>åœ¨ macrotask é˜Ÿåˆ—ä¸­æ‰§è¡Œæœ€æ—©çš„é‚£ä¸ª task ï¼Œç„¶åç§»å‡º</li>
<li>å†æ‰§è¡Œ microtask é˜Ÿåˆ—ä¸­æ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡ï¼Œç„¶åç§»å‡º</li>
<li><p>ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ª macrotask ä¸­çš„ä»»åŠ¡ (å†è·³åˆ°ç¬¬2æ­¥)</p>
<p>  è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä¸€å…±æœ‰Promiseã€MutationObserverä»¥åŠsetTimeoutä¸‰ç§å°è¯•å¾—åˆ°timerFuncçš„æ–¹æ³•ã€‚</p>
<pre><code>ä¼˜å…ˆä½¿ç”¨Promiseï¼Œåœ¨Promiseä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä½¿ç”¨MutationObserverï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„å›è°ƒå‡½æ•°éƒ½ä¼šåœ¨microtaskä¸­æ‰§è¡Œï¼Œå®ƒä»¬ä¼šæ¯”setTimeoutæ›´æ—©æ‰§è¡Œï¼Œæ‰€ä»¥ä¼˜å…ˆä½¿ç”¨ã€‚
å¦‚æœä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½ä¸æ”¯æŒçš„ç¯å¢ƒåˆ™ä¼šä½¿ç”¨setTimeoutï¼Œåœ¨taskå°¾éƒ¨æ¨å…¥è¿™ä¸ªå‡½æ•°ï¼Œç­‰å¾…è°ƒç”¨æ‰§è¡Œã€‚
</code></pre></li>
</ol>
<p>ä¸ºä»€ä¹ˆè¦ä¼˜å…ˆä½¿ç”¨microtaskï¼Ÿæˆ‘åœ¨é¡¾è½¶çµåœ¨çŸ¥ä¹çš„å›ç­”ä¸­å­¦ä¹ åˆ°ï¼š</p>
<blockquote>
<p>  JS çš„ event loop æ‰§è¡Œæ—¶ä¼šåŒºåˆ† task å’Œ microtaskï¼Œå¼•æ“åœ¨æ¯ä¸ª task æ‰§è¡Œå®Œæ¯•ï¼Œä»é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ª task æ¥æ‰§è¡Œä¹‹å‰ï¼Œä¼šå…ˆæ‰§è¡Œå®Œæ‰€æœ‰ microtask é˜Ÿåˆ—ä¸­çš„ microtaskã€‚<br>setTimeout å›è°ƒä¼šè¢«åˆ†é…åˆ°ä¸€ä¸ªæ–°çš„ task ä¸­æ‰§è¡Œï¼Œè€Œ Promise çš„ resolverã€   MutationObserver çš„å›è°ƒéƒ½ä¼šè¢«å®‰æ’åˆ°ä¸€ä¸ªæ–°çš„ microtask ä¸­æ‰§è¡Œï¼Œä¼šæ¯” setTimeout äº§ç”Ÿçš„ task å…ˆæ‰§è¡Œã€‚<br>       è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ microtaskï¼Œä¼˜å…ˆä½¿ç”¨ Promiseï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒï¼Œå†å°è¯• MutationObserverã€‚<br>       å®åœ¨ä¸è¡Œï¼Œåªèƒ½ç”¨ setTimeout åˆ›å»º task äº†ã€‚<br>       ä¸ºå•¥è¦ç”¨ microtaskï¼Ÿ<br>       æ ¹æ® HTML Standardï¼Œåœ¨æ¯ä¸ª task è¿è¡Œå®Œä»¥åï¼ŒUI éƒ½ä¼šé‡æ¸²æŸ“ï¼Œé‚£ä¹ˆåœ¨ microtask ä¸­å°±å®Œæˆæ•°æ®æ›´æ–°ï¼Œå½“å‰ task ç»“æŸå°±å¯ä»¥å¾—åˆ°æœ€æ–°çš„ UI äº†ã€‚<br>       åä¹‹å¦‚æœæ–°å»ºä¸€ä¸ª task æ¥åšæ•°æ®æ›´æ–°ï¼Œé‚£ä¹ˆæ¸²æŸ“å°±ä¼šè¿›è¡Œä¸¤æ¬¡ã€‚</p>
</blockquote>
<p>é¦–å…ˆæ˜¯Promiseï¼Œ(Promise.resolve()).then()å¯ä»¥åœ¨microtaskä¸­åŠ å…¥å®ƒçš„å›è°ƒï¼Œ</p>
<p>MutationObserveræ–°å»ºä¸€ä¸ªtextNodeçš„DOMå¯¹è±¡ï¼Œç”¨MutationObserverç»‘å®šè¯¥DOMå¹¶æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œåœ¨DOMå˜åŒ–çš„æ—¶å€™åˆ™ä¼šè§¦å‘å›è°ƒ,è¯¥å›è°ƒä¼šè¿›å…¥microtaskï¼Œå³textNode.data = String(counter)æ—¶ä¾¿ä¼šåŠ å…¥è¯¥å›è°ƒã€‚</p>
<p>è‡³äº MutationObserver å¦‚ä½•æ¨¡æ‹Ÿ nextTick è¿™ç‚¹ï¼Œç›´æ¥çœ‹æºç ï¼Œå…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ª TextNode å¹¶ç›‘å¬å†…å®¹å˜åŒ–ï¼Œç„¶åè¦ nextTick çš„æ—¶å€™å»æ”¹ä¸€ä¸‹è¿™ä¸ªèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼š    var counter = 1</p>
<pre><code>var observer = new MutationObserver(nextTickHandler)
    var textNode = document.createTextNode(String(counter))
    observer.observe(textNode, {
      characterData: true
    })
    timerFunc = () =&gt; {
      counter = (counter + 1) % 2
      textNode.data = String(counter)
    }
</code></pre><p>   setTimeoutæ˜¯æœ€åçš„ä¸€ç§å¤‡é€‰æ–¹æ¡ˆï¼Œå¹¶ä¸”é»˜è®¤æœ‰4mså»¶æ—¶ï¼ŒsetTimeoutå»¶æ—¶0ä¸ä¼šè€è€å®å®ç«‹å³æ‰§è¡Œï¼š</p>
<pre><code>setTimeout(function(){
    console.log(&quot;æˆ‘ä¸æ˜¯ç«‹å³æ‰§è¡Œçš„,ä¸€èˆ¬æˆ‘ä¼šå»¶æ—¶4ms,å“ˆå“ˆ&quot;);
},0);
</code></pre><p>å®ƒä¼šå°†å›è°ƒå‡½æ•°åŠ å…¥taskä¸­ï¼Œç­‰åˆ°æ‰§è¡Œã€‚<br><img src="https://pic2.zhimg.com/v2-59cf9f88d7daac690d39edfb9fffc8b8_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-59cf9f88d7daac690d39edfb9fffc8b8_hd.jpg" alt=""></p>
<pre><code>setTimeout(function(){console.log(4)},0);
new Promise(function(resolve){
    console.log(1)
    for( var i=0 ; i&lt;10000 ; i++ ){
        i==9999 &amp;&amp; resolve()
    }
    console.log(2)
}).then(function(){
    console.log(5)
});
console.log(3);
ç»“æœæ˜¯ï¼š
1,2,3,5,4
</code></pre><p>å†çœ‹è¿™ä¸ªï¼Œä¸¤ä¸ªè‡ªæ‰§è¡ŒåŒæ—¶æ‰§è¡Œï¼š</p>
<pre><code>&lt;script&gt;
(function test() {
  setTimeout(function () {
    console.log(4)
  }, 0);
  new Promise(function executor (resolve) {
    console.log(1);
    for(var i = 0; i &lt; 10000; i++) {
      i == 9999 &amp;&amp; resolve();
    }
    console.log(2);
  }).then(function() {
    console.log(5);
  });
  console.log(3);
})()

(function test2() {
  setTimeout(function () {
    console.log(42)
  }, 0);
  new Promise(function executor (resolve) {
    console.log(12);
    for(var i = 0; i &lt; 10000; i++) {
      i == 9999 &amp;&amp; resolve();
    }
    console.log(22);
  }).then(function() {
    console.log(52);
  });
  console.log(32);
})()
&lt;/script&gt;
</code></pre><p><img src="https://pic2.zhimg.com/v2-cd18c572eb05069895ede7e34388bb8d_b.jpg" alt=""><img src="https://pic2.zhimg.com/80/v2-cd18c572eb05069895ede7e34388bb8d_hd.jpg" alt=""><img src="https://pic3.zhimg.com/v2-afcb6fa6fb862818359f757107b769ab_b.jpg" alt=""><img src="https://pic3.zhimg.com/80/v2-afcb6fa6fb862818359f757107b769ab_hd.jpg" alt=""><br>æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸€ä¸ª main thread ã€<a href="https://link.zhihu.com/?target=http%3A//www.baidu.com/link%3Furl%3DCV-egCVH8yK1w-ilUqGsztryG8s2mbuhAliIC_L1n_-BSZ_KJ16tAfaNkmbcRtU8" target="_blank" rel="noopener">ä¸»çº¿ç¨‹</a>ã€‘ ï¼Œä½†å¹¶ä¸æ„å‘³ç€å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªè‡ªæ‰§è¡Œåå†æ‰§è¡Œç¬¬äºŒä¸ªï¼Œå› ä¸ºä¸¤ä¸ªè‡ªæ‰§è¡Œä¸­çš„ <code>setTimeout</code> è¿›å…¥çš„æ˜¯åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ç­‰å¾…ï¼Œå› æ­¤ä»–ä¿©åœ¨æœ€ååˆ†åˆ«è¾“å‡ºäº†äº† 4 å’Œ 42ã€‚</p>
<pre><code>å½“ä¸€ä¸ªç¨‹åºæœ‰ï¼šsetTimeoutï¼Œ setInterval ï¼ŒsetImmediateï¼Œ I/Oï¼Œ UIæ¸²æŸ“ï¼ŒPromise ï¼Œprocess.nextTickï¼Œ Object.observeï¼Œ MutationObserverçš„æ—¶å€™ï¼š
</code></pre><p>   1.å…ˆæ‰§è¡Œ macrotasksï¼šI/O -ã€‹ UIæ¸²æŸ“</p>
<p>   2.å†æ‰§è¡Œ microtasks ï¼šprocess.nextTick  -ã€‹ Promise  -ã€‹MutationObserver -&gt;Object.observe</p>
<p>   3.å†æŠŠsetTimeout setInterval setImmediate å¡å…¥ä¸€ä¸ªæ–°çš„macrotasksï¼Œä¾æ¬¡ï¼š</p>
<p>setTimeout ï¼ŒsetInterval â€“ã€‹setImmediate</p>
<pre><code>  ç»¼ä¸Šï¼ŒnextTickçš„ç›®çš„å°±æ˜¯äº§ç”Ÿä¸€ä¸ªå›è°ƒå‡½æ•°åŠ å…¥taskæˆ–è€…microtaskä¸­ï¼Œå½“å‰æ ˆæ‰§è¡Œå®Œä»¥åï¼ˆå¯èƒ½ä¸­é—´è¿˜æœ‰åˆ«çš„æ’åœ¨å‰é¢çš„å‡½æ•°ï¼‰è°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼Œèµ·åˆ°äº†å¼‚æ­¥è§¦å‘ï¼ˆå³ä¸‹ä¸€ä¸ªtickæ—¶è§¦å‘ï¼‰çš„ç›®çš„ã€‚

setImmediate(function(){
    console.log(1);
},0);
setTimeout(function(){
    console.log(2);
},0);
new Promise(function(resolve){
    console.log(3);
    resolve();
    console.log(4);
}).then(function(){
    console.log(5);
});
console.log(6);
process.nextTick(function(){
    console.log(7);
});
console.log(8);
ç»“æœæ˜¯ï¼š3 4 6 8 7 5 2 1
</code></pre><h2 id="flushSchedulerQueue"><a href="#flushSchedulerQueue" class="headerlink" title="flushSchedulerQueue"></a>flushSchedulerQueue</h2><pre><code>/*Github:https://github.com/answershuto*/
/**
 * Flush both queues and run the watchers.
 */
 /*nextTickçš„å›è°ƒå‡½æ•°ï¼Œåœ¨ä¸‹ä¸€ä¸ªtickæ—¶flushæ‰ä¸¤ä¸ªé˜Ÿåˆ—åŒæ—¶è¿è¡Œwatchers*/
function flushSchedulerQueue () {
  flushing = true
  let watcher, id

  // Sort queue before flush.
  // This ensures that:
  // 1. Components are updated from parent to child. (because parent is always
  //    created before the child)
  // 2. A component&apos;s user watchers are run before its render watcher (because
  //    user watchers are created before the render watcher)
  // 3. If a component is destroyed during a parent component&apos;s watcher run,
  //    its watchers can be skipped.
  /*
    ç»™queueæ’åºï¼Œè¿™æ ·åšå¯ä»¥ä¿è¯ï¼š
    1.ç»„ä»¶æ›´æ–°çš„é¡ºåºæ˜¯ä»çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶çš„é¡ºåºï¼Œå› ä¸ºçˆ¶ç»„ä»¶æ€»æ˜¯æ¯”å­ç»„ä»¶å…ˆåˆ›å»ºã€‚
    2.ä¸€ä¸ªç»„ä»¶çš„user watchersæ¯”render watcherå…ˆè¿è¡Œï¼Œå› ä¸ºuser watcherså¾€å¾€æ¯”render watcheræ›´æ—©åˆ›å»º
    3.å¦‚æœä¸€ä¸ªç»„ä»¶åœ¨çˆ¶ç»„ä»¶watcherè¿è¡ŒæœŸé—´è¢«é”€æ¯ï¼Œå®ƒçš„watcheræ‰§è¡Œå°†è¢«è·³è¿‡ã€‚
  */
  queue.sort((a, b) =&gt; a.id - b.id)

  // do not cache length because more watchers might be pushed
  // as we run existing watchers
  /*è¿™é‡Œä¸ç”¨index = queue.length;index &gt; 0; index--çš„æ–¹å¼å†™æ˜¯å› ä¸ºä¸è¦å°†lengthè¿›è¡Œç¼“å­˜ï¼Œå› ä¸ºåœ¨æ‰§è¡Œå¤„ç†ç°æœ‰watcherå¯¹è±¡æœŸé—´ï¼Œæ›´å¤šçš„watcherå¯¹è±¡å¯èƒ½ä¼šè¢«pushè¿›queue*/
  for (index = 0; index &lt; queue.length; index++) {
    watcher = queue[index]
    id = watcher.id
    /*å°†hasçš„æ ‡è®°åˆ é™¤*/
    has[id] = null
    /*æ‰§è¡Œwatcher*/
    watcher.run()
    // in dev build, check and stop circular updates.
    /*
      åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œæ£€æµ‹watchæ˜¯å¦åœ¨æ­»å¾ªç¯ä¸­
      æ¯”å¦‚è¿™æ ·ä¸€ç§æƒ…å†µ
      watch: {
        test () {
          this.test++;
        }
      }
      æŒç»­æ‰§è¡Œäº†ä¸€ç™¾æ¬¡watchä»£è¡¨å¯èƒ½å­˜åœ¨æ­»å¾ªç¯
    */
    if (process.env.NODE_ENV !== &apos;production&apos; &amp;&amp; has[id] != null) {
      circular[id] = (circular[id] || 0) + 1
      if (circular[id] &gt; MAX_UPDATE_COUNT) {
        warn(
          &apos;You may have an infinite update loop &apos; + (
            watcher.user
              ? `in watcher with expression &quot;${watcher.expression}&quot;`
              : `in a component render function.`
          ),
          watcher.vm
        )
        break
      }
    }
  }

  // keep copies of post queues before resetting state
  /**/
  /*å¾—åˆ°é˜Ÿåˆ—çš„æ‹·è´*/
  const activatedQueue = activatedChildren.slice()
  const updatedQueue = queue.slice()

  /*é‡ç½®è°ƒåº¦è€…çš„çŠ¶æ€*/
  resetSchedulerState()

  // call component updated and activated hooks
  /*ä½¿å­ç»„ä»¶çŠ¶æ€éƒ½æ”¹ç¼–æˆactiveåŒæ—¶è°ƒç”¨activatedé’©å­*/
  callActivatedHooks(activatedQueue)
  /*è°ƒç”¨updatedé’©å­*/
  callUpdateHooks(updatedQueue)

  // devtool hook
  /* istanbul ignore if */
  if (devtools &amp;&amp; config.devtools) {
    devtools.emit(&apos;flush&apos;)
  }
}
</code></pre><p>flushSchedulerQueueæ˜¯ä¸‹ä¸€ä¸ªtickæ—¶çš„å›è°ƒå‡½æ•°ï¼Œä¸»è¦ç›®çš„æ˜¯æ‰§è¡ŒWatcherçš„runå‡½æ•°ï¼Œç”¨æ¥æ›´æ–°è§†å›¾</p>
<h2 id="ä¸ºä»€ä¹ˆè¦å¼‚æ­¥æ›´æ–°è§†å›¾"><a href="#ä¸ºä»€ä¹ˆè¦å¼‚æ­¥æ›´æ–°è§†å›¾" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¼‚æ­¥æ›´æ–°è§†å›¾"></a>ä¸ºä»€ä¹ˆè¦å¼‚æ­¥æ›´æ–°è§†å›¾</h2><p>æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸€æ®µä»£ç </p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;{{test}}&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
export default {
    data () {
        return {
            test: 0
        };
    },
    created () {
      for(let i = 0; i &lt; 1000; i++) {
        this.test++;
      }
    }
}
</code></pre><p>ç°åœ¨æœ‰è¿™æ ·çš„ä¸€ç§æƒ…å†µï¼Œcreatedçš„æ—¶å€™testçš„å€¼ä¼šè¢«++å¾ªç¯æ‰§è¡Œ1000æ¬¡ã€‚<br>æ¯æ¬¡++æ—¶ï¼Œéƒ½ä¼šæ ¹æ®å“åº”å¼è§¦å‘setter-&gt;Dep-&gt;Watcher-&gt;update-&gt;patchã€‚<br>å¦‚æœè¿™æ—¶å€™æ²¡æœ‰å¼‚æ­¥æ›´æ–°è§†å›¾ï¼Œé‚£ä¹ˆæ¯æ¬¡++éƒ½ä¼šç›´æ¥æ“ä½œDOMæ›´æ–°è§†å›¾ï¼Œè¿™æ˜¯éå¸¸æ¶ˆè€—æ€§èƒ½çš„ã€‚<br>æ‰€ä»¥Vue.jså®ç°äº†ä¸€ä¸ªqueueé˜Ÿåˆ—ï¼Œåœ¨ä¸‹ä¸€ä¸ªtickçš„æ—¶å€™ä¼šç»Ÿä¸€æ‰§è¡Œqueueä¸­Watcherçš„runã€‚åŒæ—¶ï¼Œæ‹¥æœ‰ç›¸åŒidçš„Watcherä¸ä¼šè¢«é‡å¤åŠ å…¥åˆ°è¯¥queueä¸­å»ï¼Œæ‰€ä»¥ä¸ä¼šæ‰§è¡Œ1000æ¬¡Watcherçš„runã€‚æœ€ç»ˆæ›´æ–°è§†å›¾åªä¼šç›´æ¥å°†testå¯¹åº”çš„DOMçš„0å˜æˆ1000ã€‚<br>ä¿è¯æ›´æ–°è§†å›¾æ“ä½œDOMçš„åŠ¨ä½œæ˜¯åœ¨å½“å‰æ ˆæ‰§è¡Œå®Œä»¥åä¸‹ä¸€ä¸ªtickçš„æ—¶å€™è°ƒç”¨ï¼Œå¤§å¤§ä¼˜åŒ–äº†æ€§èƒ½ã€‚</p>
<h2 id="è®¿é—®çœŸå®DOMèŠ‚ç‚¹æ›´æ–°åçš„æ•°æ®"><a href="#è®¿é—®çœŸå®DOMèŠ‚ç‚¹æ›´æ–°åçš„æ•°æ®" class="headerlink" title="è®¿é—®çœŸå®DOMèŠ‚ç‚¹æ›´æ–°åçš„æ•°æ®"></a>è®¿é—®çœŸå®DOMèŠ‚ç‚¹æ›´æ–°åçš„æ•°æ®</h2><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ä¿®æ”¹dataä¸­çš„æ•°æ®åè®¿é—®çœŸå®çš„DOMèŠ‚ç‚¹æ›´æ–°åçš„æ•°æ®ï¼Œåªéœ€è¦è¿™æ ·ï¼Œæˆ‘ä»¬æŠŠæ–‡ç« ç¬¬ä¸€ä¸ªä¾‹å­è¿›è¡Œä¿®æ”¹ã€‚</p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;div ref=&quot;test&quot;&gt;{{test}}&lt;/div&gt;
    &lt;button @click=&quot;handleClick&quot;&gt;tet&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
export default {
    data () {
        return {
            test: &apos;begin&apos;
        };
    },
    methods () {
        handleClick () {
            this.test = &apos;end&apos;;
            this.$nextTick(() =&gt; {
                console.log(this.$refs.test.innerText);//æ‰“å°&quot;end&quot;
            });
            console.log(this.$refs.test.innerText);//æ‰“å°â€œbeginâ€
        }
    }
}
</code></pre><p>ä½¿ç”¨Vue.jsçš„global APIçš„$nextTickæ–¹æ³•ï¼Œå³å¯åœ¨å›è°ƒä¸­è·å–å·²ç»æ›´æ–°å¥½çš„DOMå®ä¾‹äº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/24/è‡ªå·±åŠ¨æ‰‹å®ç°ES6-EventBus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/24/è‡ªå·±åŠ¨æ‰‹å®ç°ES6-EventBus/" itemprop="url">è‡ªå·±åŠ¨æ‰‹å®ç°ES6 EventBus</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-24T20:18:08+08:00">
                2017-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">class EventBus &#123;</span><br><span class="line"></span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.events = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    on(type, callback, scope, ...args) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            this.events[type] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        this.events[type].push(&#123;scope: scope, callback: callback, args: args&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    off(type, callback, scope) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        let numOfCallbacks = this.events[type].length;</span><br><span class="line">        let newArray = [];</span><br><span class="line">        for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">            let event = this.events[type][i];</span><br><span class="line">            if (event.scope == scope &amp;&amp; event.callback == callback) &#123;</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                newArray.push(event);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.events[type] = newArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    has(type, callback, scope) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        let numOfCallbacks = this.events[type].length;</span><br><span class="line">        if (callback === undefined &amp;&amp; scope === undefined) &#123;</span><br><span class="line">            return numOfCallbacks &gt; 0;</span><br><span class="line">        &#125;</span><br><span class="line">        for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">            let event = this.events[type][i];</span><br><span class="line">            if ((scope ? event.scope == scope : true) &amp;&amp; event.callback == callback) &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    emit(type, target, ...args) &#123;</span><br><span class="line">        if (typeof this.events[type] == &quot;undefined&quot;) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        let bag = &#123;</span><br><span class="line">            type: type,</span><br><span class="line">            target: target</span><br><span class="line">        &#125;;</span><br><span class="line">        args = [bag].concat(args);</span><br><span class="line">        let events = this.events[type].slice();</span><br><span class="line">        let numOfCallbacks = events.length;</span><br><span class="line">        for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">            let event = events[i];</span><br><span class="line">            if (event &amp;&amp; event.callback) &#123;</span><br><span class="line">                let concatArgs = args.concat(event.args);</span><br><span class="line">                event.callback.apply(event.scope, concatArgs);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    debug() &#123;</span><br><span class="line">        let str = &quot;&quot;;</span><br><span class="line">        for (let type in this.events) &#123;</span><br><span class="line">            let numOfCallbacks = this.events[type].length;</span><br><span class="line">            for (let i = 0; i &lt; numOfCallbacks; i++) &#123;</span><br><span class="line">                let event = this.events[type][i];</span><br><span class="line">                let className = &quot;Anonymous&quot;;</span><br><span class="line">                if (event.scope) &#123;</span><br><span class="line">                    if (event.scope.constructor.name) &#123;</span><br><span class="line">                        className = event.scope.constructor.name;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                str += `$&#123;className&#125; listening for &quot;$&#123;type&#125;&quot;\n`;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default new EventBus();</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;EventBus Examples&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line">    import EventBus from &apos;/src/eventbus.js&apos;;</span><br><span class="line">    // Simple example</span><br><span class="line">    &#123;</span><br><span class="line">        function myHandler(event) &#123;</span><br><span class="line">            console.log(&quot;myHandler / type: &quot; + event.type);</span><br><span class="line">        &#125;</span><br><span class="line">        EventBus.on(&quot;my_event&quot;, myHandler);</span><br><span class="line">        EventBus.emit(&quot;my_event&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    // Keeping the scope</span><br><span class="line">    &#123;</span><br><span class="line">        class TestClass1 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass1&quot;;</span><br><span class="line">                EventBus.on(&quot;callback_event&quot;, this.callback, this);</span><br><span class="line">            &#125;</span><br><span class="line">            callback(event) &#123;</span><br><span class="line">                console.log(this.className + &quot; / type: &quot; + event.type + &quot; / dispatcher: &quot; + event.target.className);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class TestClass2 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass2&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            dispatch() &#123;</span><br><span class="line">                EventBus.emit(&quot;callback_event&quot;, this);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let t1 = new TestClass1();</span><br><span class="line">        let t2 = new TestClass2();</span><br><span class="line">        t2.dispatch();</span><br><span class="line">    &#125;</span><br><span class="line">    // Passing additional parameters</span><br><span class="line">    &#123;</span><br><span class="line">        class TestClass1 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass1&quot;;</span><br><span class="line">                EventBus.on(&quot;custom_event&quot;, this.doSomething, this);</span><br><span class="line">            &#125;</span><br><span class="line">            doSomething(event, param1, param2) &#123;</span><br><span class="line">                console.log(this.className + &quot;.doSomething&quot;);</span><br><span class="line">                console.log(&quot;type=&quot; + event.type);</span><br><span class="line">                console.log(&quot;params=&quot; + param1 + param2);</span><br><span class="line">                console.log(&quot;coming from=&quot; + event.target.className);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class TestClass2 &#123;</span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.className = &quot;TestClass2&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            ready() &#123;</span><br><span class="line">                EventBus.emit(&quot;custom_event&quot;, this, &quot;javascript events&quot;, &quot; are really useful&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let t1 = new TestClass1();</span><br><span class="line">        let t2 = new TestClass2();</span><br><span class="line">        t2.ready();</span><br><span class="line">    &#125;</span><br><span class="line">    // Debugging</span><br><span class="line">    console.log(EventBus.debug());</span><br><span class="line">    // Removing a registered handler</span><br><span class="line">    &#123;</span><br><span class="line">        var handler = function() &#123;</span><br><span class="line">            console.log(&apos;example callback&apos;);</span><br><span class="line">        &#125;;</span><br><span class="line">        EventBus.on(&apos;EXAMPLE_EVENT&apos;, handler);</span><br><span class="line">        EventBus.emit(&apos;EXAMPLE_EVENT&apos;);</span><br><span class="line">        EventBus.off(&apos;EXAMPLE_EVENT&apos;, handler);</span><br><span class="line">        // Not emitted because event was removed</span><br><span class="line">        EventBus.emit(&apos;EXAMPLE_EVENT&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/11/19-ä¸ª-JavaScript-æœ‰ç”¨çš„ç®€å†™æŠ€æœ¯/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/11/19-ä¸ª-JavaScript-æœ‰ç”¨çš„ç®€å†™æŠ€æœ¯/" itemprop="url">19 ä¸ª JavaScript æœ‰ç”¨çš„ç®€å†™æŠ€æœ¯</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-11T23:11:44+08:00">
                2017-10-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-ä¸‰å…ƒæ“ä½œç¬¦"><a href="#1-ä¸‰å…ƒæ“ä½œç¬¦" class="headerlink" title="1.ä¸‰å…ƒæ“ä½œç¬¦"></a>1.ä¸‰å…ƒæ“ä½œç¬¦</h2><p>å½“æƒ³å†™ifâ€¦elseè¯­å¥æ—¶ï¼Œä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦æ¥ä»£æ›¿ã€‚</p>
<pre><code>const x = 20;
let answer;
if (x &gt; 10) {
    answer = &apos;is greater&apos;;
} else {
    answer = &apos;is lesser&apos;;
}
</code></pre><p>ç®€å†™ï¼š<br><code>const answer = x &gt; 10 ? &#39;is greater&#39; : &#39;is lesser&#39;;</code></p>
<p>ä¹Ÿå¯ä»¥åµŒå¥—ifè¯­å¥ï¼š<br><code>const big = x &gt; 10 ? &quot; greater 10&quot; : x</code></p>
<h2 id="2-çŸ­è·¯æ±‚å€¼ç®€å†™æ–¹å¼"><a href="#2-çŸ­è·¯æ±‚å€¼ç®€å†™æ–¹å¼" class="headerlink" title="2.çŸ­è·¯æ±‚å€¼ç®€å†™æ–¹å¼"></a>2.çŸ­è·¯æ±‚å€¼ç®€å†™æ–¹å¼</h2><p>å½“ç»™ä¸€ä¸ªå˜é‡åˆ†é…å¦ä¸€ä¸ªå€¼æ—¶ï¼Œæƒ³ç¡®å®šæºå§‹å€¼ä¸æ˜¯nullï¼Œundefinedæˆ–ç©ºå€¼ã€‚å¯ä»¥å†™æ’°å†™ä¸€ä¸ªå¤šé‡æ¡ä»¶çš„ifè¯­å¥ã€‚</p>
<pre><code>if (variable1 !== null || variable1 !== undefined || variable1 !== &apos;&apos;) {
     let variable2 = variable1;
}
</code></pre><p>æˆ–è€…å¯ä»¥ä½¿ç”¨çŸ­è·¯æ±‚å€¼æ–¹æ³•ï¼š<br><code>const variable2 = variable1 || &#39;new&#39;;</code></p>
<h2 id="3-å£°æ˜å˜é‡ç®€å†™æ–¹æ³•"><a href="#3-å£°æ˜å˜é‡ç®€å†™æ–¹æ³•" class="headerlink" title="3.å£°æ˜å˜é‡ç®€å†™æ–¹æ³•"></a>3.å£°æ˜å˜é‡ç®€å†™æ–¹æ³•</h2><pre><code>let x;
let y;
let z = 3;
</code></pre><p>ç®€å†™æ–¹æ³•ï¼š<br><code>let x, y, z=3;</code></p>
<h2 id="4-ifå­˜åœ¨æ¡ä»¶ç®€å†™æ–¹æ³•"><a href="#4-ifå­˜åœ¨æ¡ä»¶ç®€å†™æ–¹æ³•" class="headerlink" title="4.ifå­˜åœ¨æ¡ä»¶ç®€å†™æ–¹æ³•"></a>4.ifå­˜åœ¨æ¡ä»¶ç®€å†™æ–¹æ³•</h2><p><code>if (likeJavaScript === true)</code></p>
<p>ç®€å†™ï¼š<br><code>if (likeJavaScript)</code></p>
<p>åªæœ‰likeJavaScriptæ˜¯çœŸå€¼æ—¶ï¼ŒäºŒè€…è¯­å¥æ‰ç›¸ç­‰</p>
<p>å¦‚æœåˆ¤æ–­å€¼ä¸æ˜¯çœŸå€¼ï¼Œåˆ™å¯ä»¥è¿™æ ·ï¼š</p>
<pre><code>let a;
if ( a !== true ) {
// do something...
}
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>let a;
if ( !a ) {
// do something...
}
</code></pre><h2 id="5-JavaScriptå¾ªç¯ç®€å†™æ–¹æ³•"><a href="#5-JavaScriptå¾ªç¯ç®€å†™æ–¹æ³•" class="headerlink" title="5.JavaScriptå¾ªç¯ç®€å†™æ–¹æ³•"></a>5.JavaScriptå¾ªç¯ç®€å†™æ–¹æ³•</h2><p><code>for (let i = 0; i &lt; allImgs.length; i++)</code></p>
<p>ç®€å†™ï¼š<br><code>for (let index in allImgs)</code><br>ä¹Ÿå¯ä»¥ä½¿ç”¨Array.forEachï¼š</p>
<pre><code>function logArrayElements(element, index, array) {
  console.log(&quot;a[&quot; + index + &quot;] = &quot; + element);
}
[2, 5, 9].forEach(logArrayElements);
// logs:
// a[0] = 2
// a[1] = 5
// a[2] = 9
</code></pre><h2 id="6-çŸ­è·¯è¯„ä»·"><a href="#6-çŸ­è·¯è¯„ä»·" class="headerlink" title="6.çŸ­è·¯è¯„ä»·"></a>6.çŸ­è·¯è¯„ä»·</h2><p>ç»™ä¸€ä¸ªå˜é‡åˆ†é…çš„å€¼æ˜¯é€šè¿‡åˆ¤æ–­å…¶å€¼æ˜¯å¦ä¸ºnullæˆ–undefinedï¼Œåˆ™å¯ä»¥ï¼š</p>
<pre><code>let dbHost;
if (process.env.DB_HOST) {
  dbHost = process.env.DB_HOST;
} else {
  dbHost = &apos;localhost&apos;;
}
</code></pre><p>ç®€å†™ï¼š<br><code>const dbHost = process.env.DB_HOST || &#39;localhost&#39;;</code></p>
<h2 id="7-åè¿›åˆ¶æŒ‡æ•°"><a href="#7-åè¿›åˆ¶æŒ‡æ•°" class="headerlink" title="7.åè¿›åˆ¶æŒ‡æ•°"></a>7.åè¿›åˆ¶æŒ‡æ•°</h2><p>å½“éœ€è¦å†™æ•°å­—å¸¦æœ‰å¾ˆå¤šé›¶æ—¶ï¼ˆå¦‚10000000ï¼‰ï¼Œå¯ä»¥é‡‡ç”¨æŒ‡æ•°ï¼ˆ1e7ï¼‰æ¥ä»£æ›¿è¿™ä¸ªæ•°å­—ï¼š<br><code>for (let i = 0; i &lt; 10000; i++) {}</code><br>ç®€å†™ï¼š</p>
<pre><code>for (let i = 0; i &lt; 1e7; i++) {}

// ä¸‹é¢éƒ½æ˜¯è¿”å›true
1e0 === 1;
1e1 === 10;
1e2 === 100;
1e3 === 1000;
1e4 === 10000;
1e5 === 100000;
</code></pre><h2 id="8-å¯¹è±¡å±æ€§ç®€å†™"><a href="#8-å¯¹è±¡å±æ€§ç®€å†™" class="headerlink" title="8.å¯¹è±¡å±æ€§ç®€å†™"></a>8.å¯¹è±¡å±æ€§ç®€å†™</h2><p>å¦‚æœå±æ€§åä¸keyåç›¸åŒï¼Œåˆ™å¯ä»¥é‡‡ç”¨ES6çš„æ–¹æ³•ï¼š<br><code>const obj = { x:x, y:y };</code></p>
<p>ç®€å†™ï¼š<br><code>const obj = { x, y };</code></p>
<h2 id="9-ç®­å¤´å‡½æ•°ç®€å†™"><a href="#9-ç®­å¤´å‡½æ•°ç®€å†™" class="headerlink" title="9.ç®­å¤´å‡½æ•°ç®€å†™"></a>9.ç®­å¤´å‡½æ•°ç®€å†™</h2><p>ä¼ ç»Ÿå‡½æ•°ç¼–å†™æ–¹æ³•å¾ˆå®¹æ˜“è®©äººç†è§£å’Œç¼–å†™ï¼Œä½†æ˜¯å½“åµŒå¥—åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œåˆ™è¿™äº›ä¼˜åŠ¿å°±è¡ç„¶æ— å­˜ã€‚</p>
<pre><code>function sayHello(name) {
  console.log(&apos;Hello&apos;, name);
}

setTimeout(function() {
  console.log(&apos;Loaded&apos;)
}, 2000);

list.forEach(function(item) {
  console.log(item);
});
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>sayHello = name =&gt; console.log(&apos;Hello&apos;, name);

setTimeout(() =&gt; console.log(&apos;Loaded&apos;), 2000);

list.forEach(item =&gt; console.log(item));
</code></pre><h2 id="10-éšå¼è¿”å›å€¼ç®€å†™"><a href="#10-éšå¼è¿”å›å€¼ç®€å†™" class="headerlink" title="10.éšå¼è¿”å›å€¼ç®€å†™"></a>10.éšå¼è¿”å›å€¼ç®€å†™</h2><p>ç»å¸¸ä½¿ç”¨returnè¯­å¥æ¥è¿”å›å‡½æ•°æœ€ç»ˆç»“æœï¼Œä¸€ä¸ªå•ç‹¬è¯­å¥çš„ç®­å¤´å‡½æ•°èƒ½éšå¼è¿”å›å…¶å€¼ï¼ˆå‡½æ•°å¿…é¡»çœç•¥{}ä¸ºäº†çœç•¥returnå…³é”®å­—ï¼‰</p>
<p>ä¸ºè¿”å›å¤šè¡Œè¯­å¥ï¼ˆä¾‹å¦‚å¯¹è±¡å­—é¢è¡¨è¾¾å¼ï¼‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨()åŒ…å›´å‡½æ•°ä½“ã€‚</p>
<pre><code>function calcCircumference(diameter) {
  return Math.PI * diameter
}

var func = function func() {
  return { foo: 1 };
};
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>calcCircumference = diameter =&gt; (
  Math.PI * diameter;
)

var func = () =&gt; ({ foo: 1 });
</code></pre><h2 id="11-é»˜è®¤å‚æ•°å€¼"><a href="#11-é»˜è®¤å‚æ•°å€¼" class="headerlink" title="11.é»˜è®¤å‚æ•°å€¼"></a>11.é»˜è®¤å‚æ•°å€¼</h2><p>ä¸ºäº†ç»™å‡½æ•°ä¸­å‚æ•°ä¼ é€’é»˜è®¤å€¼ï¼Œé€šå¸¸ä½¿ç”¨ifè¯­å¥æ¥ç¼–å†™ï¼Œä½†æ˜¯ä½¿ç”¨ES6å®šä¹‰é»˜è®¤å€¼ï¼Œåˆ™ä¼šå¾ˆç®€æ´ï¼š</p>
<pre><code>function volume(l, w, h) {
  if (w === undefined)
    w = 3;
  if (h === undefined)
    h = 4;
  return l * w * h;
}
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>volume = (l, w = 3, h = 4 ) =&gt; (l * w * h);

volume(2) //output: 24
</code></pre><h2 id="12-æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#12-æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="12.æ¨¡æ¿å­—ç¬¦ä¸²"></a>12.æ¨¡æ¿å­—ç¬¦ä¸²</h2><p>ä¼ ç»Ÿçš„JavaScriptè¯­è¨€ï¼Œè¾“å‡ºæ¨¡æ¿é€šå¸¸æ˜¯è¿™æ ·å†™çš„ã€‚</p>
<pre><code>const welcome = &apos;You have logged in as &apos; + first + &apos; &apos; + last + &apos;.&apos;

const db = &apos;http://&apos; + host + &apos;:&apos; + port + &apos;/&apos; + database;
</code></pre><p>ES6å¯ä»¥ä½¿ç”¨åå¼•å·å’Œ${}ç®€å†™ï¼š</p>
<pre><code>const welcome = `You have logged in as ${first} ${last}`;

const db = `http://${host}:${port}/${database}`;
</code></pre><h2 id="13-è§£æ„èµ‹å€¼ç®€å†™æ–¹æ³•"><a href="#13-è§£æ„èµ‹å€¼ç®€å†™æ–¹æ³•" class="headerlink" title="13.è§£æ„èµ‹å€¼ç®€å†™æ–¹æ³•"></a>13.è§£æ„èµ‹å€¼ç®€å†™æ–¹æ³•</h2><p>åœ¨webæ¡†æ¶ä¸­ï¼Œç»å¸¸éœ€è¦ä»ç»„ä»¶å’ŒAPIä¹‹é—´æ¥å›ä¼ é€’æ•°ç»„æˆ–å¯¹è±¡å­—é¢å½¢å¼çš„æ•°æ®ï¼Œç„¶åéœ€è¦è§£æ„å®ƒ</p>
<pre><code>const observable = require(&apos;mobx/observable&apos;);
const action = require(&apos;mobx/action&apos;);
const runInAction = require(&apos;mobx/runInAction&apos;);

const store = this.props.store;
const form = this.props.form;
const loading = this.props.loading;
const errors = this.props.errors;
const entity = this.props.entity;
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>import { observable, action, runInAction } from &apos;mobx&apos;;

const { store, form, loading, errors, entity } = this.props;
</code></pre><p>ä¹Ÿå¯ä»¥åˆ†é…å˜é‡åï¼š</p>
<pre><code>const { store, form, loading, errors, entity:contact } = this.props;
//æœ€åä¸€ä¸ªå˜é‡åä¸ºcontact
</code></pre><h2 id="14-å¤šè¡Œå­—ç¬¦ä¸²ç®€å†™"><a href="#14-å¤šè¡Œå­—ç¬¦ä¸²ç®€å†™" class="headerlink" title="14.å¤šè¡Œå­—ç¬¦ä¸²ç®€å†™"></a>14.å¤šè¡Œå­—ç¬¦ä¸²ç®€å†™</h2><p>éœ€è¦è¾“å‡ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œéœ€è¦ä½¿ç”¨+æ¥æ‹¼æ¥ï¼š</p>
<pre><code>const lorem = &apos;Lorem ipsum dolor sit amet, consectetur\n\t&apos;
    + &apos;adipisicing elit, sed do eiusmod tempor incididunt\n\t&apos;
    + &apos;ut labore et dolore magna aliqua. Ut enim ad minim\n\t&apos;
    + &apos;veniam, quis nostrud exercitation ullamco laboris\n\t&apos;
    + &apos;nisi ut aliquip ex ea commodo consequat. Duis aute\n\t&apos;
    + &apos;irure dolor in reprehenderit in voluptate velit esse.\n\t&apos;
</code></pre><p>ä½¿ç”¨åå¼•å·ï¼Œåˆ™å¯ä»¥è¾¾åˆ°ç®€å†™ä½œç”¨ï¼š</p>
<pre><code>const lorem = `Lorem ipsum dolor sit amet, consectetur
    adipisicing elit, sed do eiusmod tempor incididunt
    ut labore et dolore magna aliqua. Ut enim ad minim
    veniam, quis nostrud exercitation ullamco laboris
    nisi ut aliquip ex ea commodo consequat. Duis aute
    irure dolor in reprehenderit in voluptate velit esse.`
</code></pre><h2 id="15-æ‰©å±•è¿ç®—ç¬¦ç®€å†™"><a href="#15-æ‰©å±•è¿ç®—ç¬¦ç®€å†™" class="headerlink" title="15.æ‰©å±•è¿ç®—ç¬¦ç®€å†™"></a>15.æ‰©å±•è¿ç®—ç¬¦ç®€å†™</h2><p>æ‰©å±•è¿ç®—ç¬¦æœ‰å‡ ç§ç”¨ä¾‹è®©JavaScriptä»£ç æ›´åŠ æœ‰æ•ˆä½¿ç”¨ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿æŸä¸ªæ•°ç»„å‡½æ•°ã€‚</p>
<pre><code>// joining arrays
const odd = [1, 3, 5];
const nums = [2 ,4 , 6].concat(odd);

// cloning arrays
const arr = [1, 2, 3, 4];
const arr2 = arr.slice()
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>// joining arrays
const odd = [1, 3, 5 ];
const nums = [2 ,4 , 6, ...odd];
console.log(nums); // [ 2, 4, 6, 1, 3, 5 ]

// cloning arrays
const arr = [1, 2, 3, 4];
const arr2 = [...arr];
</code></pre><p>ä¸åƒconcat()å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦æ¥åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ä»»æ„å¤„æ’å…¥å¦ä¸€ä¸ªæ•°ç»„ã€‚</p>
<pre><code>const odd = [1, 3, 5 ];
const nums = [2, ...odd, 4 , 6];
</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è§£æ„ï¼š</p>
<pre><code>const { a, b, ...z } = { a: 1, b: 2, c: 3, d: 4 };
console.log(a) // 1
console.log(b) // 2
console.log(z) // { c: 3, d: 4 }
</code></pre><h2 id="16-å¼ºåˆ¶å‚æ•°ç®€å†™"><a href="#16-å¼ºåˆ¶å‚æ•°ç®€å†™" class="headerlink" title="16.å¼ºåˆ¶å‚æ•°ç®€å†™"></a>16.å¼ºåˆ¶å‚æ•°ç®€å†™</h2><p>JavaScriptä¸­å¦‚æœæ²¡æœ‰å‘å‡½æ•°å‚æ•°ä¼ é€’å€¼ï¼Œåˆ™å‚æ•°ä¸ºundefinedã€‚ä¸ºäº†å¢å¼ºå‚æ•°èµ‹å€¼ï¼Œå¯ä»¥ä½¿ç”¨ifè¯­å¥æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–ä½¿ç”¨å¼ºåˆ¶å‚æ•°ç®€å†™æ–¹æ³•ã€‚</p>
<pre><code>function foo(bar) {
  if(bar === undefined) {
    throw new Error(&apos;Missing parameter!&apos;);
  }
  return bar;
}
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>mandatory = () =&gt; {
  throw new Error(&apos;Missing parameter!&apos;);
}

foo = (bar = mandatory()) =&gt; {
  return bar;
}
</code></pre><h2 id="17-Array-findç®€å†™"><a href="#17-Array-findç®€å†™" class="headerlink" title="17.Array.findç®€å†™"></a>17.Array.findç®€å†™</h2><p>æƒ³ä»æ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸ªå€¼ï¼Œåˆ™éœ€è¦å¾ªç¯ã€‚åœ¨ES6ä¸­ï¼Œfind()å‡½æ•°èƒ½å®ç°åŒæ ·æ•ˆæœã€‚</p>
<pre><code>const pets = [
  { type: &apos;Dog&apos;, name: &apos;Max&apos;},
  { type: &apos;Cat&apos;, name: &apos;Karl&apos;},
  { type: &apos;Dog&apos;, name: &apos;Tommy&apos;},
]

function findDog(name) {
  for(let i = 0; i&lt;pets.length; ++i) {
    if(pets[i].type === &apos;Dog&apos; &amp;&amp; pets[i].name === name) {
      return pets[i];
    }
  }
}
</code></pre><p>ç®€å†™ï¼š</p>
<pre><code>pet = pets.find(pet =&gt; pet.type ===&apos;Dog&apos; &amp;&amp; pet.name === &apos;Tommy&apos;);
console.log(pet); // { type: &apos;Dog&apos;, name: &apos;Tommy&apos; }
</code></pre><h2 id="18-Object-key-ç®€å†™"><a href="#18-Object-key-ç®€å†™" class="headerlink" title="18.Object[key]ç®€å†™"></a>18.Object[key]ç®€å†™</h2><p>è€ƒè™‘ä¸€ä¸ªéªŒè¯å‡½æ•°</p>
<pre><code>function validate(values) {
  if(!values.first)
    return false;
  if(!values.last)
    return false;
  return true;
}

console.log(validate({first:&apos;Bruce&apos;,last:&apos;Wayne&apos;})); // true
</code></pre><p>å‡è®¾å½“éœ€è¦ä¸åŒåŸŸå’Œè§„åˆ™æ¥éªŒè¯ï¼Œèƒ½å¦ç¼–å†™ä¸€ä¸ªé€šç”¨å‡½æ•°åœ¨è¿è¡Œæ—¶ç¡®è®¤ï¼Ÿ</p>
<pre><code>// å¯¹è±¡éªŒè¯è§„åˆ™
const schema = {
  first: {
    required:true
  },
  last: {
    required:true
  }
}

// é€šç”¨éªŒè¯å‡½æ•°
const validate = (schema, values) =&gt; {
  for(field in schema) {
    if(schema[field].required) {
      if(!values[field]) {
        return false;
      }
    }
  }
  return true;
}


console.log(validate(schema, {first:&apos;Bruce&apos;})); // false
console.log(validate(schema, {first:&apos;Bruce&apos;,last:&apos;Wayne&apos;})); // true
</code></pre><p>ç°åœ¨å¯ä»¥æœ‰é€‚ç”¨äºå„ç§æƒ…å†µçš„éªŒè¯å‡½æ•°ï¼Œä¸éœ€è¦ä¸ºäº†æ¯ä¸ªè€Œç¼–å†™è‡ªå®šä¹‰éªŒè¯å‡½æ•°äº†</p>
<h2 id="19-åŒé‡éä½è¿ç®—ç®€å†™"><a href="#19-åŒé‡éä½è¿ç®—ç®€å†™" class="headerlink" title="19.åŒé‡éä½è¿ç®—ç®€å†™"></a>19.åŒé‡éä½è¿ç®—ç®€å†™</h2><p>æœ‰ä¸€ä¸ªæœ‰æ•ˆç”¨ä¾‹ç”¨äºåŒé‡éè¿ç®—æ“ä½œç¬¦ã€‚å¯ä»¥ç”¨æ¥ä»£æ›¿Math.floor()ï¼Œå…¶ä¼˜åŠ¿åœ¨äºè¿è¡Œæ›´å¿«ï¼Œå¯ä»¥é˜…è¯»æ­¤æ–‡ç« äº†è§£æ›´å¤šä½è¿ç®—ã€‚<br><code>Math.floor(4.9) === 4 //true</code></p>
<p>ç®€å†™ï¼š<br><code>~~4.9 === 4 //true</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/02/CSSå¦‚ä½•å®ç°æ–‡å­—ä¸¤ç«¯å¯¹é½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ææ–Œ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LuckDay">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/02/CSSå¦‚ä½•å®ç°æ–‡å­—ä¸¤ç«¯å¯¹é½/" itemprop="url">CSSå¦‚ä½•å®ç°æ–‡å­—ä¸¤ç«¯å¯¹é½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-02T23:22:03+08:00">
                2017-10-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ€è¿‘åœ¨å·¥ä½œé¡¹ç›®ä¸­æ¥è§¦åˆ°Webç•Œé¢è®¾è®¡çš„é—®é¢˜ï¼Œè¦å®ç°æ–‡å­—ä¸¤ç«¯å¯¹é½çš„æ•ˆæœã€‚åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ä¸‹ï¼Œå·®ä¸å¤šéƒ½æ˜¯äº’ç›¸è½¬å¸–ï¼Œç”¨çš„éƒ½æ˜¯ç±»ä¼¼çš„æŠ€å·§ï¼š</p>
<pre><code>text-align:justify;
text-justify:inter-ideograph;
</code></pre><p>ä½†é—®é¢˜æ˜¯ï¼Œæˆ‘æ€ä¹ˆå°±çœ‹ä¸åˆ°æ•ˆæœå‘¢ï¼Ÿæ— è®ºæ˜¯è‹±æ–‡è¿˜æ˜¯ä¸­æ–‡ï¼Œåœ¨IEå’Œchromeä¸‹éƒ½ä¸èµ·ä½œç”¨ã€‚åæ¥ï¼Œç»ˆäºåœ¨StackOverflowä¸Šæ‰¾åˆ°è§£å†³æ–¹æ³•äº†ã€‚</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;&lt;/title&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            .arter li {
                font-size: 14px;
                line-height: 24px;
                color: #4a4a4a;
            }

            .arter span {
                height: 24px;
                line-height: 24px;
                width: 65px;
                text-align: justify;
                display: inline-block;
                overflow: hidden;
                vertical-align: top;
            }

            .arter i {
                display: inline-block;
                width: 100%;
                height: 0;
            }




            .arter1 li {
                font-size: 14px;
                line-height: 24px;
                color: #4a4a4a;
            }



            .arter1 span {
                height: 24px;
                line-height: 24px;
                width: 65px;
                text-align: justify;
                display: inline-block;
                overflow: hidden;
                vertical-align: top;
            }
            .arter1 span:after {
                content: &quot; &quot;;
                display: inline-block;
                width: 100%;
                height: 0px;
            }
        &lt;/style&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;ul class=&quot;arter&quot;&gt;
            &lt;li&gt;&lt;span&gt;ä½œå“åç§°&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š å®è´å„¿&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;ä½œå“ç±»å‹&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š æ²¹ç”»&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;è‰ºæœ¯å®¶&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š å¼ ç‰ç€›&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;é£æ ¼&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š è¶…ç°å®&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;æè´¨&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š å¸ƒé¢æ²¹ç”»&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;é¢˜æ&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š äººç‰©&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;åˆ›ä½œæ—¶é—´&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š 2011&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;æ‰€åœ¨ä½ç½®&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š åä¸œ&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;å°ºå¯¸&lt;i&gt;&lt;/i&gt;&lt;/span&gt;ï¼š 78x78cm&lt;/li&gt;
        &lt;/ul&gt;
        &lt;br /&gt;&lt;br /&gt;
        &lt;ul class=&quot;arter1&quot;&gt;
            &lt;li&gt;&lt;span&gt;ä½œå“åç§°&lt;/span&gt;ï¼š å®è´å„¿&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;ä½œå“ç±»å‹&lt;/span&gt;ï¼š æ²¹ç”»&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;è‰ºæœ¯å®¶&lt;/span&gt;ï¼š å¼ ç‰ç€›&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;é£æ ¼&lt;/span&gt;ï¼š è¶…ç°å®&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;æè´¨&lt;/span&gt;ï¼š å¸ƒé¢æ²¹ç”»&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;é¢˜æ&lt;/span&gt;ï¼š äººç‰©&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;åˆ›ä½œæ—¶é—´&lt;/span&gt;ï¼š 2011&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;æ‰€åœ¨ä½ç½®&lt;/span&gt;ï¼š åä¸œ&lt;/li&gt;
            &lt;li&gt;&lt;span&gt;å°ºå¯¸&lt;/span&gt;ï¼š 78x78cm&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/body&gt;

&lt;/html&gt;
</code></pre><p>æ ·å¼ï¼š<br><img src="https://pic1.zhimg.com/v2-b92871dee74e80785026c069073206ab_b.jpg" alt=""><img src="https://pic1.zhimg.com/80/v2-b92871dee74e80785026c069073206ab_hd.jpg" alt=""><br>ä»æ•ˆæœå›¾å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†è¦åœ¨å—çº§å…ƒç´ åŠ text-align:justifyæ ·å¼å¤–ï¼Œè¿˜éœ€è¦åœ¨é‡Œé¢åŠ ä¸€ä¸ªç©ºçš„spanå…ƒç´ ï¼Œå¹¶åº”ç”¨æ ·å¼ã€‚å¦å¤–ï¼Œå¯¹äºä¸­æ–‡è¿˜å¿…é¡»ç”¨ç©ºæ ¼éš”å¼€æ±‰å­—ï¼Œå¦åˆ™ä¹Ÿæ²¡æœ‰ä¸¤ç«¯å¯¹é½çš„æ•ˆæœã€‚è‹±æ–‡æ¯ä¸ªå•è¯éƒ½æœ‰ç©ºæ ¼éš”å¼€ï¼Œæ‰€ä»¥æ²¡é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯åŠ å…¥HTMLå…ƒç´ åˆè¿åäº†ç»“æ„è¡¨ç°åˆ†ç¦»çš„åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹ç”¨afterã€beforeä¼ªå…ƒç´ ï¼š</p>
<pre><code>li:after {
    content: &quot; &quot;;
    display: inline-block;
    width: 100%;
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/tx.jpg"
                alt="ææ–Œ" />
            
              <p class="site-author-name" itemprop="name">ææ–Œ</p>
              <p class="site-description motion-element" itemprop="description">æƒ³è¦é£å¾—é«˜ï¼Œé‚£å°±æŠŠåœ°å¹³çº¿å¿˜æ‰</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">83</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/libin1991" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="3120217729@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/57e737f6c4c971005f6bcd8d" target="_blank" title="juejin">
                      
                        <i class="fa fa-fw fa-spinner"></i>juejin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ–Œ</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
<script type="text/javascript" src="/js/src/clicklove.js"></script>

